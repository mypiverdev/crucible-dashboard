<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CremoLogix — Technology</title>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --navy: #1E3A5F; --blue: #2D7DD2; --green: #28A745; --amber: #F4A261;
  --red: #E63946; --light-bg: #F8F9FA; --text: #333333; --text-light: #666666;
  --border: #DEE2E6; --white: #FFFFFF;
}
@page { size: letter; margin: 0.75in; }
html { font-size: 10.5pt; }
body { font-family: system-ui, 'Segoe UI', sans-serif; color: var(--text); line-height: 1.6; background: var(--white); }
@media print { body { -webkit-print-color-adjust: exact; print-color-adjust: exact; } .cover { box-shadow: none !important; } .no-print { display: none !important; } }
.cover { background: linear-gradient(135deg, #1E3A5F 0%, #0F1F33 60%, #162D4A 100%); color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; min-height: 100vh; position: relative; overflow: hidden; }
.cover::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(ellipse at 30% 20%, rgba(45,125,210,0.12) 0%, transparent 50%), radial-gradient(ellipse at 70% 80%, rgba(45,125,210,0.08) 0%, transparent 50%); pointer-events: none; }
.cover-content { position: relative; z-index: 1; max-width: 700px; }
.cover .brand-mark { font-size: 1.4rem; font-weight: 300; letter-spacing: 0.35em; text-transform: uppercase; color: rgba(255,255,255,0.7); margin-bottom: 60px; border: 1px solid rgba(255,255,255,0.2); display: inline-block; padding: 10px 28px; border-radius: 4px; }
.cover h1 { font-size: 3rem; color: white; margin-bottom: 20px; font-weight: 700; letter-spacing: -0.02em; }
.cover .subtitle { font-size: 1.3rem; color: rgba(255,255,255,0.8); font-weight: 300; margin-bottom: 60px; line-height: 1.5; }
.cover .divider-line { width: 80px; height: 2px; background: var(--blue); margin: 0 auto 40px; }
.cover .meta { font-size: 0.95rem; color: rgba(255,255,255,0.6); line-height: 2; }
.cover .confidential { position: absolute; bottom: 40px; left: 0; right: 0; text-align: center; font-size: 0.8rem; letter-spacing: 0.15em; text-transform: uppercase; color: rgba(255,255,255,0.35); }
.page-header { display: flex; justify-content: space-between; align-items: center; padding: 16px 56px; border-bottom: 2px solid var(--navy); font-size: 0.78rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.08em; }
.page-header .logo-text { font-weight: 700; color: var(--navy); letter-spacing: 0.15em; }
.content { padding: 48px 56px; max-width: 900px; margin: 0 auto; }
h1 { font-size: 2.4rem; color: var(--navy); font-weight: 700; letter-spacing: -0.02em; line-height: 1.2; margin: 36px 0 16px; }
h2 { font-size: 1.6rem; color: var(--navy); font-weight: 700; letter-spacing: -0.01em; line-height: 1.3; margin: 32px 0 14px; border-bottom: 2px solid var(--blue); padding-bottom: 8px; }
h3 { font-size: 1.2rem; color: var(--navy); font-weight: 600; line-height: 1.3; margin: 24px 0 10px; }
h4 { font-size: 1.05rem; color: var(--navy); font-weight: 600; margin: 18px 0 8px; }
p { margin-bottom: 14px; line-height: 1.7; }
strong { color: var(--navy); }
ul, ol { margin-bottom: 16px; padding-left: 0; list-style: none; }
ul li, ol li { padding: 6px 0 6px 26px; position: relative; line-height: 1.6; }
ul li::before { content: '\25B6'; position: absolute; left: 0; color: var(--blue); font-size: 0.55rem; top: 12px; }
ol { counter-reset: item; }
ol li { counter-increment: item; }
ol li::before { content: counter(item); position: absolute; left: 0; width: 22px; height: 22px; background: var(--navy); color: #fff; border-radius: 50%; font-size: 0.7rem; font-weight: 700; display: flex; align-items: center; justify-content: center; top: 8px; }
table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 0.92rem; box-shadow: 0 1px 4px rgba(0,0,0,0.06); }
thead th { background: var(--navy); color: white; padding: 12px 16px; text-align: left; font-weight: 600; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.04em; border: 1px solid #15304D; }
tbody td { padding: 11px 16px; border: 1px solid var(--border); vertical-align: top; line-height: 1.5; }
tbody tr:nth-child(even) { background: #F8F9FA; }
tbody tr:hover { background: #EBF3FB; }
blockquote { border-left: 4px solid var(--blue); background: #EBF3FB; padding: 20px 24px; border-radius: 0 8px 8px 0; margin: 20px 0; }
blockquote p:last-child { margin-bottom: 0; }
code { background: rgba(45,125,210,0.08); padding: 2px 7px; border-radius: 4px; font-size: 0.88rem; color: var(--blue); font-weight: 500; }
pre { background: #1b2e4a; color: #e2e8f0; padding: 20px 24px; border-radius: 10px; overflow-x: auto; margin: 20px 0; box-shadow: 0 4px 12px rgba(26,43,74,0.12); }
pre code { background: none; padding: 0; color: #e2e8f0; font-size: 0.85rem; }
hr { border: none; height: 2px; background: linear-gradient(90deg, var(--blue), transparent); margin: 32px 0; }
a { color: var(--blue); text-decoration: none; font-weight: 500; }
a:hover { text-decoration: underline; }
img { max-width: 100%; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin: 16px 0; }
.back-link { position: fixed; top: 16px; right: 20px; z-index: 100; background: var(--navy); color: white; padding: 8px 18px; border-radius: 6px; font-size: 0.82rem; font-weight: 600; text-decoration: none; box-shadow: 0 2px 8px rgba(0,0,0,0.2); transition: background 0.15s; }
.back-link:hover { background: #264E7A; text-decoration: none; color: white; }
</style>
</head>
<body>
<a class="back-link no-print" href="../..">&#8592; Dashboard</a>
<div class="cover">
  <div class="cover-content">
    <div class="brand-mark">CremoLogix</div>
    <h1>Technology</h1>
    <div class="subtitle">AI-assisted underwriting platform for CDFIs — automates financial analysis while maintaining full human control over credit decisions</div>
    <div class="divider-line"></div>
    <div class="meta">February 13, 2026<br>Crucible Product Development Pipeline</div>
  </div>
  <div class="confidential">Confidential</div>
</div>
<div class="page-header no-print">
  <span class="logo-text">CremoLogix</span>
  <span>Technology</span>
</div>
<div class="content" id="content"></div>
<script>
  const md = "# CremoLogix -- Technology Document\n\n> **SUPERSEDED — Sub-project breakdown requires rewrite.**\n> The 12 sub-projects below were authored against the legacy architecture.md model and cover\n> only ~40% of the actual MVP scope defined in **`specification.md`** (approved Phase 2).\n>\n> **What's missing from the sub-project breakdown:**\n> - Financial Normalization Engine (FNE) — see `fne-specification.md`\n> - Deal Health Score engine — see `deal-health-specification.md`\n> - Pre-qualification pipeline (credit bureau, KYC, background check)\n> - Broker Portal (BK-01 through BK-07)\n> - Intake Agent Portal (IA-01 through IA-04)\n> - CDFI Reporting (TLR, Impact Metrics, Section 1071)\n> - Case-centric workflow (13 phases, not 16 stages)\n> - Configurable scoring engine (scoring models, categories, factors)\n> - Salesforce integration (inbound referrals + outbound status sync)\n> - Fair Lending Analytics (AD-12)\n>\n> The implementation roadmap, environment setup, dev practices, deployment, and security\n> sections (Sections 2-9) remain **directionally valid** but should reference specification.md\n> for authoritative technology choices (NestJS, not Express.js; PostgreSQL 16, not 15).\n>\n> A rewritten sub-project breakdown aligned with specification.md will be produced during\n> the Phase 3 Architecture review.\n\n**Version:** 1.0 (SUPERSEDED — sub-projects need rewrite)\n**Date:** February 2025\n**Source Files:**\n- `C:/projects/Ideas/CremoLogix/Implementation FIles/03-cremologix-sub-projects.md`\n- `C:/projects/Ideas/CremoLogix/Implementation FIles/04-cremologix-implementation-guide.md`\n\n---\n\n## 1. Sub-Project Breakdown (18 Projects)\n\n> **Updated to align with specification.md (approved Phase 2).** Replaces the legacy 12-project breakdown.\n\n### Overview\n\nThe CremoLogix MVP is divided into **18 self-contained sub-projects** covering all 60 MVP + 1 MVP-LITE screens across 7 portals, the 13-phase workflow, pre-qualification pipeline, and all supporting engines.\n\n- **Stack:** NestJS (Core API) + Python/FastAPI (AI/ML Pipeline) + React 18 + PostgreSQL 16\n- **Sprint Cycle:** 2-week sprints\n- **Each Sub-Project:** 1-4 weeks for 1-2 developers\n\n### Sub-Project Catalog\n\n| ID | Name | Type | Est. Weeks | Dependencies |\n|----|------|------|------------|--------------|\n| SUB-01 | Foundation: Auth, Users & Multi-Tenant | Backend + Frontend | 3 | None |\n| SUB-02 | Database Schema & Migrations | Backend | 2 | None |\n| SUB-03 | Pre-Qualification Pipeline | Backend + Frontend | 3 | SUB-01, SUB-02 |\n| SUB-04 | Borrower Portal | Frontend + Backend | 4 | SUB-01, SUB-03 |\n| SUB-05 | Broker Portal | Frontend + Backend | 2 | SUB-01, SUB-03 |\n| SUB-06 | Intake Agent Portal | Frontend + Backend | 2 | SUB-01, SUB-03 |\n| SUB-07 | Document Management & Storage | Backend + Frontend | 2 | SUB-01, SUB-02 |\n| SUB-08 | AI/ML Pipeline: OCR, Classification & Extraction | Python + Backend | 4 | SUB-07 |\n| SUB-09 | Financial Normalization Engine (FNE) | Backend | 3 | SUB-08 |\n| SUB-10 | Financial Analysis Engine | Backend | 3 | SUB-09 |\n| SUB-11 | Risk Assessment Engine | Backend | 2 | SUB-10 |\n| SUB-12 | Deal Health Score Engine | Backend | 2 | SUB-03, SUB-10 |\n| SUB-13 | Workflow Engine (13-Phase) | Backend | 3 | SUB-01, SUB-02 |\n| SUB-14 | Underwriter Portal | Frontend + Backend | 4 | SUB-10, SUB-11, SUB-12, SUB-13 |\n| SUB-15 | Scoring Engine & Credit Memo Assembly | Backend + Frontend | 4 | SUB-11, SUB-14 |\n| SUB-16 | Credit Manager Portal & Review | Frontend + Backend | 3 | SUB-14, SUB-15 |\n| SUB-17 | Admin Portal & Configuration | Frontend + Backend | 4 | SUB-01, SUB-12, SUB-13 |\n| SUB-18 | Integrations, Reporting & Audit | Backend + Frontend | 3 | SUB-13, SUB-15 |\n\n---\n\n### SUB-01: Foundation: Auth, Users & Multi-Tenant\n\n**Objective:** NestJS application scaffold with RS256 JWT auth, RBAC, multi-tenant data isolation, and user management.\n\n**Scope:**\n- NestJS project setup with TypeScript strict mode\n- RS256 JWT with 15-minute access token + 7-day opaque refresh token (Redis)\n- User registration (3 channels: direct, Salesforce referral, external referral)\n- Email verification flow, password reset, account lockout (5 attempts)\n- RBAC: borrower, underwriter, credit_manager, admin roles with `user_roles` join table\n- Multi-tenant middleware: extract `tenant_id` from JWT, set PostgreSQL `app.current_tenant_id`\n- RLS policies on all tenant-scoped tables\n- Login UI for all portals (B-06, BK-01, FO-01, EF-01, staff login)\n\n**Database:** `tenants`, `users`, `user_roles` tables\n\n**Acceptance Criteria:**\n1. RS256 JWT issued on login, validated on all protected routes\n2. Refresh token rotation works correctly\n3. RLS prevents cross-tenant data access\n4. Failed login lockout triggers after 5 attempts (15-min lock)\n5. Max 5 concurrent sessions per user enforced\n6. Admin can create users, assign/revoke roles\n7. Password reset flow works end-to-end via SendGrid\n\n**Effort:** 3 weeks\n\n---\n\n### SUB-02: Database Schema & Migrations\n\n**Objective:** PostgreSQL 16 database with complete schema per specification.md Section 3.\n\n**Scope:**\n- All 26+ tables from specification.md (tenants, users, user_roles, loan_products, applications, cases, case_phases, documents, extraction_results, financial_spreads, risk_items, follow_up_questions, borrower_responses, overrides, scoring_models, scoring_categories, scoring_factors, scoring_results, credit_memo_packets, review_decisions, audit_entries, notifications, integration_configs, workflow_configs, prequalification_checks, section_1071_demographics)\n- FNE tables: normalized_financials, normalization_mappings, normalization_audit, normalized_financial_overrides\n- Deal Health tables: deal_health_scores, deal_health_config\n- UUID v7 primary keys, TIMESTAMPTZ, soft deletes\n- RLS policies on all tenant-scoped tables\n- Seed data: default tenant (Siura Capital), admin user, default scoring model, default workflow config\n\n**Dependencies:** None (parallel with SUB-01)\n\n**Effort:** 2 weeks\n\n---\n\n### SUB-03: Pre-Qualification Pipeline\n\n**Objective:** Implement the 4-gate pre-qualification funnel (credit check → KYC → background → Deal Health gate).\n\n**Scope:**\n- Credit bureau integration (soft pull API, configurable provider)\n- KYC identity verification integration (provider webhook callbacks)\n- Background check integration (async results via webhook)\n- Pre-qualification data model (`prequalification_checks` table)\n- Pre-qualification API endpoints (7 endpoints per spec Section 4.14)\n- Gate threshold configuration (AD-04)\n- Manual entry fallback for credit score\n- B-01 Easy Apply form, B-02 confirmation, B-03 holding message, B-04 KYC screen, B-05 KYC confirmation\n- IA-02 background review screen (Intake Agent)\n\n**Dependencies:** SUB-01 (Auth), SUB-02 (Database)\n\n**Effort:** 3 weeks\n\n---\n\n### SUB-04: Borrower Portal\n\n**Objective:** Complete borrower-facing experience (B-06 through B-17, excluding POST-MVP screens).\n\n**Scope:**\n- B-07 Borrower Dashboard (5 state variations)\n- B-08 Preliminary Term Sheet\n- B-09 Conversational Document Collection (chat-style guided upload)\n- B-10 Final Term Sheet & Closing Review\n- B-11 E-Signature (DocuSign embed)\n- B-12 Post-Closing Dashboard\n- B-13 Education Portal (MVP-LITE: curated links only)\n- B-15 Messaging Interface\n- B-16 Profile & Settings\n- B-17 Broker-Referred Welcome\n- Borrower API endpoints (spec Section 4.2)\n- Section 1071 demographic collection (separate screen, firewall from credit decision)\n\n**Dependencies:** SUB-01 (Auth), SUB-03 (Pre-qualification for onboarding flow)\n\n**Effort:** 4 weeks\n\n---\n\n### SUB-05: Broker Portal\n\n**Objective:** Broker-facing submission and tracking portal (BK-01 through BK-07).\n\n**Scope:**\n- BK-01 Login (orange/amber theme)\n- BK-02 Dashboard (deals table, stats bar)\n- BK-03 New Submission (packet upload + auto credit check trigger)\n- BK-04 Packet Incomplete (missing items)\n- BK-05 Deal Detail View (status timeline)\n- BK-06 Notification Center\n- BK-07 Profile & Settings\n\n**Dependencies:** SUB-01 (Auth), SUB-03 (Pre-qualification triggers)\n\n**Effort:** 2 weeks\n\n---\n\n### SUB-06: Intake Agent Portal\n\n**Objective:** Intake Agent review queue and decision screens (IA-01 through IA-04).\n\n**Scope:**\n- IA-01 Review Queue Dashboard\n- IA-02 Deal Review Screen (background check results + AI business intelligence + approve/reject)\n- IA-03 Completed Reviews History\n- IA-04 Settings\n\n**Dependencies:** SUB-01 (Auth), SUB-03 (Background check results feed into IA-02)\n\n**Effort:** 2 weeks\n\n---\n\n### SUB-07: Document Management & Storage\n\n**Objective:** Document upload, storage, virus scanning, and metadata tracking.\n\n**Scope:**\n- File upload API (multipart/form-data, max 50MB)\n- Azure Blob Storage (Azurite for dev) with server-side AES-256 encryption\n- Pre-signed URLs for upload and download (5-min / 24-hr expiry)\n- Virus scanning via ClamAV (Azure Function or container)\n- Document metadata tracking (`documents` table per spec Section 3.8)\n- Document type classification (17 types defined in spec)\n- Document checklist management (AD-05 drives required docs per product)\n- Document supersession tracking\n\n**Dependencies:** SUB-01 (Auth), SUB-02 (Database)\n\n**Effort:** 2 weeks\n\n---\n\n### SUB-08: AI/ML Pipeline: OCR, Classification & Extraction\n\n**Objective:** Python/FastAPI microservice for document processing pipeline.\n\n**Scope:**\n- OCR service (Azure Document Intelligence for complex layouts, PyPDF2/pdfplumber for text PDFs)\n- Document classification (DistilBERT fine-tuned classifier)\n- Financial data extraction (LLM with document-type-specific prompts)\n- Per-field confidence scoring (OCR clarity + cross-field consistency)\n- Bounding box coordinate capture for source highlighting\n- Async job processing via BullMQ\n- 5-step pipeline: Virus Scan → OCR → Classification → Extraction → Validation\n- `extraction_results` table population (spec Section 3.9)\n\n**Dependencies:** SUB-07 (Document storage provides files to process)\n\n**Effort:** 4 weeks (highest technical complexity)\n\n---\n\n### SUB-09: Financial Normalization Engine (FNE)\n\n**Objective:** Rule-based engine normalizing extracted financial data from 6 entity types into standardized output buckets.\n\n**Scope:** Full specification in `fne-specification.md`:\n- 6 entity types: Sole Prop, LLC, S-Corp, C-Corp, Partnership, Nonprofit\n- 9 document sources with line-by-line tax form mappings\n- 3 output statement types: Income Statement (20+ buckets), Balance Sheet (21 buckets), Cash Flow (5 buckets)\n- 10 cross-validation rules (XV-001 through XV-010)\n- 15-level confidence scoring hierarchy\n- Normalization API endpoints (spec Section 4.12)\n- `normalized_financials`, `normalization_mappings`, `normalization_audit`, `normalized_financial_overrides` tables\n\n**Dependencies:** SUB-08 (Extraction results feed into normalization)\n\n**Effort:** 3 weeks\n\n---\n\n### SUB-10: Financial Analysis Engine\n\n**Objective:** Compute 9 financial analyses from normalized data.\n\n**Scope:**\n- 9 sub-analyses: Business Cash Flow, Personal D/I, Global Cash Flow, Balance Sheet, Income Statement, Operating Cycle, Ratio Analysis, Collateral Coverage, Business Debt Schedule\n- Reads from `normalized_financials` (FNE output), not raw extractions\n- Multi-period trend analysis (YoY, QoQ)\n- Benchmark comparisons\n- `financial_spreads` table population (spec Section 3.10)\n- Financial Analysis API endpoints (spec Section 4.5)\n\n**Dependencies:** SUB-09 (FNE must normalize data before analysis)\n\n**Effort:** 3 weeks\n\n---\n\n### SUB-11: Risk Assessment Engine\n\n**Objective:** Rule-based and AI-augmented risk identification with narrative generation.\n\n**Scope:**\n- Rule-based risk identification (DSCR below minimum, declining revenue, etc.)\n- AI-augmented risk identification (LLM review for non-obvious risks)\n- Risk severity scoring (5 levels)\n- Risk narrative generation (AI-synthesized cohesive narrative)\n- Policy exception tracking\n- `risk_items` table population (spec Section 3.11)\n- Risk API endpoints (spec Section 4.6)\n\n**Dependencies:** SUB-10 (Financial analysis provides data for risk identification)\n\n**Effort:** 2 weeks\n\n---\n\n### SUB-12: Deal Health Score Engine\n\n**Objective:** Progressive composite scoring with configurable weights and ranges.\n\n**Scope:** Full specification in `deal-health-specification.md`:\n- 11 weighted factors with configurable weights and ranges\n- Progressive scoring (re-normalizes as data arrives)\n- 4 zones: Healthy (70-100), Watch (50-69), At Risk (30-49), Critical (0-29)\n- Auto-exit threshold (suggestion only per Human Decision Mandate)\n- Score history tracking for timeline visualization\n- Admin configuration UI support (AD-03)\n- Deal Health API endpoints (spec Section 4.13)\n- `deal_health_scores`, `deal_health_config` tables\n\n**Dependencies:** SUB-03 (pre-qual data for initial factors), SUB-10 (financial data for remaining factors)\n\n**Effort:** 2 weeks\n\n---\n\n### SUB-13: Workflow Engine (13-Phase)\n\n**Objective:** Case-centric 13-phase state machine with SLA management.\n\n**Scope:**\n- 13-phase linear workflow with controlled return paths (spec Section 8.1)\n- Entry/exit conditions per phase (spec Section 8.2)\n- SLA timer management with warnings at 80% and breach notifications (spec Section 8.3)\n- Auto-advance rules for automated phases (spec Section 8.4)\n- Case creation from approved application\n- Underwriter auto-assignment (workload balancing)\n- Notification triggers on phase transitions\n- `cases`, `case_phases` tables (spec Sections 3.6, 3.7)\n- Case API endpoints (spec Section 4.3)\n\n**Dependencies:** SUB-01 (Auth), SUB-02 (Database)\n\n**Effort:** 3 weeks\n\n---\n\n### SUB-14: Underwriter Portal\n\n**Objective:** Full underwriter workspace (UW-01 through UW-10).\n\n**Scope:**\n- UW-01 Dashboard (active cases, escalations, deal health gauges)\n- UW-02 Deal Detail with real-time activity feed\n- UW-03 Financial Analysis Workspace (4-tab: spreading, ratios, trends, manual)\n- UW-04 Manual Analysis Input Forms\n- UW-05/06 Escalation create and response\n- UW-07 Credit Memo Review (two-column with three-layer commentary)\n- UW-08 Route Borrower Questions\n- UW-09 Virtual Workpapers Viewer\n- UW-10 Case History\n- Override management (extraction, spread, risk, score overrides with mandatory rationale)\n- Follow-up question generation (AI) and manual creation\n- Narrative conversion engine (borrower response → third-person narrative)\n\n**Dependencies:** SUB-10, SUB-11, SUB-12, SUB-13\n\n**Effort:** 4 weeks\n\n---\n\n### SUB-15: Scoring Engine & Credit Memo Assembly\n\n**Objective:** Configurable scoring engine and 17-section credit memo generation.\n\n**Scope:**\n- Scoring engine: model → categories → factors with weighted evaluation\n- Factor evaluation rules (range lookup, boolean, custom formula)\n- Data completeness check (< 70% → insufficient_data)\n- Underwriter confirmation requirement\n- 17-section credit memo assembly via LLM\n- TipTap WYSIWYG memo editor with 3-second auto-save\n- PDF and Word export (via Puppeteer)\n- Packet quality check (all sections present, figures consistent)\n- `scoring_models`, `scoring_categories`, `scoring_factors`, `scoring_results`, `credit_memo_packets` tables\n- Scoring API (spec Section 4.8), Packet API (spec Section 4.9)\n\n**Dependencies:** SUB-11 (risk data for memo), SUB-14 (underwriter UI triggers scoring)\n\n**Effort:** 4 weeks\n\n---\n\n### SUB-16: Credit Manager Portal & Review\n\n**Objective:** Credit Manager review workflow and decision recording (CM-01 through CM-06).\n\n**Scope:**\n- CM-01 Manager Dashboard (metrics, team workload, pipeline funnel)\n- CM-02 Case Assignment Interface (with AI-suggested assignment)\n- CM-03 Escalation Review & Response\n- CM-04 Final Review Screen (read-only case + decision panel)\n- CM-05 All Deals View (advanced filters)\n- CM-06 Team Performance\n- Review decision recording (approve / approve with conditions / return / decline)\n- Human Decision Mandate enforcement (all decisions require explicit CM action)\n- Review API endpoints (spec Section 4.10)\n- `review_decisions` table (spec Section 3.20)\n\n**Dependencies:** SUB-14 (underwriter workflow feeds cases to review), SUB-15 (completed packets)\n\n**Effort:** 3 weeks\n\n---\n\n### SUB-17: Admin Portal & Configuration\n\n**Objective:** Full admin configuration and management portal (AD-01 through AD-14).\n\n**Scope:**\n- AD-01 Dashboard (system health, pipeline funnel, KPIs)\n- AD-02 Loan Product Configuration\n- AD-03 Scoring Configuration (Deal Health weights + ranges, custom scoring models)\n- AD-04 Workflow & Approval Gate Configuration (pre-qual thresholds, phase rules)\n- AD-05 Document Checklist Configuration\n- AD-06 Notification Template Management\n- AD-07 User & Role Management\n- AD-08 Integration Management (credit bureau, KYC, CLEAR, Plaid, etc.)\n- AD-09 System Parameters Configuration\n- AD-10 Credit Memo Template Configuration\n- AD-11 CDFI Reporting (TLR, Impact Metrics, Section 1071 — all enabled for Siura)\n- AD-12 Fair Lending Analytics (approval rates by demographic, pricing analysis, drift detection)\n- AD-13 Audit Trail & System Logs\n- AD-14 Admin Settings (branding, security policies, retention)\n- Admin API endpoints (spec Section 4.11)\n\n**Dependencies:** SUB-01 (Auth), SUB-12 (Deal Health config), SUB-13 (Workflow config)\n\n**Effort:** 4 weeks\n\n---\n\n### SUB-18: Integrations, Reporting & Audit\n\n**Objective:** External integrations, notification system, and comprehensive audit trail.\n\n**Scope:**\n- Salesforce integration: OAuth 2.0, inbound referral webhooks, outbound status sync\n- LOS integration: sidecar API push with PDF/Word attachments\n- Email service: SendGrid (primary) / SES (fallback), 15+ templates\n- Notification system: in-app + email with delivery tracking\n- Audit trail: append-only `audit_entries` table with monthly partitioning\n- 6 audit categories: data changes, user actions, phase transitions, AI events, overrides, integrations\n- Audit log querying, filtering, and CSV export\n- Notification & Webhook API endpoints (spec Section 4.15)\n\n**Dependencies:** SUB-13 (Workflow events trigger integrations), SUB-15 (Packet export for LOS push)\n\n---\n\n## 2. Implementation Roadmap\n\n> **Updated to align with 18 sub-projects per specification.md.**\n\n### Timeline Overview\n\n```\nPhase A: Foundation (Weeks 1-5)\n  Week 1-2: SUB-01 (Auth + Multi-Tenant) + SUB-02 (Database) — parallel\n  Week 3-5: SUB-03 (Pre-Qualification Pipeline) + SUB-13 (Workflow Engine) — parallel\n\nPhase B: Portals & Document Processing (Weeks 6-13)\n  Week 6-9:  SUB-04 (Borrower Portal) + SUB-07 (Document Mgmt) — parallel\n  Week 8-9:  SUB-05 (Broker Portal) + SUB-06 (Intake Agent Portal) — parallel\n  Week 10-13: SUB-08 (AI/ML Pipeline: OCR + Extraction)\n\nPhase C: Financial Engines (Weeks 14-21)\n  Week 14-16: SUB-09 (FNE)\n  Week 17-19: SUB-10 (Financial Analysis Engine)\n  Week 20-21: SUB-11 (Risk Assessment) + SUB-12 (Deal Health Score) — parallel\n\nPhase D: Underwriting Workflow (Weeks 22-32)\n  Week 22-25: SUB-14 (Underwriter Portal)\n  Week 26-29: SUB-15 (Scoring Engine + Credit Memo)\n  Week 30-32: SUB-16 (Credit Manager Portal)\n\nPhase E: Admin & Integration (Weeks 28-35)\n  Week 28-31: SUB-17 (Admin Portal) — overlaps with Phase D\n  Week 32-34: SUB-18 (Integrations, Reporting & Audit)\n\nPhase F: Integration Testing & Launch (Weeks 35-40)\n  Week 35-37: End-to-end testing across all portals\n  Week 38-39: Bug fixes, performance optimization, security audit\n  Week 40:    Staging deployment + pilot onboarding (Siura Capital)\n```\n\n### Critical Path\n\n```\nSUB-02 (Schema) ─┐\n                  ├─> SUB-03 (Pre-Qual) ─┐\nSUB-01 (Auth)  ───┘                      ├─> SUB-07 (Docs) ─> SUB-08 (AI/ML)\n                                         │     ─> SUB-09 (FNE) ─> SUB-10 (Analysis)\n                                         │       ─> SUB-11 (Risk) ─> SUB-14 (UW Portal)\n                                         │         ─> SUB-15 (Scoring + Memo) ─> SUB-16 (CM Portal)\n                                         │\n                                         └─> SUB-12 (Deal Health) ─> SUB-14 (UW Portal)\n```\n\nLongest path: SUB-01/02 → SUB-03 → SUB-07 → SUB-08 → SUB-09 → SUB-10 → SUB-11 → SUB-14 → SUB-15 → SUB-16 (~32 weeks sequential)\n\n### Parallel Work Streams\n\n**Stream A (Backend — NestJS Core):**\n- Weeks 1-5: SUB-01 (Auth), SUB-02 (Schema), SUB-13 (Workflow)\n- Weeks 6-9: SUB-03 (Pre-Qual), SUB-07 (Documents)\n- Weeks 14-21: SUB-09 (FNE), SUB-10 (Financial Analysis)\n- Weeks 22-29: SUB-15 (Scoring + Memo), SUB-18 (Integrations)\n\n**Stream B (Backend — Python AI/ML):**\n- Weeks 1-5: ML pipeline scaffold, model training (classification)\n- Weeks 10-13: SUB-08 (OCR + Extraction pipeline)\n- Weeks 14-21: SUB-11 (Risk Assessment — AI components), SUB-12 (Deal Health)\n- Weeks 22-29: AI narrative generation, question generation, memo assembly\n\n**Stream C (Frontend):**\n- Weeks 1-5: Design system, component library, login UIs\n- Weeks 6-13: SUB-04 (Borrower Portal), SUB-05 (Broker), SUB-06 (Intake Agent)\n- Weeks 14-25: SUB-14 (Underwriter Portal), SUB-15 (Memo Editor)\n- Weeks 26-34: SUB-16 (CM Portal), SUB-17 (Admin Portal)\n\n---\n\n## 3. Environment Setup\n\n### Prerequisites\n\n- Node.js 20+ (LTS)\n- PostgreSQL 16+\n- Redis 7+\n- Python 3.11+ (for AI/ML pipeline)\n- Git\n- Docker & Docker Compose\n- VS Code or similar IDE\n\n### Initial Setup\n\n```bash\n# 1. Clone repository\ngit clone https://github.com/your-org/cremologix.git\ncd cremologix\n\n# 2. Install dependencies\ncd backend && npm install\ncd ../frontend && npm install\n\n# 3. Set up environment variables\ncp backend/.env.example backend/.env\ncp frontend/.env.example frontend/.env\n\n# 4. Start database (Docker)\ndocker-compose up -d postgres redis\n\n# 5. Run migrations\ncd backend && npm run migrate\n\n# 6. Seed database\nnpm run seed\n\n# 7. Start development servers\n# Terminal 1: cd backend && npm run dev\n# Terminal 2: cd frontend && npm run dev\n# Access: http://localhost:3000\n```\n\n### Project Structure\n\n```\ncremologix/\n  api/                        # NestJS Core API\n    src/\n      modules/\n        auth/                 # Auth module (JWT, RBAC)\n        users/                # User management\n        tenants/              # Multi-tenant config\n        cases/                # Case management + workflow\n        applications/         # Application intake\n        documents/            # Document management\n        financial/            # Analysis + FNE + normalization\n        scoring/              # Scoring engine + Deal Health\n        risk/                 # Risk assessment\n        memo/                 # Credit memo assembly\n        review/               # Credit Manager review\n        admin/                # Admin configuration\n        notifications/        # Notification service\n        integrations/         # Salesforce, LOS, email\n        audit/                # Audit trail\n        prequalification/     # Pre-qual pipeline\n      common/\n        guards/               # Auth + RBAC guards\n        interceptors/         # Audit, tenant context\n        pipes/                # Validation (Zod)\n        decorators/           # Custom decorators\n      main.ts                 # Entry point\n    migrations/               # Database migrations\n    seeds/                    # Seed data\n    test/\n    package.json\n    tsconfig.json\n  ml/                         # Python AI/ML Pipeline\n    app/\n      routers/                # FastAPI routes\n      services/\n        ocr/                  # OCR service\n        classification/       # Document classification\n        extraction/           # Financial data extraction\n        risk_narrative/       # AI risk narratives\n        question_gen/         # Follow-up question generation\n        narrative_convert/    # Borrower response → narrative\n        memo_assembly/        # 17-section memo generation\n      models/                 # ML models (classification)\n      prompts/                # LLM prompt templates (versioned)\n    main.py                   # FastAPI entry point\n    requirements.txt\n    Dockerfile\n  web/                        # React 18 Frontend\n    src/\n      portals/\n        borrower/             # B-01 through B-17\n        broker/               # BK-01 through BK-07\n        intake-agent/         # IA-01 through IA-04\n        underwriter/          # UW-01 through UW-10\n        credit-manager/       # CM-01 through CM-06\n        admin/                # AD-01 through AD-14\n      components/             # Shared components\n      hooks/                  # Custom hooks\n      services/               # API clients\n      contexts/               # React contexts\n      App.tsx\n    public/\n    package.json\n    tsconfig.json\n  infra/                      # Terraform IaC\n  docker-compose.yml\n  .github/\n    workflows/                # CI/CD pipelines\n  README.md\n```\n\n---\n\n## 4. Development Best Practices\n\n### Code Standards\n\n**TypeScript (strict mode):**\n```typescript\n\"strict\": true,\n\"noImplicitAny\": true,\n\"strictNullChecks\": true\n```\n- Prefer interfaces over types\n- Use async/await over raw promises\n\n**Error Handling:**\n- Custom error classes (ValidationError, etc.)\n- Centralized error handler middleware\n- Standard error response format\n\n**API Response Format:**\n```json\n// Success\n{ \"success\": true, \"data\": { ... }, \"meta\": { \"timestamp\": \"...\", \"request_id\": \"...\" } }\n\n// Error\n{ \"success\": false, \"error\": { \"code\": \"...\", \"message\": \"...\", \"details\": {...} }, \"meta\": { ... } }\n```\n\n### Git Workflow\n\n**Branching Strategy (Git Flow):**\n```\nmain              (production-ready code)\n  -> develop       (integration branch)\n     -> feature/*  (new features)\n     -> fix/*      (bug fixes)\n     -> release/*  (release candidates)\n```\n\n**Commit Messages:**\n```\nfeat(auth): add password reset flow\nfix(documents): handle large file uploads\ndocs(api): update authentication endpoints\ntest(analysis): add unit tests for DSCR calculation\nrefactor(workflow): simplify stage transition logic\n```\n\n**Pull Request Process:**\n1. Create feature branch from `develop`\n2. Make changes and commit\n3. Push to origin, create PR\n4. Request review from team\n5. Address review comments\n6. Merge after approval (squash commits)\n\n### Testing Requirements\n\n**Minimum Coverage:**\n- Unit tests: 70% coverage\n- Integration tests: Critical paths covered\n- E2E tests: Happy path for each user role\n\n---\n\n## 5. Deployment Strategy\n\n### Environments\n\n| Environment | Purpose | Deployment |\n|---|---|---|\n| Development | Local machine (Docker Compose), hot reload, verbose logging, test data | Manual |\n| Staging | Azure (mirrors production), real third-party services (sandbox mode) | Auto from `develop` branch |\n| Production | Azure (production config), real services, monitoring enabled | Manual from `main` branch |\n\n### CI/CD Pipeline (GitHub Actions)\n\n```yaml\nname: CI/CD\non:\n  pull_request:\n    branches: [develop, main]\n  push:\n    branches: [develop, main]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - Install dependencies (npm ci)\n      - Run linter (npm run lint)\n      - Run tests with coverage (npm run test:coverage)\n      - Upload coverage (codecov)\n\n  deploy-staging:\n    needs: test\n    if: github.ref == 'refs/heads/develop'\n    # Deploy to staging environment\n\n  deploy-production:\n    needs: test\n    if: github.ref == 'refs/heads/main'\n    # Deploy to production environment\n```\n\n### Production Deployment Checklist\n\n**Pre-Deployment:**\n- [ ] All tests passing\n- [ ] Code reviewed and approved\n- [ ] Database migrations tested in staging\n- [ ] Third-party API keys configured\n- [ ] Environment variables set\n- [ ] SSL certificates valid\n- [ ] Monitoring configured\n- [ ] Backup strategy in place\n\n**Deployment:**\n- [ ] Run database migrations\n- [ ] Deploy backend\n- [ ] Deploy frontend\n- [ ] Verify health checks\n- [ ] Run smoke tests\n- [ ] Monitor error rates\n\n**Post-Deployment:**\n- [ ] Verify all services running\n- [ ] Test critical user flows\n- [ ] Monitor logs for errors\n- [ ] Check performance metrics\n- [ ] Notify team of deployment\n\n---\n\n## 6. Monitoring & Operations\n\n### Application Performance Monitoring (Application Insights)\n- Response times (p50, p95, p99)\n- Error rates\n- Request volume\n- Database query performance\n\n### Error Tracking (Application Insights)\n- Unhandled exceptions\n- Failed API requests\n- Frontend errors\n- Error grouping and trends\n\n### Logging (Azure Log Analytics)\n- Application logs (info, warn, error)\n- Audit trail\n- Security events\n- API request/response logs\n\n### Alert Thresholds\n- Error rate >1% for 5 minutes\n- Response time >500ms for 10 minutes\n- Database connection failures\n- Third-party API failures\n\n### Health Check Endpoint\n```typescript\nGET /health\nResponse:\n{\n  \"status\": \"healthy\",\n  \"checks\": {\n    \"database\": \"healthy\",\n    \"redis\": \"healthy\",\n    \"s3\": \"healthy\"\n  },\n  \"version\": \"1.0.0\",\n  \"uptime\": 86400\n}\n```\n\n### Backup Strategy\n\n**Database:**\n- Automated daily backups (Azure PostgreSQL Flexible Server)\n- 30-day retention\n- Weekly full backups stored in separate region\n- Monthly backups archived for 1 year\n\n**File Storage:**\n- Blob Storage versioning enabled\n- GRS (Geo-Redundant Storage) replication\n- Lifecycle policy: Cool tier after 90 days, Archive tier after 1 year\n\n**Disaster Recovery:**\n- RTO (Recovery Time Objective): 4 hours\n- RPO (Recovery Point Objective): 24 hours\n- Regular disaster recovery drills (quarterly)\n\n---\n\n## 7. Security Checklist\n\n### Authentication & Authorization\n- [x] JWT tokens with 24-hour expiry\n- [x] Passwords hashed with bcrypt (cost factor 10)\n- [x] Role-based access control\n- [ ] Multi-factor authentication (future)\n- [x] Session management and logout\n\n### Data Protection\n- [x] HTTPS/TLS 1.3 in production\n- [x] Database encryption at rest\n- [x] Sensitive data in environment variables\n- [x] API keys rotated quarterly\n- [ ] Field-level encryption for SSN/EIN (future)\n\n### API Security\n- [x] Rate limiting (100 req/min per user)\n- [x] Input validation (Zod schemas)\n- [x] SQL injection prevention (ORM)\n- [x] XSS prevention (Content Security Policy)\n- [x] CSRF protection\n\n### File Security\n- [x] File type validation\n- [x] File size limits (25MB)\n- [ ] Virus scanning (future: ClamAV)\n- [x] Pre-signed URLs (24-hour expiry)\n\n### Audit & Compliance\n- [x] Complete audit trail\n- [x] Immutable audit log (append-only)\n- [x] Access logging\n- [x] GDPR compliance (data export, deletion)\n\n### Security Scanning\n- **Dependency Scanning:** npm audit\n- **Code Scanning:** GitHub Advanced Security (SAST), SonarQube, ESLint security rules\n- **Penetration Testing:** Schedule before launch, annual pen tests thereafter\n\n---\n\n## 8. Performance Optimization\n\n### Backend\n- Index all foreign keys and frequently queried fields\n- Connection pooling (max 20 connections)\n- Optimize N+1 queries (use eager loading)\n- Cache frequently accessed data (Redis, 1-hour TTL)\n- Response compression (gzip)\n- Pagination for large lists (limit 50 items per page)\n\n### Frontend\n- Code splitting / lazy loading routes\n- Image optimization (WebP, compress before sending)\n- Target: <500KB initial bundle\n- Tree-shake unused code, production builds\n\n---\n\n## 9. Risk Management\n\n### Technical Risks\n\n| Risk | Probability | Impact | Mitigation |\n|------|-------------|--------|------------|\n| AI extraction accuracy low | Medium | High | Human review required, fallback to manual entry |\n| Third-party API downtime | Low | Medium | Retry logic, fallback providers |\n| Performance issues at scale | Medium | High | Load testing, horizontal scaling, caching |\n| Security breach | Low | Critical | Pen testing, security audits, monitoring |\n| Database corruption | Low | Critical | Automated backups, replication, disaster recovery |\n\n### Project Risks\n\n| Risk | Probability | Impact | Mitigation |\n|------|-------------|--------|------------|\n| Scope creep | High | Medium | Strict MVP definition, change control process |\n| Key developer leaving | Medium | High | Knowledge sharing, documentation, backup roles |\n| Third-party integration delays | Medium | Medium | Start integrations early, have alternatives |\n| Regulatory changes | Low | High | Legal review, compliance monitoring |\n| Budget overrun | Medium | Medium | Track spending, prioritize ruthlessly |\n\n---\n\n## 10. Post-MVP Roadmap\n\n### Phase 2: Multi-Tenant (Months 10-14)\n- Tenant isolation and data partitioning\n- Admin configuration portal per tenant\n- Custom covenant rules per tenant\n- Workflow customization per tenant\n- White-labeling support\n\n### Phase 3: Advanced Features (Months 15-20)\n- Cash flow projections and sensitivity analysis\n- ML-based anomaly detection\n- Collaborative editing for credit memos\n- Pre-built LOS connectors (nCino, Salesforce)\n- Analytics and reporting dashboard\n- Mobile-responsive UI\n\n### Phase 4: Enterprise & Scale (Months 21-24)\n- SOC 2 Type II certification\n- Advanced RBAC with ABAC\n- Disaster recovery and backup\n- API marketplace and developer portal\n- Professional services toolkit\n- Support for 50+ tenants\n\n---\n\n## 11. Success Metrics & KPIs\n\n### Development Metrics\n- **Velocity:** Story points per sprint, cycle time\n- **Quality:** Test coverage (>70%), bug escape rate, time to fix\n- **Performance:** API response time (<500ms p95), frontend load time (<2s), uptime (99.9%)\n\n### Business Metrics (Post-Launch)\n- **Adoption:** CDFIs onboarded, active users/week, applications processed/month\n- **Efficiency:** Underwriting cycle time (target: 2-3 days from 5-7), applications per underwriter (target: 2x improvement)\n- **Quality:** AI extraction accuracy (>95%), memo revisions per application (<2), user satisfaction (NPS >40)\n\n---\n\n*End of Technology Document*\n";
  document.getElementById('content').innerHTML = marked.parse(md);
</script>
</body>
</html>