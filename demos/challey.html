<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Challey - Family Chore Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Default theme: Ocean */
            --primary: #1B2A4A;
            --secondary: #2E86AB;
            --accent: #F18F01;
            --bg-light: #E8F4F8;
            --bg-card: #FFFFFF;
            --text: #1B2A4A;
            --text-secondary: #666666;
            --border: #ddd;
        }

        :root[data-theme="sunset"] {
            --primary: #2D1B69;
            --secondary: #FF6B35;
            --accent: #FFD700;
        }

        :root[data-theme="forest"] {
            --primary: #1B3A2D;
            --secondary: #4A8C6F;
            --accent: #F5A623;
        }

        :root[data-theme="midnight"] {
            --primary: #0D1117;
            --secondary: #58A6FF;
            --accent: #39D353;
        }

        :root[data-theme="bubblegum"] {
            --primary: #8B1A4A;
            --secondary: #FF69B4;
            --accent: #FFE066;
        }

        :root[data-theme="arctic"] {
            --primary: #2C3E50;
            --secondary: #74B9FF;
            --accent: #FFFFFF;
        }

        :root[data-dark="true"] {
            --bg-light: #1a1d23;
            --bg-card: #1E2A3A;
            --text: #E8F4F8;
            --text-secondary: #a0a0a0;
            --border: #333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .phone-frame {
            width: 375px;
            height: 812px;
            background: var(--bg-card);
            border-radius: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
            border: 12px solid var(--primary);
            transition: all 0.3s;
        }

        .notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 28px;
            background: var(--primary);
            border-radius: 0 0 20px 20px;
            z-index: 1000;
        }

        .screen {
            display: none;
            height: 100%;
            overflow-y: auto;
            background: var(--bg-light);
            transition: all 0.3s;
        }

        .screen.active {
            display: flex;
            flex-direction: column;
        }

        .header {
            background: var(--primary);
            color: white;
            padding: 36px 20px 16px;
            position: relative;
        }

        .header-top-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            min-height: 28px;
        }

        .header-top-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .header-top-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-title-row {
            margin-bottom: 4px;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.8;
        }

        .role-switcher {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .role-switcher:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .back-btn {
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .back-btn:hover {
            transform: translateX(-3px);
        }

        .content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .bottom-nav {
            display: flex;
            background: var(--bg-card);
            border-top: 1px solid var(--border);
            padding: 10px 0;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-item i {
            font-size: 20px;
            color: var(--text-secondary);
            display: block;
            margin-bottom: 4px;
        }

        .nav-item span {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .nav-item.active i,
        .nav-item.active span {
            color: var(--secondary);
        }

        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.3s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
        }

        .points-badge {
            background: var(--secondary);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
        }

        .card-meta {
            display: flex;
            gap: 12px;
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        .card-meta i {
            margin-right: 4px;
        }

        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            transform: scale(1.02);
            filter: brightness(0.9);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            filter: brightness(0.9);
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            background: var(--bg-card);
            padding: 8px;
            border-radius: 12px;
        }

        .tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.3s;
        }

        .tab.active {
            background: var(--secondary);
            color: white;
        }

        .splash {
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            text-align: center;
            padding: 40px;
        }

        .splash-logo {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .splash h1 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .splash p {
            font-size: 18px;
            opacity: 0.9;
            margin-bottom: 60px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 8px;
        }

        .input-group input,
        .input-group textarea,
        .input-group select {
            width: 100%;
            padding: 14px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s;
            background: var(--bg-card);
            color: var(--text);
        }

        .input-group input:focus,
        .input-group textarea:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--secondary);
        }

        .stat-card {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            color: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .mini-stat {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
        }

        .mini-stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--secondary);
            margin-bottom: 4px;
        }

        .mini-stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .photo-upload {
            border: 2px dashed var(--secondary);
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .photo-upload:hover {
            background: rgba(46, 134, 171, 0.05);
        }

        .photo-upload i {
            font-size: 48px;
            color: var(--secondary);
            margin-bottom: 12px;
        }

        .photo-uploaded {
            background: var(--bg-light);
            border: 2px solid var(--secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
        }

        .photo-uploaded img {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .activity-item {
            display: flex;
            gap: 12px;
            padding: 16px;
            background: var(--bg-card);
            border-radius: 12px;
            margin-bottom: 12px;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .activity-icon.new {
            background: #A8D5E2;
            color: var(--primary);
        }

        .activity-icon.completed {
            background: #d4edda;
            color: #28a745;
        }

        .activity-icon.reward {
            background: #fff3cd;
            color: var(--accent);
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 4px;
        }

        .activity-time {
            font-size: 12px;
            color: #999;
        }

        .reward-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .reward-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        }

        .reward-icon {
            font-size: 40px;
            margin-bottom: 12px;
        }

        .reward-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 8px;
        }

        .reward-cost {
            font-size: 20px;
            font-weight: 700;
            color: var(--accent);
        }

        .reward-nudge {
            font-size: 13px;
            color: var(--accent);
            margin-top: 8px;
            font-weight: 600;
        }

        .reward-affordable {
            background: var(--accent);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-top: 8px;
            animation: glow 2s ease-in-out infinite;
        }

        /* Reward Cart System */
        .reward-card-actions {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }

        .reward-add-btn {
            padding: 8px 20px;
            border: none;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .reward-add-btn.can-add {
            background: var(--secondary);
            color: white;
        }

        .reward-add-btn.can-add:hover {
            filter: brightness(1.1);
            transform: scale(1.05);
        }

        .reward-add-btn.in-cart {
            background: #28a745;
            color: white;
        }

        .reward-add-btn.in-cart:hover {
            background: #dc3545;
        }

        .reward-add-btn.in-cart:hover .btn-label-add {
            display: none;
        }

        .reward-add-btn.in-cart:hover .btn-label-remove {
            display: inline;
        }

        .reward-add-btn .btn-label-remove {
            display: none;
        }

        .reward-add-btn.disabled {
            background: var(--border);
            color: var(--text-secondary);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .reward-cart-bar {
            position: sticky;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 14px 20px;
            display: none;
            align-items: center;
            justify-content: space-between;
            border-radius: 16px 16px 0 0;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.2);
            z-index: 100;
            animation: slideUp 0.3s ease-out;
        }

        .reward-cart-bar.visible {
            display: flex;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .cart-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .cart-count {
            font-size: 15px;
            font-weight: 700;
        }

        .cart-total {
            font-size: 12px;
            opacity: 0.9;
        }

        .cart-remaining {
            font-size: 11px;
            opacity: 0.7;
        }

        .cart-checkout-btn {
            padding: 10px 24px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .cart-checkout-btn:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px rgba(241, 143, 1, 0.5); }
            50% { box-shadow: 0 0 20px rgba(241, 143, 1, 0.8); }
        }

        .member-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: var(--bg-card);
            border-radius: 12px;
            margin-bottom: 12px;
        }

        .member-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            font-weight: 700;
            position: relative;
        }

        .avatar-camera {
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 18px;
            height: 18px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: white;
        }

        .member-info {
            flex: 1;
        }

        .member-name {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
        }

        .member-role {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-admin {
            background: var(--accent);
            color: white;
        }

        .badge-mvp {
            background: #28a745;
            color: white;
        }

        .badge-post-mvp {
            background: #6f42c1;
            color: white;
        }

        .scope-tag {
            font-size: 10px;
            padding: 4px 8px;
            border-radius: 8px;
            z-index: 10;
        }

        .notification-panel {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            display: none;
        }

        .notification-panel.active {
            display: block;
        }

        .notification-content {
            background: var(--bg-card);
            margin: 100px 20px;
            border-radius: 20px;
            padding: 20px;
            max-height: 600px;
            overflow-y: auto;
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .notification-header h2 {
            font-size: 20px;
            color: var(--text);
        }

        .close-btn {
            font-size: 24px;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .coming-soon-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(27, 42, 74, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            padding: 40px;
        }

        .coming-soon-overlay i {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.8;
        }

        .coming-soon-overlay h2 {
            font-size: 28px;
            margin-bottom: 12px;
        }

        .coming-soon-overlay p {
            font-size: 16px;
            opacity: 0.8;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-light);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary) 0%, var(--primary) 100%);
            transition: width 0.3s;
        }

        .kid-selector {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .kid-chip {
            padding: 8px 16px;
            border: 2px solid var(--secondary);
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--secondary);
        }

        .kid-chip.selected {
            background: var(--secondary);
            color: white;
        }

        .verification-photo {
            width: 100%;
            border-radius: 12px;
            margin-bottom: 16px;
        }

        .btn-group {
            display: flex;
            gap: 12px;
        }

        .btn-group .btn {
            flex: 1;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state i {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .empty-state p {
            font-size: 16px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .screen.active {
            animation: fadeIn 0.3s ease-out;
        }

        .dashboard-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 40px 20px 30px;
            border-radius: 0 0 24px 24px;
            margin-bottom: 20px;
        }

        .dashboard-header h1 {
            font-size: 28px;
            margin-bottom: 8px;
        }

        .dashboard-header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .quick-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 20px;
        }

        .quick-stat {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 16px 12px;
            text-align: center;
        }

        .quick-stat-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .quick-stat-label {
            font-size: 11px;
            opacity: 0.9;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text);
        }

        .section-action {
            font-size: 14px;
            color: var(--secondary);
            cursor: pointer;
            font-weight: 600;
        }

        .kid-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .kid-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .kid-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            font-weight: 700;
        }

        .kid-name {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
        }

        .kid-stats {
            display: flex;
            gap: 16px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .bell-icon {
            color: white;
            font-size: 20px;
            cursor: pointer;
            position: relative;
        }

        .gear-icon {
            color: white;
            font-size: 20px;
            cursor: pointer;
            opacity: 0.9;
            transition: all 0.3s;
        }

        .gear-icon:hover {
            opacity: 1;
            transform: rotate(45deg);
        }

        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        /* NEW: Streak Card */
        .streak-card {
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            color: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(255, 107, 53, 0.5);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 30px rgba(255, 107, 53, 0.8);
                transform: scale(1.02);
            }
        }

        .streak-card h3 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .streak-card p {
            font-size: 14px;
            opacity: 0.9;
        }

        /* NEW: Leaderboard */
        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: var(--bg-card);
            border-radius: 12px;
            margin-bottom: 12px;
        }

        .leaderboard-rank {
            font-size: 32px;
            width: 50px;
            text-align: center;
        }

        .leaderboard-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            font-weight: 700;
        }

        .leaderboard-info {
            flex: 1;
        }

        .leaderboard-name {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
        }

        .leaderboard-points {
            font-size: 20px;
            font-weight: 700;
            color: var(--secondary);
        }

        /* NEW: Emoji Reactions */
        .emoji-reactions {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .emoji-btn {
            font-size: 32px;
            padding: 12px;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .emoji-btn:hover {
            transform: scale(1.1);
            border-color: var(--secondary);
        }

        .emoji-btn.selected {
            border-color: var(--accent);
            background: var(--bg-light);
        }

        .reaction-display {
            display: flex;
            gap: 6px;
            margin-top: 8px;
        }

        .reaction-display span {
            font-size: 18px;
        }

        /* NEW: Theme Selector */
        .theme-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .theme-item {
            cursor: pointer;
            border-radius: 12px;
            padding: 12px;
            text-align: center;
            border: 3px solid transparent;
            transition: all 0.3s;
            background: var(--bg-card);
        }

        .theme-item:hover {
            border-color: var(--secondary);
        }

        .theme-item.active {
            border-color: var(--accent);
        }

        .theme-preview {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin: 0 auto 8px;
            position: relative;
        }

        .theme-preview::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 50%;
            border-radius: 50% 0 0 50%;
        }

        .theme-preview::after {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: 50%;
            border-radius: 0 50% 50% 0;
        }

        .theme-name {
            font-size: 12px;
            font-weight: 600;
            color: var(--text);
        }

        /* Theme colors */
        .theme-ocean .theme-preview::before { background: #1B2A4A; }
        .theme-ocean .theme-preview::after { background: #2E86AB; }

        .theme-sunset .theme-preview::before { background: #2D1B69; }
        .theme-sunset .theme-preview::after { background: #FF6B35; }

        .theme-forest .theme-preview::before { background: #1B3A2D; }
        .theme-forest .theme-preview::after { background: #4A8C6F; }

        .theme-midnight .theme-preview::before { background: #0D1117; }
        .theme-midnight .theme-preview::after { background: #58A6FF; }

        .theme-bubblegum .theme-preview::before { background: #8B1A4A; }
        .theme-bubblegum .theme-preview::after { background: #FF69B4; }

        .theme-arctic .theme-preview::before { background: #2C3E50; }
        .theme-arctic .theme-preview::after { background: #74B9FF; }

        /* NEW: Dark mode toggle */
        .toggle-switch {
            display: inline-block;
            width: 60px;
            height: 32px;
            background: var(--border);
            border-radius: 16px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle-switch.active {
            background: var(--secondary);
        }

        .toggle-switch .toggle-thumb {
            width: 28px;
            height: 28px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: all 0.3s;
        }

        .toggle-switch.active .toggle-thumb {
            left: 30px;
        }

        /* NEW: Confetti Container */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            animation: confetti-fall 3s linear forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .profile-pic-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
            font-weight: 700;
            margin: 0 auto 20px;
            position: relative;
        }

        .profile-pic-large .avatar-camera {
            width: 36px;
            height: 36px;
            font-size: 18px;
            bottom: 5px;
            right: 5px;
        }

        .closest-reward {
            background: var(--bg-card);
            border: 2px solid var(--accent);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            text-align: center;
        }

        .closest-reward h3 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 8px;
        }

        .closest-reward p {
            font-size: 20px;
            font-weight: 700;
            color: var(--accent);
        }
        /* Wishlist & Badges */
        .occasion-tag {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-right: 6px;
        }

        .occasion-birthday { background: #FFE0F0; color: #D63384; }
        .occasion-christmas { background: #D4EDDA; color: #155724; }
        .occasion-holiday { background: #FFF3CD; color: #856404; }
        .occasion-anytime { background: #D1ECF1; color: #0C5460; }

        .wishlist-item {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
        }

        .wishlist-status {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .wishlist-pending { background: #FFF3CD; color: #856404; }
        .wishlist-approved { background: #D4EDDA; color: #155724; }

        .badge-display {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 80px;
            margin-bottom: 12px;
        }

        .badge-icon {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin-bottom: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .badge-label {
            font-size: 10px;
            font-weight: 600;
            color: var(--text-secondary);
            line-height: 1.2;
        }

        .badges-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: flex-start;
        }

        .badge-selectable {
            cursor: pointer;
            transition: all 0.3s;
            opacity: 0.6;
            border: 2px solid transparent;
            border-radius: 16px;
            padding: 8px;
        }

        .badge-selectable:hover, .badge-selectable.selected {
            opacity: 1;
            border-color: var(--secondary);
            background: var(--bg-light);
        }

        .wishlist-link-banner {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
        }

        .wishlist-link-banner:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .shoutout-banner {
            background: linear-gradient(135deg, #FF69B4 0%, #E74C3C 50%, #FF6B35 100%);
            border-radius: 16px;
            padding: 16px;
            margin-top: 24px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
        }

        .shoutout-banner:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(255, 105, 180, 0.4);
        }

        .shoutout-sibling-card {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px;
            background: var(--bg-card);
            border-radius: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid var(--border);
        }

        .shoutout-sibling-card:hover {
            border-color: #FF69B4;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.15);
        }

        .shoutout-badge-option {
            cursor: pointer;
            transition: all 0.3s;
            opacity: 0.6;
            border: 3px solid transparent;
            border-radius: 16px;
            padding: 8px;
        }

        .shoutout-badge-option:hover, .shoutout-badge-option.selected {
            opacity: 1;
            border-color: #FF69B4;
            background: rgba(255, 105, 180, 0.08);
        }

        .shoutout-points-section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--border);
        }

        .shoutout-points-slider {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: var(--border);
            border-radius: 3px;
            outline: none;
            margin: 12px 0;
        }

        .shoutout-points-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #FF69B4;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(255, 105, 180, 0.4);
        }

        .shoutout-preview {
            background: linear-gradient(135deg, #FFF0F5 0%, #FFE4E1 100%);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px solid #FFB6C1;
        }

        .shoutout-received-card {
            background: linear-gradient(135deg, #FFF0F5 0%, #FFE8F0 100%);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 16px;
            border: 2px solid #FFB6C1;
            position: relative;
            overflow: hidden;
        }

        .shoutout-received-card::before {
            content: '';
            position: absolute;
            top: -30px;
            right: -30px;
            width: 100px;
            height: 100px;
            background: rgba(255, 105, 180, 0.1);
            border-radius: 50%;
        }

        .shoutout-from {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .shoutout-from-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF69B4, #E74C3C);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: 700;
        }

        .shoutout-note {
            font-size: 15px;
            color: var(--text);
            line-height: 1.6;
            font-style: italic;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 12px;
            margin: 12px 0;
        }

        .shoutout-badge-display {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: white;
            padding: 8px 16px;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(255, 105, 180, 0.2);
            margin: 8px 0;
        }

        .parent-shoutout-card {
            background: linear-gradient(135deg, #FFF0F5 0%, #FFE4E1 100%);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #FFB6C1;
        }

        .parent-shoutout-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.2);
        }

        .boost-section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid var(--border);
        }

        .activity-icon.kindness {
            background: #FFE4E1;
            color: #FF69B4;
        }

        .swap-summary {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .swap-arrow {
            text-align: center;
            padding: 12px 0;
            font-size: 24px;
            color: var(--secondary);
        }

        .swap-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
        }

        .swap-item-label {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .swap-item-name {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
        }

        .incentive-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--border);
        }

        .incentive-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .toggle-switch {
            width: 50px;
            height: 28px;
            background: var(--border);
            border-radius: 14px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle-switch.active {
            background: var(--secondary);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 22px;
            height: 22px;
            background: white;
            border-radius: 50%;
            top: 3px;
            left: 3px;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .toggle-switch.active::after {
            left: 25px;
        }

        .incentive-slider-section {
            display: none;
            margin-top: 16px;
        }

        .incentive-slider-section.visible {
            display: block;
        }

        .points-slider {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: var(--border);
            border-radius: 3px;
            outline: none;
            margin: 12px 0;
        }

        .points-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(241, 143, 1, 0.4);
        }

        .points-offer-display {
            text-align: center;
            margin: 12px 0;
        }

        .points-offer-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--accent);
        }

        .points-offer-label {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .success-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px;
            min-height: 100%;
            background: var(--bg-light);
        }

        .success-checkmark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #28a745;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: white;
            margin-bottom: 24px;
            animation: scaleIn 0.5s ease-out;
        }

        @keyframes scaleIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .success-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 12px;
        }

        .success-subtitle {
            font-size: 15px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .success-detail {
            font-size: 14px;
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 24px;
        }

        .incoming-swap-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            border: 2px solid var(--secondary);
        }

        .incoming-label {
            font-size: 13px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .incoming-chore {
            font-size: 18px;
            font-weight: 600;
            color: var(--text);
        }

        .incoming-points {
            font-size: 16px;
            font-weight: 700;
            color: var(--secondary);
            margin-top: 4px;
        }

        .bonus-badge {
            background: linear-gradient(135deg, var(--accent) 0%, #FF6B35 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-block;
            margin: 16px 0;
            animation: glow 2s ease-in-out infinite;
        }

        .btn-outline {
            background: transparent;
            color: var(--text-secondary);
            border: 2px solid var(--border);
        }

        .btn-outline:hover {
            background: var(--bg-light);
        }

        .decline-reason {
            margin-top: 16px;
            display: none;
        }

        .decline-reason.visible {
            display: block;
        }

        .sibling-select-card {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px;
            background: var(--bg-card);
            border-radius: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid var(--border);
        }

        .sibling-select-card:hover {
            border-color: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .sibling-info {
            flex: 1;
        }

        .sibling-name {
            font-size: 18px;
            font-weight: 600;
            color: var(--text);
        }

        .sibling-age {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 2px;
        }

        .sibling-chore-count {
            font-size: 13px;
            color: var(--secondary);
            font-weight: 600;
            margin-top: 4px;
        }

        /* ===== COMPANION: Chal the Octopus ===== */
        .companion {
            position: absolute;
            bottom: 80px;
            right: 12px;
            z-index: 1500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .companion.hidden {
            transform: translateY(200px);
            opacity: 0;
            pointer-events: none;
        }

        .companion-body {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 4px 16px rgba(46, 134, 171, 0.4);
            animation: companion-bob 3s ease-in-out infinite;
            position: relative;
            transition: all 0.3s;
        }

        .companion-body:hover {
            transform: scale(1.15);
            box-shadow: 0 6px 24px rgba(46, 134, 171, 0.6);
        }

        .companion-body:active {
            transform: scale(0.95);
        }

        @keyframes companion-bob {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-6px) rotate(3deg); }
            75% { transform: translateY(2px) rotate(-2deg); }
        }

        .companion.celebrating .companion-body {
            animation: companion-celebrate 0.6s ease-in-out 3;
        }

        @keyframes companion-celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.3) rotate(-15deg); }
            50% { transform: scale(1.1) rotate(10deg); }
            75% { transform: scale(1.25) rotate(-10deg); }
        }

        .companion-pulse {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 14px;
            height: 14px;
            background: var(--accent);
            border-radius: 50%;
            border: 2px solid var(--bg-card);
            animation: pulse-dot 2s ease-in-out infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.4); opacity: 0.7; }
        }

        .companion-bubble {
            position: absolute;
            bottom: 60px;
            right: 0;
            background: var(--bg-card);
            border-radius: 16px 16px 4px 16px;
            padding: 12px 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            min-width: 180px;
            max-width: 220px;
            opacity: 0;
            transform: translateY(10px) scale(0.9);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            pointer-events: none;
        }

        .companion-bubble.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: auto;
        }

        .companion-bubble::after {
            content: '';
            position: absolute;
            bottom: -8px;
            right: 16px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid var(--bg-card);
        }

        .bubble-text {
            font-size: 13px;
            line-height: 1.5;
            color: var(--text);
            font-weight: 500;
        }

        .bubble-mood {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .bubble-dismiss {
            position: absolute;
            top: 6px;
            right: 8px;
            font-size: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            opacity: 0.5;
            transition: opacity 0.2s;
            line-height: 1;
        }

        .bubble-dismiss:hover {
            opacity: 1;
        }

        .companion-menu {
            position: absolute;
            bottom: 60px;
            right: 0;
            background: var(--bg-card);
            border-radius: 16px;
            padding: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            min-width: 200px;
            opacity: 0;
            transform: translateY(10px) scale(0.9);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            pointer-events: none;
            z-index: 1501;
        }

        .companion-menu.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: auto;
        }

        .companion-menu-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 13px;
            font-weight: 500;
            color: var(--text);
        }

        .companion-menu-item:hover {
            background: var(--bg-light);
        }

        .companion-menu-item i {
            font-size: 16px;
            color: var(--secondary);
            width: 20px;
            text-align: center;
        }

        .companion-intro {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s;
        }

        .companion-intro.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .companion-intro-card {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 32px 24px;
            text-align: center;
            max-width: 280px;
            animation: intro-pop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes intro-pop {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .intro-character {
            font-size: 72px;
            margin-bottom: 16px;
            animation: companion-bob 2s ease-in-out infinite;
        }

        /* ===== FEATURE 1: Thank You Button ===== */
        .btn-thank-you {
            background: white;
            border: 2px solid #FF69B4;
            color: #FF69B4;
        }

        .btn-thank-you:hover {
            background: #FFF0F5;
            transform: scale(1.02);
        }

        /* ===== FEATURE 2: Year-End Recap ===== */
        .wrapped-banner {
            background: linear-gradient(135deg, #1B2A4A 0%, #FFD700 100%);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 16px;
            transition: all 0.3s;
            box-shadow: 0 4px 16px rgba(255, 215, 0, 0.3);
        }

        .wrapped-banner:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(255, 215, 0, 0.5);
        }

        .recap-screen {
            background: linear-gradient(135deg, #0D1117 0%, #1B2A4A 100%);
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 2500;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            padding: 40px 20px;
        }

        .recap-progress {
            position: absolute;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .recap-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s;
        }

        .recap-dot.active {
            background: white;
            width: 24px;
            border-radius: 4px;
        }

        .recap-slide {
            display: none;
            text-align: center;
            animation: slideIn 0.5s ease-out;
        }

        .recap-slide.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .recap-year {
            font-size: 80px;
            font-weight: 700;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }

        .recap-stat-big {
            font-size: 72px;
            font-weight: 700;
            color: #FFD700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            margin-bottom: 16px;
            animation: countUp 0.8s ease-out;
        }

        @keyframes countUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .recap-label {
            font-size: 20px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 8px;
        }

        .recap-sublabel {
            font-size: 16px;
            color: rgba(255, 215, 0, 0.8);
            font-weight: 600;
        }

        /* ===== FEATURE 3: Birthday Celebration ===== */
        .birthday-banner {
            background: linear-gradient(135deg, #FF6B9D, #FEC163, #9F5BFF, #FEC163);
            background-size: 200% 200%;
            animation: rainbowShift 3s ease infinite;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        @keyframes rainbowShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .birthday-banner::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
            animation: spin 3s linear infinite;
        }

        .birthday-banner::after {
            content: '';
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 24px;
            animation: spin 3s linear infinite reverse;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* ===== FEATURE 4: Cash-Out Reward ===== */
        .cashout-card {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .cashout-btn {
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: var(--bg-card);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            margin-bottom: 12px;
        }

        .cashout-btn:hover:not(.disabled) {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.05);
        }

        .cashout-btn.selected {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .cashout-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ===== FEATURE 5: Parent Companion Config ===== */
        .config-section {
            margin-bottom: 24px;
        }

        .config-section-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 12px;
        }

        .config-toggle-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .config-toggle-item:last-child {
            border-bottom: none;
        }

        .config-radio-item {
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .config-radio-item:hover {
            border-color: var(--secondary);
        }

        .config-radio-item.selected {
            border-color: var(--secondary);
            background: rgba(46, 134, 171, 0.05);
        }

        .custom-message-item {
            background: var(--bg-light);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 14px;
            color: var(--text);
        }

        /* ===== FEATURE 6: Swipe to Approve ===== */
        .swipe-card-stack {
            position: relative;
            min-height: 420px;
            margin-bottom: 20px;
        }

        .swipe-card {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            background: var(--bg-card);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, opacity 0.3s;
            cursor: grab;
            user-select: none;
            -webkit-user-select: none;
        }

        .swipe-card:active {
            cursor: grabbing;
        }

        .swipe-card:nth-child(2) {
            transform: scale(0.95) translateY(10px);
            opacity: 0.7;
            pointer-events: none;
        }

        .swipe-card:nth-child(3) {
            transform: scale(0.9) translateY(20px);
            opacity: 0.4;
            pointer-events: none;
        }

        .swipe-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: 700;
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
        }

        .swipe-overlay.approve {
            background: rgba(40, 167, 69, 0.15);
            color: #28a745;
            border: 3px solid #28a745;
        }

        .swipe-overlay.reject {
            background: rgba(220, 53, 69, 0.15);
            color: #dc3545;
            border: 3px solid #dc3545;
        }

        .redo-comment-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-card);
            border-top: 2px solid var(--border);
            padding: 16px 20px;
            display: none;
            z-index: 100;
        }

        .redo-comment-bar.visible {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .redo-comment-bar input {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
        }

        .redo-comment-bar button {
            padding: 12px 24px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }

        .all-caught-up {
            text-align: center;
            padding: 60px 20px;
        }

        .all-caught-up i {
            font-size: 80px;
            color: #28a745;
            margin-bottom: 20px;
        }

        .approve-all-btn {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .approve-all-btn:hover {
            background: rgba(40, 167, 69, 0.3);
        }

        /* ===== FEATURE 7: UX Polish ===== */
        .fab {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--accent);
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 16px rgba(241, 143, 1, 0.4);
            cursor: pointer;
            transition: all 0.3s;
            z-index: 1000;
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 24px rgba(241, 143, 1, 0.6);
        }

        .fab:active {
            transform: scale(0.95);
        }

        .points-header-badge {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
            white-space: nowrap;
        }

        .empty-state-chal {
            text-align: center;
            padding: 80px 20px;
        }

        .empty-state-chal .companion-body {
            width: 80px;
            height: 80px;
            font-size: 48px;
            margin: 0 auto 20px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(40, 167, 69, 0.95);
            color: white;
            padding: 12px 24px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 600;
            z-index: 3000;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .toast.visible {
            opacity: 1;
        }

        .btn-press {
            animation: btnPress 0.2s ease-out;
        }

        @keyframes btnPress {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(0.95); }
        }

        /* ===== THE LIVING ROOM ===== */
        .living-room-post {
            background: var(--bg-card);
            border-radius: 16px;
            margin-bottom: 16px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
        }

        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            font-weight: 700;
            flex-shrink: 0;
        }

        .post-author {
            flex: 1;
        }

        .post-author-name {
            font-size: 15px;
            font-weight: 600;
            color: var(--text);
        }

        .post-time {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .post-type-badge {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: 600;
        }

        .post-image {
            width: 100%;
            aspect-ratio: 4/3;
            object-fit: cover;
            display: block;
        }

        .post-image-placeholder {
            width: 100%;
            aspect-ratio: 4/3;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            background: linear-gradient(135deg, #E8F4F8, #A8D5E2);
        }

        .post-body {
            padding: 14px 16px;
        }

        .post-caption {
            font-size: 14px;
            color: var(--text);
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .post-reactions {
            display: flex;
            gap: 16px;
            padding-top: 8px;
            border-top: 1px solid var(--border);
        }

        .post-reaction-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            padding: 4px 0;
        }

        .post-reaction-btn:hover, .post-reaction-btn.liked {
            color: #E74C3C;
        }

        .post-reaction-btn i {
            font-size: 18px;
        }

        .post-comments {
            padding: 0 16px 14px;
        }

        .post-comment {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }

        .comment-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 10px;
            font-weight: 700;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .comment-text {
            font-size: 13px;
            color: var(--text);
            line-height: 1.4;
        }

        .comment-text strong {
            font-weight: 600;
        }

        .announcement-post {
            border: 2px solid var(--accent);
            background: linear-gradient(135deg, #FFF8E1, #FFFDE7);
        }

        .announcement-badge {
            background: var(--accent);
            color: white;
        }

        .chore-proof-badge {
            background: #28a745;
            color: white;
        }

        .shoutout-post-badge {
            background: #FF69B4;
            color: white;
        }

        .streak-post-badge {
            background: #FF6B35;
            color: white;
        }

        .birthday-post {
            border: 2px solid #FF69B4;
            background: linear-gradient(135deg, #FFF0F5, #FFE4E1);
        }

        .birthday-post-badge {
            background: linear-gradient(135deg, #FF69B4, #E74C3C);
            color: white;
        }

        .camera-fab {
            position: absolute;
            bottom: 70px;
            right: 16px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            box-shadow: 0 4px 16px rgba(46, 134, 171, 0.4);
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s;
        }

        .camera-fab:hover {
            transform: scale(1.1);
        }

        .pinned-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            color: var(--accent);
            font-weight: 600;
            margin-left: auto;
        }

        /* ===== V3.0: New Screen Styles ===== */
        .welcome-cards {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 20px;
        }
        .welcome-card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 32px 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid var(--border);
        }
        .welcome-card:hover {
            border-color: var(--secondary);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
        }
        .welcome-card-icon {
            font-size: 56px;
            margin-bottom: 16px;
        }
        .welcome-card-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 8px;
        }
        .welcome-card-desc {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* PIN Pad */
        .pin-display {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin: 32px 0;
        }
        .pin-dot {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--secondary);
            transition: all 0.2s;
        }
        .pin-dot.filled {
            background: var(--secondary);
            transform: scale(1.1);
        }
        .pin-pad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            max-width: 280px;
            margin: 0 auto;
        }
        .pin-key {
            width: 72px;
            height: 72px;
            border-radius: 50%;
            border: 2px solid var(--border);
            background: var(--bg-card);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: 600;
            color: var(--text);
            cursor: pointer;
            transition: all 0.15s;
            margin: 0 auto;
        }
        .pin-key:hover {
            background: var(--bg-light);
            border-color: var(--secondary);
        }
        .pin-key:active {
            transform: scale(0.92);
            background: var(--secondary);
            color: white;
        }
        .pin-key.empty {
            border: none;
            background: transparent;
            cursor: default;
        }
        .pin-key.backspace {
            font-size: 22px;
            border: none;
            background: transparent;
        }

        /* Social Auth Buttons */
        .social-btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        .social-btn i {
            font-size: 20px;
        }
        .social-btn-apple {
            background: #000;
            color: white;
        }
        .social-btn-google {
            background: white;
            color: #333;
            border: 2px solid #ddd;
        }
        .social-btn-facebook {
            background: #1877F2;
            color: white;
        }
        .social-btn:hover {
            transform: scale(1.02);
            filter: brightness(0.95);
        }
        .auth-divider {
            display: flex;
            align-items: center;
            gap: 16px;
            margin: 20px 0;
            color: var(--text-secondary);
            font-size: 14px;
        }
        .auth-divider::before, .auth-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border);
        }

        /* Family Code Preview */
        .code-preview {
            background: var(--bg-light);
            border: 2px dashed var(--secondary);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            margin-top: 12px;
        }
        .code-preview-label {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        .code-preview-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--secondary);
            letter-spacing: 3px;
        }

        /* Pet Picker */
        .pet-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        .pet-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 16px 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        .pet-card:hover {
            border-color: var(--secondary);
        }
        .pet-card.selected {
            border-color: var(--accent);
            background: rgba(241, 143, 1, 0.05);
            transform: scale(1.05);
        }
        .pet-card-emoji {
            font-size: 36px;
            margin-bottom: 6px;
        }
        .pet-card-name {
            font-size: 12px;
            font-weight: 600;
            color: var(--text);
        }

        /* Welcome Family celebration */
        .celebrate-pet {
            font-size: 80px;
            animation: pet-bounce 1s ease-in-out infinite;
            margin-bottom: 20px;
        }
        @keyframes pet-bounce {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-15px) rotate(-5deg); }
            75% { transform: translateY(-5px) rotate(5deg); }
        }
        .family-code-card {
            background: var(--bg-card);
            border: 2px solid var(--secondary);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .family-code-card .code-label {
            font-size: 13px;
            color: var(--text-secondary);
        }
        .family-code-card .code-value {
            font-size: 22px;
            font-weight: 700;
            color: var(--secondary);
            letter-spacing: 2px;
        }
        .copy-icon {
            color: var(--secondary);
            font-size: 18px;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.2s;
        }
        .copy-icon:hover {
            background: rgba(46, 134, 171, 0.1);
        }

        /* Empty Dashboard */
        .empty-dashboard-cta {
            background: var(--bg-card);
            border: 2px dashed var(--secondary);
            border-radius: 20px;
            padding: 32px 24px;
            text-align: center;
            margin: 20px 0;
        }
        .empty-dashboard-cta .pet-icon {
            font-size: 56px;
            margin-bottom: 16px;
        }

        /* Chore Setup */
        .chore-category {
            margin-bottom: 16px;
        }
        .chore-category-header {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: var(--bg-card);
            border-radius: 12px 12px 0 0;
            border: 1px solid var(--border);
            cursor: pointer;
            font-weight: 600;
            color: var(--text);
        }
        .chore-category-header i.chevron {
            margin-left: auto;
            transition: transform 0.3s;
        }
        .chore-category-header.expanded i.chevron {
            transform: rotate(180deg);
        }
        .chore-category-items {
            display: none;
            border: 1px solid var(--border);
            border-top: none;
            border-radius: 0 0 12px 12px;
            overflow: hidden;
        }
        .chore-category-items.expanded {
            display: block;
        }
        .preset-chore-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }
        .preset-chore-item:last-child {
            border-bottom: none;
        }
        .preset-chore-item:hover {
            background: var(--bg-light);
        }
        .preset-chore-item.selected {
            background: rgba(46, 134, 171, 0.08);
        }
        .preset-check {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: white;
            transition: all 0.2s;
            flex-shrink: 0;
        }
        .preset-chore-item.selected .preset-check {
            background: var(--secondary);
            border-color: var(--secondary);
        }
        .preset-chore-info {
            flex: 1;
        }
        .preset-chore-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
        }
        .preset-chore-meta {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 2px;
        }

        /* Pet speech bubble */
        .pet-speech {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 20px;
            position: relative;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .pet-speech::after {
            content: '';
            position: absolute;
            top: -8px;
            left: 24px;
            width: 16px;
            height: 16px;
            background: var(--bg-card);
            transform: rotate(45deg);
        }
        .pet-speech-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        .pet-speech-text {
            font-size: 14px;
            color: var(--text);
            line-height: 1.5;
        }

        /* Kid Added List */
        .kid-added-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: var(--bg-card);
            border-radius: 12px;
            margin-bottom: 8px;
        }
        .kid-added-check {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #28a745;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        /* Post Composer */
        .post-composer {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
        }
        .post-composer textarea {
            width: 100%;
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 14px;
            font-size: 15px;
            font-family: 'Inter', sans-serif;
            resize: none;
            background: var(--bg-light);
            color: var(--text);
            margin-bottom: 12px;
        }
        .post-composer textarea:focus {
            outline: none;
            border-color: var(--secondary);
        }
        .suggested-posts {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }
        .suggested-post {
            padding: 8px 14px;
            background: var(--bg-light);
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 13px;
            color: var(--text);
            cursor: pointer;
            transition: all 0.2s;
        }
        .suggested-post:hover {
            border-color: var(--secondary);
            background: rgba(46, 134, 171, 0.08);
        }

        /* Chore status badges */
        .chore-status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 600;
        }
        .chore-status-pending { background: #FFF3CD; color: #856404; }
        .chore-status-approved { background: #D4EDDA; color: #155724; }
        .chore-status-redo { background: #F8D7DA; color: #721C24; }

        /* Chore action buttons */
        .chore-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }
        .chore-action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .chore-action-btn:active {
            transform: scale(0.95);
        }
        .chore-action-start {
            background: var(--secondary);
            color: white;
        }
        .chore-action-done {
            background: #28a745;
            color: white;
        }
        .chore-action-working {
            background: var(--bg-light);
            color: var(--text);
            border: 1px solid var(--border);
        }

        /* Sibling profile */
        .sibling-profile-header {
            text-align: center;
            padding: 20px;
        }
        .sibling-profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            font-weight: 700;
            margin: 0 auto 12px;
        }

        /* Spotlight card */
        .spotlight-card {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            border-radius: 16px;
            padding: 20px;
            color: white;
            text-align: center;
            margin-bottom: 16px;
        }

        /* Cashout flow */
        .cashout-status-step {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
        }
        .cashout-status-dot {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            flex-shrink: 0;
        }
        .cashout-status-dot.active {
            background: var(--secondary);
            border-color: var(--secondary);
            color: white;
        }
        .cashout-status-dot.done {
            background: #28a745;
            border-color: #28a745;
            color: white;
        }
        .cashout-status-line {
            width: 2px;
            height: 20px;
            background: var(--border);
            margin-left: 11px;
        }
        .cashout-status-line.done {
            background: #28a745;
        }

        /* Waiting dots animation */
        .waiting-dots::after {
            content: '';
            animation: dots 1.5s steps(4, end) infinite;
        }
        @keyframes dots {
            0% { content: ''; }
            25% { content: '.'; }
            50% { content: '..'; }
            75% { content: '...'; }
        }

        /* Notification cards for parent dashboard */
        .notification-action-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            border: 2px solid var(--border);
        }
        .notification-action-card .card-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        .notification-action-card .card-actions .btn {
            flex: 1;
            padding: 10px;
            font-size: 13px;
        }

        /* Swag section */
        .swag-section {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
        }
        .swag-profile {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 26px;
            font-weight: 700;
            flex-shrink: 0;
        }
        .swag-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            flex: 1;
        }
        .swag-badge {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.12);
        }

        /* Settings sections v3 */
        .settings-section {
            margin-bottom: 16px;
        }
        .settings-section-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            padding-left: 4px;
        }
        .settings-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            padding: 14px 16px;
            transition: all 0.2s;
        }
        .settings-item:hover {
            background: var(--bg-light);
        }
        .settings-item-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
        }
        .settings-item-info {
            flex: 1;
        }
        .settings-item-title {
            font-size: 15px;
            font-weight: 500;
            color: var(--text);
        }
        .settings-item-desc {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 2px;
        }

        /* Tab content sections for chores */
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }

        .role-select-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 16px;
        }

        .role-option {
            background: var(--bg-card);
            border: 3px solid var(--border);
            border-radius: 16px;
            padding: 24px 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .role-option:hover {
            border-color: var(--secondary);
            transform: translateY(-2px);
        }

        .role-option.selected {
            border-color: var(--secondary);
            background: rgba(46, 134, 171, 0.05);
            box-shadow: 0 4px 12px rgba(46, 134, 171, 0.2);
        }
    </style>
</head>
<body>
    <div class="phone-frame">
        <div class="notch"></div>
        <div class="confetti-container" id="confetti-container"></div>

        <!-- COMPANION: Chal the Octopus -->
        <div id="companion" class="companion hidden">
            <div class="companion-bubble" id="companion-bubble">
                <div class="bubble-dismiss" onclick="event.stopPropagation(); dismissBubble();">&times;</div>
                <div class="bubble-text" id="bubble-text">You're doing amazing! Keep it up!</div>
                <div class="bubble-mood" id="bubble-mood">
                    <span>~ Chal</span>
                </div>
            </div>
            <div class="companion-menu" id="companion-menu">
                <div class="companion-menu-item" onclick="companionEncourage()">
                    <i class="fas fa-heart"></i> Encourage me
                </div>
                <div class="companion-menu-item" onclick="companionTip()">
                    <i class="fas fa-lightbulb"></i> Give me a tip
                </div>
                <div class="companion-menu-item" onclick="companionFunFact()">
                    <i class="fas fa-star"></i> Fun fact
                </div>
                <div class="companion-menu-item" onclick="hideCompanion()">
                    <i class="fas fa-eye-slash"></i> Hide Chal
                </div>
            </div>
            <div class="companion-body" onclick="toggleCompanionMenu()">
                
                <div class="companion-pulse" id="companion-pulse"></div>
            </div>
        </div>

        <!-- COMPANION: Intro Modal -->
        <div id="companion-intro" class="companion-intro">
            <div class="companion-intro-card">
                <div class="intro-character"></div>
                <h2 style="font-size: 22px; color: var(--text); margin-bottom: 8px;">Meet Chal!</h2>
                <p style="font-size: 14px; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px;">
                    I'm your personal companion! I'll cheer you on, give you tips, and celebrate your wins. Tap me anytime you need motivation!
                </p>
                <button class="btn btn-primary" onclick="dismissIntro()" style="font-size: 15px; padding: 14px;">
                    Hey Chal! Let's go!
                </button>
            </div>
        </div>

        <!-- YEAR RECAP: Challey Wrapped -->
        <div id="kid-year-recap" class="recap-screen" style="display: none;">
            <div class="recap-progress">
                <div class="recap-dot active"></div>
                <div class="recap-dot"></div>
                <div class="recap-dot"></div>
                <div class="recap-dot"></div>
                <div class="recap-dot"></div>
                <div class="recap-dot"></div>
                <div class="recap-dot"></div>
                <div class="recap-dot"></div>
            </div>

            <div class="recap-slide active" data-slide="0">
                <div style="font-size: 32px; margin-bottom: 20px;"></div>
                <h1 style="font-size: 40px; margin-bottom: 12px;">Your 2026 in Challey</h1>
                <div class="recap-year">2026</div>
            </div>

            <div class="recap-slide" data-slide="1">
                <div class="recap-label">You completed</div>
                <div class="recap-stat-big">347</div>
                <div class="recap-label">chores this year</div>
                <div style="font-size: 48px; margin-top: 20px;"></div>
            </div>

            <div class="recap-slide" data-slide="2">
                <div class="recap-stat-big">4,280</div>
                <div class="recap-label">points earned</div>
                <div class="recap-sublabel">That's more than 95% of families!</div>
                <div style="font-size: 48px; margin-top: 20px;"></div>
            </div>

            <div class="recap-slide" data-slide="3">
                <div class="recap-label">Your longest streak:</div>
                <div class="recap-stat-big">42</div>
                <div class="recap-label">days in a row</div>
                <div style="font-size: 48px; margin-top: 20px;"></div>
            </div>

            <div class="recap-slide" data-slide="4">
                <div class="recap-label">Your favorite chore:</div>
                <div class="recap-stat-big" style="font-size: 48px;"></div>
                <div class="recap-label">Walk the dog  156 times</div>
                <div class="recap-sublabel">Fido's best friend!</div>
            </div>

            <div class="recap-slide" data-slide="5">
                <div class="recap-label">Kindness stats:</div>
                <div class="recap-stat-big" style="font-size: 40px;">12 given, 9 received</div>
                <div class="recap-label">shout-outs</div>
                <div class="recap-sublabel">Jake called you Amazing Sibling 4 times</div>
                <div style="font-size: 48px; margin-top: 20px;"></div>
            </div>

            <div class="recap-slide" data-slide="6">
                <div class="recap-label">The Johnson Family:</div>
                <div class="recap-stat-big">892</div>
                <div class="recap-label">chores together</div>
                <div class="recap-sublabel">2.4 per day  incredible!</div>
                <div style="font-size: 48px; margin-top: 20px;"></div>
            </div>

            <div class="recap-slide" data-slide="7">
                <div style="font-size: 48px; margin-bottom: 20px;"></div>
                <h2 style="font-size: 32px; margin-bottom: 16px;">Here's to an even better 2027!</h2>
                <button class="btn" onclick="closeYearRecap()" style="background: linear-gradient(135deg, #FFD700, #FFA500); color: white; margin-top: 24px; padding: 16px 32px; font-size: 16px;">
                    Back to Challey
                </button>
            </div>
        </div>

        <!-- SCREEN 1: SPLASH -->
        <div id="splash" class="screen active splash">
            <div class="splash-logo">
                <i class="fas fa-check-circle"></i>
            </div>
            <h1>Challey</h1>
            <p>Chores. Points. Rewards.</p>
            <button class="btn btn-primary" onclick="navigateTo('join-family')">Get Started</button>
        </div>

        <!-- SCREEN 2: JOIN/CREATE FAMILY -->
        <div id="join-family" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('splash')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Welcome to Challey</h1>
                    <p>How would you like to get started?</p>
                </div>
            </div>
            <div class="content">
                <div class="welcome-cards">
                    <div class="welcome-card" onclick="navigateTo('join-family-code')">
                        <div class="welcome-card-icon"></div>
                        <div class="welcome-card-title">Join a Family</div>
                        <div class="welcome-card-desc">I have a family code and member code from my parent</div>
                    </div>
                    <div class="welcome-card" onclick="navigateTo('create-family-auth')">
                        <div class="welcome-card-icon"></div>
                        <div class="welcome-card-title">Create a Family</div>
                        <div class="welcome-card-desc">I'm a parent setting up Challey for the first time</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SCREEN 2A: JOIN FAMILY CODE ENTRY -->
        <div id="join-family-code" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('join-family')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Join Your Family</h1>
                    <p>Enter the codes your parent gave you</p>
                </div>
            </div>
            <div class="content">
                <div class="input-group">
                    <label>Family Code</label>
                    <input type="text" placeholder="e.g., JOHN13" value="JOHN13">
                </div>
                <div class="input-group">
                    <label>Your Member Code</label>
                    <input type="text" placeholder="e.g., MAG01" value="MAG01">
                </div>
                <button class="btn btn-primary" onclick="navigateTo('kid-set-pin')">Continue</button>
            </div>
        </div>

        <!-- SCREEN 2B: KID SET PIN -->
        <div id="kid-set-pin" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('join-family-code')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Set Your PIN</h1>
                    <p>Create a 4-digit PIN to keep your account safe</p>
                </div>
            </div>
            <div class="content" style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                <div class="pin-display" id="pin-set-dots">
                    <div class="pin-dot"></div>
                    <div class="pin-dot"></div>
                    <div class="pin-dot"></div>
                    <div class="pin-dot"></div>
                </div>
                <div class="pin-pad">
                    <div class="pin-key" onclick="pinPadPress(1, 'kid-set-pin')">1</div>
                    <div class="pin-key" onclick="pinPadPress(2, 'kid-set-pin')">2</div>
                    <div class="pin-key" onclick="pinPadPress(3, 'kid-set-pin')">3</div>
                    <div class="pin-key" onclick="pinPadPress(4, 'kid-set-pin')">4</div>
                    <div class="pin-key" onclick="pinPadPress(5, 'kid-set-pin')">5</div>
                    <div class="pin-key" onclick="pinPadPress(6, 'kid-set-pin')">6</div>
                    <div class="pin-key" onclick="pinPadPress(7, 'kid-set-pin')">7</div>
                    <div class="pin-key" onclick="pinPadPress(8, 'kid-set-pin')">8</div>
                    <div class="pin-key" onclick="pinPadPress(9, 'kid-set-pin')">9</div>
                    <div class="pin-key empty"></div>
                    <div class="pin-key" onclick="pinPadPress(0, 'kid-set-pin')">0</div>
                    <div class="pin-key backspace" onclick="pinPadDelete('kid-set-pin')"><i class="fas fa-delete-left"></i></div>
                </div>
            </div>
        </div>

        <!-- SCREEN 2C: KID CONFIRM PIN -->
        <div id="kid-confirm-pin" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-set-pin')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Confirm Your PIN</h1>
                    <p>Enter the same PIN again</p>
                </div>
            </div>
            <div class="content" style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                <div class="pin-display" id="pin-confirm-dots">
                    <div class="pin-dot"></div>
                    <div class="pin-dot"></div>
                    <div class="pin-dot"></div>
                    <div class="pin-dot"></div>
                </div>
                <div class="pin-pad">
                    <div class="pin-key" onclick="pinPadPress(1, 'kid-confirm-pin')">1</div>
                    <div class="pin-key" onclick="pinPadPress(2, 'kid-confirm-pin')">2</div>
                    <div class="pin-key" onclick="pinPadPress(3, 'kid-confirm-pin')">3</div>
                    <div class="pin-key" onclick="pinPadPress(4, 'kid-confirm-pin')">4</div>
                    <div class="pin-key" onclick="pinPadPress(5, 'kid-confirm-pin')">5</div>
                    <div class="pin-key" onclick="pinPadPress(6, 'kid-confirm-pin')">6</div>
                    <div class="pin-key" onclick="pinPadPress(7, 'kid-confirm-pin')">7</div>
                    <div class="pin-key" onclick="pinPadPress(8, 'kid-confirm-pin')">8</div>
                    <div class="pin-key" onclick="pinPadPress(9, 'kid-confirm-pin')">9</div>
                    <div class="pin-key empty"></div>
                    <div class="pin-key" onclick="pinPadPress(0, 'kid-confirm-pin')">0</div>
                    <div class="pin-key backspace" onclick="pinPadDelete('kid-confirm-pin')"><i class="fas fa-delete-left"></i></div>
                </div>
            </div>
        </div>

        <!-- SCREEN 2D: KID ENTER PIN (returning) -->
        <div id="kid-enter-pin" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('join-family')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Welcome Back!</h1>
                    <p>Enter your PIN</p>
                </div>
            </div>
            <div class="content" style="display: flex; flex-direction: column; align-items: center;">
                <div style="background: var(--bg-card); border-radius: 12px; padding: 12px 16px; margin-bottom: 24px; width: 100%;">
                    <div style="font-size: 13px; color: var(--text-secondary);">Family: <strong style="color: var(--text);">JOHN13</strong></div>
                    <div style="font-size: 13px; color: var(--text-secondary);">Member: <strong style="color: var(--text);">MAG01</strong></div>
                </div>
                <div class="pin-display" id="pin-enter-dots">
                    <div class="pin-dot"></div>
                    <div class="pin-dot"></div>
                    <div class="pin-dot"></div>
                    <div class="pin-dot"></div>
                </div>
                <div class="pin-pad">
                    <div class="pin-key" onclick="pinPadPress(1, 'kid-enter-pin')">1</div>
                    <div class="pin-key" onclick="pinPadPress(2, 'kid-enter-pin')">2</div>
                    <div class="pin-key" onclick="pinPadPress(3, 'kid-enter-pin')">3</div>
                    <div class="pin-key" onclick="pinPadPress(4, 'kid-enter-pin')">4</div>
                    <div class="pin-key" onclick="pinPadPress(5, 'kid-enter-pin')">5</div>
                    <div class="pin-key" onclick="pinPadPress(6, 'kid-enter-pin')">6</div>
                    <div class="pin-key" onclick="pinPadPress(7, 'kid-enter-pin')">7</div>
                    <div class="pin-key" onclick="pinPadPress(8, 'kid-enter-pin')">8</div>
                    <div class="pin-key" onclick="pinPadPress(9, 'kid-enter-pin')">9</div>
                    <div class="pin-key empty"></div>
                    <div class="pin-key" onclick="pinPadPress(0, 'kid-enter-pin')">0</div>
                    <div class="pin-key backspace" onclick="pinPadDelete('kid-enter-pin')"><i class="fas fa-delete-left"></i></div>
                </div>
                <div style="margin-top: 20px;">
                    <a style="color: var(--secondary); font-size: 14px; cursor: pointer;" onclick="navigateTo('kid-forgot-pin')">Forgot PIN?</a>
                </div>
            </div>
        </div>

        <!-- SCREEN 2E: KID FORGOT PIN -->
        <div id="kid-forgot-pin" class="screen">
            <div class="content" style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; min-height: 100%; padding: 40px;">
                <div style="font-size: 64px; margin-bottom: 24px;"><i class="fas fa-lock" style="color: var(--secondary);"></i></div>
                <h2 style="font-size: 22px; color: var(--text); margin-bottom: 12px;">PIN Reset Requested</h2>
                <p style="font-size: 15px; color: var(--text-secondary); line-height: 1.6; margin-bottom: 24px;">
                    We just asked Dad to reset your PIN. Hang tight<span class="waiting-dots"></span>
                </p>
                <div style="font-size: 40px; margin-bottom: 32px; animation: companion-bob 2s ease-in-out infinite;">
                    <span id="forgot-pin-pet"></span>
                </div>
                <button class="btn btn-secondary" onclick="navigateTo('kid-enter-pin')">
                    <i class="fas fa-arrow-left"></i> Try Again
                </button>
            </div>
        </div>

        <!-- SCREEN 2F: CREATE FAMILY AUTH -->
        <div id="create-family-auth" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('join-family')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Create Your Account</h1>
                    <p>Choose how to sign up</p>
                </div>
            </div>
            <div class="content">
                <button class="social-btn social-btn-apple" onclick="navigateTo('create-family-role')">
                    <i class="fab fa-apple"></i> Sign in with Apple
                </button>
                <button class="social-btn social-btn-google" onclick="navigateTo('create-family-role')">
                    <i class="fab fa-google"></i> Sign in with Google
                </button>
                <button class="social-btn social-btn-facebook" onclick="navigateTo('create-family-role')">
                    <i class="fab fa-facebook-f"></i> Continue with Facebook
                </button>
                <div class="auth-divider">or</div>
                <button class="btn btn-outline" onclick="navigateTo('create-family-manual')" style="border: 2px solid var(--secondary); color: var(--secondary);">
                    <i class="fas fa-envelope"></i> Sign up with email
                </button>
                <div style="text-align: center; margin-top: 24px;">
                    <span style="font-size: 14px; color: var(--text-secondary);">Already have an account? </span>
                    <a style="font-size: 14px; color: var(--secondary); cursor: pointer; font-weight: 600;" onclick="navigateTo('kid-enter-pin')">Log in</a>
                </div>
            </div>
        </div>

        <!-- SCREEN 2G: MANUAL SIGNUP -->
        <div id="create-family-manual" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('create-family-auth')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Create Account</h1>
                    <p>Sign up with your email</p>
                </div>
            </div>
            <div class="content">
                <div class="input-group">
                    <label>First Name</label>
                    <input type="text" placeholder="Mike" value="Mike">
                </div>
                <div class="input-group">
                    <label>Last Name</label>
                    <input type="text" placeholder="Johnson" value="Johnson">
                </div>
                <div class="input-group">
                    <label>Email</label>
                    <input type="email" placeholder="mike@example.com" value="mike@example.com">
                </div>
                <div class="input-group">
                    <label>Create Password</label>
                    <input type="password" placeholder="Min. 8 characters">
                </div>
                <button class="btn btn-primary" onclick="navigateTo('create-family-role')">Continue</button>
            </div>
        </div>

        <!-- SCREEN: PARENT ROLE SELECTION -->
        <div id="create-family-role" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('create-family-auth')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>What's Your Role?</h1>
                    <p>How should we introduce you?</p>
                </div>
            </div>
            <div class="content">
                <div class="role-select-grid">
                    <div class="role-option" onclick="selectRole(this, 'Dad')">
                        <div style="font-size: 48px; margin-bottom: 8px;">&#x1F468;</div>
                        <div style="font-size: 16px; font-weight: 600;">Dad</div>
                    </div>
                    <div class="role-option" onclick="selectRole(this, 'Mom')">
                        <div style="font-size: 48px; margin-bottom: 8px;">&#x1F469;</div>
                        <div style="font-size: 16px; font-weight: 600;">Mom</div>
                    </div>
                    <div class="role-option" onclick="selectRole(this, 'Guardian')">
                        <div style="font-size: 48px; margin-bottom: 8px;">&#x1F6E1;&#xFE0F;</div>
                        <div style="font-size: 16px; font-weight: 600;">Guardian</div>
                    </div>
                    <div class="role-option" onclick="selectRole(this, 'Relative')">
                        <div style="font-size: 48px; margin-bottom: 8px;">&#x1F46A;</div>
                        <div style="font-size: 16px; font-weight: 600;">Relative</div>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="navigateTo('create-family-name')" style="margin-top: 24px;">
                    Continue
                </button>
            </div>
        </div>

        <!-- SCREEN 2H: CREATE FAMILY NAME -->
        <div id="create-family-name" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('create-family-auth')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Name Your Family</h1>
                    <p>This is how your family will appear</p>
                </div>
            </div>
            <div class="content">
                <div class="input-group">
                    <label>Family Name</label>
                    <input type="text" placeholder="e.g., The Johnson Family" value="The Johnson Family" id="family-name-input" oninput="updateFamilyCodePreview()">
                </div>
                <div class="code-preview">
                    <div class="code-preview-label">Your family code will be:</div>
                    <div class="code-preview-value" id="family-code-preview">JOHN13</div>
                </div>
                <button class="btn btn-primary" onclick="navigateTo('pick-family-pet')" style="margin-top: 24px;">Create Family</button>
            </div>
        </div>

        <!-- SCREEN 2I: PICK FAMILY PET -->
        <div id="pick-family-pet" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('create-family-name')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Choose Your Family Pet!</h1>
                    <p>Every family needs a pet! Pick one and name them.</p>
                </div>
            </div>
            <div class="content">
                <div class="pet-grid">
                    <div class="pet-card" onclick="selectPet(this, '', 'Dog')"><div class="pet-card-emoji"></div><div class="pet-card-name">Dog</div></div>
                    <div class="pet-card" onclick="selectPet(this, '', 'Cat')"><div class="pet-card-emoji"></div><div class="pet-card-name">Cat</div></div>
                    <div class="pet-card selected" onclick="selectPet(this, '', 'Octopus')"><div class="pet-card-emoji"></div><div class="pet-card-name">Octopus</div></div>
                    <div class="pet-card" onclick="selectPet(this, '', 'Bunny')"><div class="pet-card-emoji"></div><div class="pet-card-name">Bunny</div></div>
                    <div class="pet-card" onclick="selectPet(this, '', 'Hamster')"><div class="pet-card-emoji"></div><div class="pet-card-name">Hamster</div></div>
                    <div class="pet-card" onclick="selectPet(this, '', 'Parrot')"><div class="pet-card-emoji"></div><div class="pet-card-name">Parrot</div></div>
                    <div class="pet-card" onclick="selectPet(this, '', 'Turtle')"><div class="pet-card-emoji"></div><div class="pet-card-name">Turtle</div></div>
                    <div class="pet-card" onclick="selectPet(this, '', 'Fox')"><div class="pet-card-emoji"></div><div class="pet-card-name">Fox</div></div>
                    <div class="pet-card" onclick="selectPet(this, '', 'Panda')"><div class="pet-card-emoji"></div><div class="pet-card-name">Panda</div></div>
                    <div class="pet-card" onclick="selectPet(this, '', 'Penguin')"><div class="pet-card-emoji"></div><div class="pet-card-name">Penguin</div></div>
                    <div class="pet-card" onclick="selectPet(this, '', 'Lion')"><div class="pet-card-emoji"></div><div class="pet-card-name">Lion</div></div>
                    <div class="pet-card" onclick="selectPet(this, '', 'Frog')"><div class="pet-card-emoji"></div><div class="pet-card-name">Frog</div></div>
                </div>
                <div class="input-group">
                    <label>Name your pet</label>
                    <input type="text" placeholder="e.g., Biscuit, Chal, Buddy" value="Chal" id="pet-name-input">
                </div>
                <button class="btn btn-primary" onclick="finishPetPick()">
                    Meet <span id="pet-meet-name">Chal</span>!
                </button>
            </div>
        </div>

        <!-- SCREEN 2J: WELCOME FAMILY -->
        <div id="welcome-family" class="screen">
            <div class="content" style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; min-height: 100%; padding: 32px 20px;">
                <div class="celebrate-pet" id="welcome-pet-emoji"></div>
                <h2 style="font-size: 24px; color: var(--text); margin-bottom: 16px;">Welcome to Challey,<br><span id="welcome-family-name">The Johnson Family</span>!</h2>
                <div class="family-code-card">
                    <div>
                        <div class="code-label">Family Code</div>
                        <div class="code-value">JOHN13</div>
                    </div>
                    <i class="fas fa-copy copy-icon" onclick="showToast('Copied!')"></i>
                </div>
                <div class="family-code-card">
                    <div>
                        <div class="code-label">Your Member Code</div>
                        <div class="code-value">MIKE01</div>
                    </div>
                    <i class="fas fa-copy copy-icon" onclick="showToast('Copied!')"></i>
                </div>
                <p style="font-size: 14px; color: var(--text-secondary); margin: 16px 0; line-height: 1.5;">
                    Share these codes with your family to join!
                </p>
                <button class="btn btn-primary" onclick="navigateTo('parent-dashboard-empty')">Go to Dashboard</button>
            </div>
        </div>

        <!-- SCREEN 2K: PARENT DASHBOARD EMPTY STATE -->
        <div id="parent-dashboard-empty" class="screen">
            <div class="dashboard-header">
                <div class="header-top-row">
                    <div class="header-top-left"></div>
                    <div class="header-top-right">
                        <div class="bell-icon" onclick="toggleNotifications()">
                            <i class="fas fa-bell"></i>
                        </div>
                    </div>
                </div>
                <h1>The Johnson Family</h1>
                <p>Welcome, Mike!</p>
                <div class="quick-stats">
                    <div class="quick-stat">
                        <div class="quick-stat-value">0</div>
                        <div class="quick-stat-label">Active Chores</div>
                    </div>
                    <div class="quick-stat">
                        <div class="quick-stat-value">0</div>
                        <div class="quick-stat-label">Pending</div>
                    </div>
                    <div class="quick-stat">
                        <div class="quick-stat-value">0</div>
                        <div class="quick-stat-label">This Week</div>
                    </div>
                </div>
            </div>
            <div class="content">
                <div class="empty-dashboard-cta">
                    <div class="pet-icon" id="dashboard-pet-emoji"></div>
                    <h3 style="font-size: 20px; font-weight: 700; color: var(--text); margin-bottom: 8px;">Let's add your kids!</h3>
                    <p style="font-size: 14px; color: var(--text-secondary); line-height: 1.5; margin-bottom: 20px;">
                        Your family is set up. Now add your kids so they can start earning rewards!
                    </p>
                    <button class="btn btn-primary" onclick="navigateTo('add-kids')">
                        <i class="fas fa-user-plus"></i> Add Kids
                    </button>
                </div>
            </div>
            <div class="bottom-nav parent-nav">
                <div class="nav-item active" onclick="navigateTo('parent-dashboard-empty')">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-verify')">
                    <i class="fas fa-check-circle"></i>
                    <span>Verify</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-rewards')">
                    <i class="fas fa-gift"></i>
                    <span>Rewards</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-living-room')">
                    <i class="fas fa-couch"></i>
                    <span>Living Room</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-family')">
                    <i class="fas fa-users"></i>
                    <span>Family</span>
                </div>
            </div>
        </div>

        <!-- SCREEN 2L: ADD KIDS -->
        <div id="add-kids" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('parent-dashboard-empty')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Add Your Kids</h1>
                    <p>Each kid gets a unique code</p>
                </div>
            </div>
            <div class="content">
                <div id="added-kids-list"></div>
                <div class="input-group">
                    <label>Name or Nickname</label>
                    <input type="text" placeholder="e.g., Maggie" id="add-kid-name">
                </div>
                <div class="input-group">
                    <label>Birthday</label>
                    <input type="date" id="add-kid-birthday">
                </div>
                <div class="input-group">
                    <label>Age</label>
                    <input type="number" placeholder="e.g., 13" id="add-kid-age">
                </div>
                <button class="btn btn-secondary" onclick="addKid()" style="margin-bottom: 12px;">
                    <i class="fas fa-plus"></i> Add Another Kid
                </button>
                <button class="btn btn-primary" onclick="navigateTo('add-kids-success')">
                    Done
                </button>
            </div>
        </div>

        <!-- SCREEN 2M: ADD KIDS SUCCESS -->
        <div id="add-kids-success" class="screen">
            <div class="content" style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; min-height: 100%; padding: 32px 20px;">
                <div class="success-checkmark">
                    <i class="fas fa-check"></i>
                </div>
                <h2 style="font-size: 24px; color: var(--text); margin-bottom: 20px;">Kids Added!</h2>
                <div style="width: 100%; margin-bottom: 20px;">
                    <div class="kid-added-item">
                        <div class="kid-added-check"><i class="fas fa-check"></i></div>
                        <div style="flex: 1; text-align: left;">
                            <div style="font-weight: 600; color: var(--text);">Maggie</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Age 13</div>
                        </div>
                        <div style="font-weight: 700; color: var(--secondary); letter-spacing: 1px;">MAG01</div>
                    </div>
                    <div class="kid-added-item">
                        <div class="kid-added-check"><i class="fas fa-check"></i></div>
                        <div style="flex: 1; text-align: left;">
                            <div style="font-weight: 600; color: var(--text);">Jake</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Age 10</div>
                        </div>
                        <div style="font-weight: 700; color: var(--secondary); letter-spacing: 1px;">JAK01</div>
                    </div>
                    <div class="kid-added-item">
                        <div class="kid-added-check"><i class="fas fa-check"></i></div>
                        <div style="flex: 1; text-align: left;">
                            <div style="font-weight: 600; color: var(--text);">Lily</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Age 8</div>
                        </div>
                        <div style="font-weight: 700; color: var(--secondary); letter-spacing: 1px;">LIL01</div>
                    </div>
                </div>
                <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 24px;">Share these codes with your kids!</p>
                <button class="btn btn-primary" onclick="navigateTo('setup-chores')">Continue to Setup</button>
            </div>
        </div>

        <!-- SCREEN 2N: CHORE SETUP -->
        <div id="setup-chores" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('add-kids-success')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Set Up Chores</h1>
                    <p>Pick some to get started</p>
                </div>
            </div>
            <div class="content">
                <div class="pet-speech">
                    <div class="pet-speech-header">
                        <span style="font-size: 28px;" id="setup-chores-pet"></span>
                        <span style="font-weight: 600; color: var(--text);" id="setup-chores-pet-name">Chal</span>
                    </div>
                    <div class="pet-speech-text">Great! Now let's give your kids something to do. Here are some popular chores!</div>
                </div>

                <div class="chore-category">
                    <div class="chore-category-header expanded" onclick="toggleChoreCategory(this)">
                        <span></span> Kitchen <i class="fas fa-chevron-down chevron"></i>
                    </div>
                    <div class="chore-category-items expanded">
                        <div class="preset-chore-item selected" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Wash dishes</div><div class="preset-chore-meta">15 pts - 15 min</div></div></div>
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Empty dishwasher</div><div class="preset-chore-meta">10 pts - 10 min</div></div></div>
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Wipe counters</div><div class="preset-chore-meta">10 pts - 10 min</div></div></div>
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Set the table</div><div class="preset-chore-meta">5 pts - 5 min</div></div></div>
                    </div>
                </div>
                <div class="chore-category">
                    <div class="chore-category-header" onclick="toggleChoreCategory(this)">
                        <span></span> Bedroom <i class="fas fa-chevron-down chevron"></i>
                    </div>
                    <div class="chore-category-items">
                        <div class="preset-chore-item selected" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Make bed</div><div class="preset-chore-meta">5 pts - 5 min</div></div></div>
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Clean room</div><div class="preset-chore-meta">20 pts - 30 min</div></div></div>
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Put away laundry</div><div class="preset-chore-meta">15 pts - 15 min</div></div></div>
                    </div>
                </div>
                <div class="chore-category">
                    <div class="chore-category-header" onclick="toggleChoreCategory(this)">
                        <span></span> Outdoor <i class="fas fa-chevron-down chevron"></i>
                    </div>
                    <div class="chore-category-items">
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Mow lawn</div><div class="preset-chore-meta">30 pts - 45 min</div></div></div>
                        <div class="preset-chore-item selected" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Take out trash</div><div class="preset-chore-meta">10 pts - 10 min</div></div></div>
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Walk the dog</div><div class="preset-chore-meta">15 pts - 20 min</div></div></div>
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Water plants</div><div class="preset-chore-meta">10 pts - 10 min</div></div></div>
                    </div>
                </div>
                <div class="chore-category">
                    <div class="chore-category-header" onclick="toggleChoreCategory(this)">
                        <span></span> Living Areas <i class="fas fa-chevron-down chevron"></i>
                    </div>
                    <div class="chore-category-items">
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Vacuum</div><div class="preset-chore-meta">20 pts - 20 min</div></div></div>
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Sweep/mop</div><div class="preset-chore-meta">20 pts - 25 min</div></div></div>
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Dust furniture</div><div class="preset-chore-meta">15 pts - 15 min</div></div></div>
                    </div>
                </div>

                <button class="btn btn-secondary" style="margin: 16px 0 12px;"><i class="fas fa-plus"></i> Add Custom Chore</button>
                <button class="btn btn-primary" onclick="navigateTo('setup-rewards')">Continue</button>
            </div>
        </div>

        <!-- SCREEN 2O: REWARD SETUP -->
        <div id="setup-rewards" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('setup-chores')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Set Up Rewards</h1>
                    <p>What can kids earn?</p>
                </div>
            </div>
            <div class="content">
                <div class="pet-speech">
                    <div class="pet-speech-header">
                        <span style="font-size: 28px;" id="setup-rewards-pet"></span>
                        <span style="font-weight: 600; color: var(--text);">Chal</span>
                    </div>
                    <div class="pet-speech-text">Now let's add some rewards! Just enter the dollar value  I'll calculate the points automatically. Your kids can also suggest rewards and add to their wishlist later.</div>
                </div>

                <div class="chore-category">
                    <div class="chore-category-header expanded" onclick="toggleChoreCategory(this)">
                        <span></span> Screen Time <i class="fas fa-chevron-down chevron"></i>
                    </div>
                    <div class="chore-category-items expanded">
                        <div class="preset-chore-item selected" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">30min gaming</div><div class="preset-chore-meta">30 pts  $1.50</div></div></div>
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">1hr TV</div><div class="preset-chore-meta">50 pts  $2.50</div></div></div>
                        <div class="preset-chore-item selected" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Movie night</div><div class="preset-chore-meta">80 pts  $4.00</div></div></div>
                    </div>
                </div>
                <div class="chore-category">
                    <div class="chore-category-header" onclick="toggleChoreCategory(this)">
                        <span></span> Food & Treats <i class="fas fa-chevron-down chevron"></i>
                    </div>
                    <div class="chore-category-items">
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Pick dinner</div><div class="preset-chore-meta">60 pts  $3.00</div></div></div>
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">Ice cream outing</div><div class="preset-chore-meta">40 pts  $2.00</div></div></div>
                    </div>
                </div>
                <div class="chore-category">
                    <div class="chore-category-header" onclick="toggleChoreCategory(this)">
                        <span></span> Cash <i class="fas fa-chevron-down chevron"></i>
                    </div>
                    <div class="chore-category-items">
                        <div class="preset-chore-item selected" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">$1 cash</div><div class="preset-chore-meta">20 pts  $1.00</div></div></div>
                        <div class="preset-chore-item selected" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">$5 cash</div><div class="preset-chore-meta">100 pts  $5.00</div></div></div>
                        <div class="preset-chore-item" onclick="togglePresetChore(this)"><div class="preset-check"><i class="fas fa-check"></i></div><div class="preset-chore-info"><div class="preset-chore-name">$10 cash</div><div class="preset-chore-meta">200 pts  $10.00</div></div></div>
                    </div>
                </div>

                <button class="btn btn-secondary" style="margin: 16px 0 12px;"><i class="fas fa-plus"></i> Add Custom Reward</button>
                <button class="btn btn-primary" onclick="navigateTo('setup-first-post')">Continue</button>
            </div>
        </div>

        <!-- SCREEN 2P: FIRST LIVING ROOM POST -->
        <div id="setup-first-post" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('setup-rewards')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>First Post!</h1>
                    <p>Welcome your family</p>
                </div>
            </div>
            <div class="content">
                <div class="pet-speech">
                    <div class="pet-speech-header">
                        <span style="font-size: 28px;"></span>
                        <span style="font-weight: 600; color: var(--text);">Chal</span>
                    </div>
                    <div class="pet-speech-text">One last thing! Post something in The Living Room -- this will be the first thing your kids see when they join!</div>
                </div>

                <div class="post-composer">
                    <textarea rows="4" placeholder="Welcome to our family app!"></textarea>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <i class="fas fa-camera" style="font-size: 22px; color: var(--secondary); cursor: pointer;"></i>
                        <span style="font-size: 13px; color: var(--text-secondary);">Add a photo</span>
                    </div>
                    <div class="suggested-posts">
                        <div class="suggested-post" onclick="this.closest('.post-composer').querySelector('textarea').value = this.textContent">Welcome to Challey, family!</div>
                        <div class="suggested-post" onclick="this.closest('.post-composer').querySelector('textarea').value = this.textContent">Let's earn some rewards!</div>
                        <div class="suggested-post" onclick="this.closest('.post-composer').querySelector('textarea').value = this.textContent">Who's ready to level up?</div>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="switchRole('parent'); navigateTo('parent-dashboard')">
                    <i class="fas fa-paper-plane"></i> Post & Finish Setup
                </button>
            </div>
        </div>

        <!-- SCREEN 3: KID CHORES -->
        <div id="kid-chores" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <div class="role-switcher" onclick="toggleRole()">
                            <i class="fas fa-repeat"></i> <span class="role-text">Switch to Parent</span>
                        </div>
                        <div class="points-header-badge">
                            <i class="fas fa-coins" style="margin-right: 4px;"></i> 135 pts
                        </div>
                    </div>
                    <div class="header-top-right">
                        <div class="gear-icon" onclick="navigateTo('kid-settings')">
                            <i class="fas fa-gear"></i>
                        </div>
                        <div class="bell-icon" onclick="toggleNotifications()">
                            <i class="fas fa-bell"></i>
                            <div class="notification-badge">3</div>
                        </div>
                    </div>
                </div>
                <div class="header-title-row">
                    <h1>My Chores</h1>
                    <p>Let's get it done!</p>
                </div>
            </div>
            <div class="content">
                <div class="birthday-banner">
                    <h3 style="font-size: 22px; font-weight: 700; margin-bottom: 8px;">Happy Birthday, Maggie! </h3>
                    <p style="font-size: 14px; margin-bottom: 8px;">Double points today! </p>
                    <div style="background: rgba(255, 255, 255, 0.2); border-radius: 12px; padding: 8px; display: inline-block;">
                        <strong>Birthday Pass:</strong> Skip 1 chore free
                    </div>
                </div>

                <div class="streak-card" onclick="navigateTo('kid-board')" style="cursor: pointer;">
                    <h3>7 Day Streak! </h3>
                    <p>You're on fire! Keep it up to unlock special rewards</p>
                </div>

                <div class="tabs">
                    <div class="tab active" onclick="switchChoreTab('todo', this)">To Do</div>
                    <div class="tab" onclick="switchChoreTab('inprogress', this)">In Progress</div>
                    <div class="tab" onclick="switchChoreTab('done', this)">Done</div>
                </div>

                <!-- To Do Tab -->
                <div class="tab-content active" id="chore-tab-todo" data-tab="todo">
                    <div class="card" onclick="navigateTo('kid-chore-detail')">
                        <div class="card-header">
                            <div class="card-title">Clean the garage</div>
                            <div class="points-badge">50 pts</div>
                        </div>
                        <div class="card-meta">
                            <span><i class="far fa-calendar"></i> Due Saturday</span>
                            <span style="color: var(--accent); font-weight: 600;">Due today!</span>
                        </div>
                        <div class="chore-actions" onclick="event.stopPropagation();">
                            <button class="chore-action-btn chore-action-start" onclick="startChore(this.closest('.card'))"><i class="fas fa-play"></i> Started it</button>
                            <button class="chore-action-btn chore-action-done" onclick="completeChore(this.closest('.card'))"><i class="fas fa-check"></i> Done!</button>
                            <i class="fas fa-repeat" style="color: var(--text-secondary); cursor: pointer; padding: 10px;" onclick="navigateTo('kid-swap-request')"></i>
                        </div>
                    </div>

                    <div class="card" onclick="navigateTo('kid-chore-detail')">
                        <div class="card-header">
                            <div class="card-title">Walk the dog</div>
                            <div class="points-badge">20 pts</div>
                        </div>
                        <div class="card-meta">
                            <span><i class="far fa-calendar"></i> Daily</span>
                            <span style="color: var(--accent); font-weight: 600;">Due today!</span>
                        </div>
                        <div class="chore-actions" onclick="event.stopPropagation();">
                            <button class="chore-action-btn chore-action-start" onclick="startChore(this.closest('.card'))"><i class="fas fa-play"></i> Started it</button>
                            <button class="chore-action-btn chore-action-done" onclick="completeChore(this.closest('.card'))"><i class="fas fa-check"></i> Done!</button>
                            <i class="fas fa-repeat" style="color: var(--text-secondary); cursor: pointer; padding: 10px;" onclick="navigateTo('kid-swap-request')"></i>
                        </div>
                    </div>

                    <div class="card" onclick="navigateTo('kid-chore-detail')">
                        <div class="card-header">
                            <div class="card-title">Do laundry (wash + fold)</div>
                            <div class="points-badge">40 pts</div>
                        </div>
                        <div class="card-meta">
                            <span><i class="far fa-calendar"></i> Due Sunday</span>
                            <span><i class="far fa-clock"></i> 4 days left</span>
                        </div>
                        <div class="chore-actions" onclick="event.stopPropagation();">
                            <button class="chore-action-btn chore-action-start" onclick="startChore(this.closest('.card'))"><i class="fas fa-play"></i> Started it</button>
                            <button class="chore-action-btn chore-action-done" onclick="completeChore(this.closest('.card'))"><i class="fas fa-check"></i> Done!</button>
                            <i class="fas fa-repeat" style="color: var(--text-secondary); cursor: pointer; padding: 10px;" onclick="navigateTo('kid-swap-request')"></i>
                        </div>
                    </div>

                    <div class="card" onclick="navigateTo('kid-chore-detail')">
                        <div class="card-header">
                            <div class="card-title">Clean your room</div>
                            <div class="points-badge">25 pts</div>
                        </div>
                        <div class="card-meta">
                            <span><i class="far fa-calendar"></i> Weekly</span>
                            <span><i class="far fa-clock"></i> Due Friday</span>
                        </div>
                        <div class="chore-actions" onclick="event.stopPropagation();">
                            <button class="chore-action-btn chore-action-start" onclick="startChore(this.closest('.card'))"><i class="fas fa-play"></i> Started it</button>
                            <button class="chore-action-btn chore-action-done" onclick="completeChore(this.closest('.card'))"><i class="fas fa-check"></i> Done!</button>
                            <i class="fas fa-repeat" style="color: var(--text-secondary); cursor: pointer; padding: 10px;" onclick="navigateTo('kid-swap-request')"></i>
                        </div>
                    </div>

                    <!-- Redo requested chore (returned from Done) -->
                    <div class="card" onclick="navigateTo('kid-chore-detail')" style="border: 2px solid #F18F01; background: rgba(241, 143, 1, 0.06);">
                        <div class="card-header">
                            <div class="card-title"><i class="fas fa-redo" style="color: #F18F01; margin-right: 6px;"></i>Take out trash</div>
                            <div class="points-badge">10 pts</div>
                        </div>
                        <div class="card-meta">
                            <span class="chore-status-badge chore-status-redo" style="background: rgba(241, 143, 1, 0.15); color: #c57700;">Redo requested</span>
                            <span><i class="far fa-clock"></i> 2 days ago</span>
                        </div>
                        <div style="background: #FFF8EE; border-left: 3px solid #F18F01; padding: 8px 12px; border-radius: 6px; margin-top: 8px;">
                            <div style="font-size: 12px; font-weight: 600; color: #c57700; margin-bottom: 2px;">Redo: Needs another pass</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">Dad's note: All done! Organized the tools but forgot to sweep the floor. Quick sweep and you're good!</div>
                        </div>
                        <div class="chore-actions" onclick="event.stopPropagation();">
                            <button class="chore-action-btn chore-action-start" onclick="startChore(this.closest('.card'))"><i class="fas fa-play"></i> Started it</button>
                            <button class="chore-action-btn chore-action-done" onclick="completeChore(this.closest('.card'))"><i class="fas fa-check"></i> Done!</button>
                            <i class="fas fa-repeat" style="color: var(--text-secondary); cursor: pointer; padding: 10px;" onclick="navigateTo('kid-swap-request')"></i>
                        </div>
                    </div>
                </div>

                <!-- In Progress Tab -->
                <div class="tab-content" id="chore-tab-inprogress" data-tab="inprogress">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Vacuum living room</div>
                            <div class="points-badge">30 pts</div>
                        </div>
                        <div class="card-meta">
                            <span style="color: var(--secondary); font-weight: 500;">Still working on this?</span>
                        </div>
                        <div class="chore-actions">
                            <button class="chore-action-btn chore-action-done" onclick="completeChore(this.closest('.card'))"><i class="fas fa-check"></i> Done!</button>
                            <button class="chore-action-btn chore-action-working"><i class="fas fa-clock"></i> Still on it</button>
                            <i class="fas fa-repeat" style="color: var(--text-secondary); cursor: pointer; padding: 10px;" onclick="navigateTo('kid-swap-request')"></i>
                        </div>
                    </div>
                </div>

                <!-- Done Tab -->
                <div class="tab-content" id="chore-tab-done" data-tab="done">
                    <div class="card" style="cursor: default;">
                        <div class="card-header">
                            <div class="card-title">Wash dishes</div>
                            <div class="points-badge" style="background: #28a745;">15 pts</div>
                        </div>
                        <div class="card-meta">
                            <span class="chore-status-badge chore-status-approved"><i class="fas fa-check"></i> Approved</span>
                            <span><i class="far fa-clock"></i> Yesterday</span>
                        </div>
                    </div>
                    <div class="card" style="cursor: default;">
                        <div class="card-header">
                            <div class="card-title">Make bed</div>
                            <div class="points-badge">5 pts</div>
                        </div>
                        <div class="card-meta">
                            <span class="chore-status-badge chore-status-pending">Pending approval</span>
                            <span><i class="far fa-clock"></i> Today</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bottom-nav kid-nav">
                <div class="nav-item active" onclick="navigateTo('kid-chores')">
                    <i class="fas fa-list-check"></i>
                    <span>Chores</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-rewards')">
                    <i class="fas fa-gift"></i>
                    <span>Rewards</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-points')">
                    <i class="fas fa-coins"></i>
                    <span>Points</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-board')">
                    <i class="fas fa-trophy"></i>
                    <span>Board</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-living-room')">
                    <i class="fas fa-couch"></i>
                    <span>Living Room</span>
                </div>
            </div>
        </div>

        <!-- SCREEN 4: KID CHORE DETAIL -->
        <div id="kid-chore-detail" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-chores')"></i>
                <h1>Chore Details</h1>
                <p>Everything you need to know</p>
            </div>
            <div class="content">
                <div class="stat-card">
                    <div class="stat-value">50</div>
                    <div class="stat-label">Points for this chore</div>
                </div>

                <div class="card">
                    <div class="card-title" style="margin-bottom: 12px;">Clean the garage</div>
                    <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6; margin-bottom: 16px;">
                        Sweep the floor, organize the tools on the workbench, and take out any trash or recycling. Make sure everything is neat and tidy!
                    </p>
                    <div class="card-meta">
                        <span><i class="far fa-calendar"></i> Due Saturday</span>
                        <span><i class="far fa-clock"></i> 2 days left</span>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="navigateTo('kid-chore-completion')">
                    <i class="fas fa-camera"></i> Mark Complete
                </button>

                <button class="btn btn-secondary" onclick="navigateTo('kid-swap-request')" style="margin-top: 12px;">
                    <i class="fas fa-repeat"></i> Request Swap
                </button>
            </div>
        </div>

        <!-- SCREEN 5: KID CHORE COMPLETION -->
        <div id="kid-chore-completion" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-chore-detail')"></i>
                <h1>Complete Chore</h1>
                <p>Upload proof photo</p>
            </div>
            <div class="content">
                <div class="card">
                    <div class="card-title" style="margin-bottom: 8px;">Clean the garage</div>
                    <div class="points-badge" style="display: inline-block;">50 pts</div>
                </div>

                <div class="photo-uploaded">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect fill='%23A8D5E2' width='300' height='200'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='18' fill='%231B2A4A'%3EClean Garage Photo%3C/text%3E%3C/svg%3E" alt="Chore completion photo">
                    <p style="font-size: 14px; color: var(--text-secondary); text-align: center;">
                        <i class="fas fa-check-circle" style="color: #28a745; margin-right: 4px;"></i>
                        Photo uploaded successfully
                    </p>
                </div>

                <div class="input-group">
                    <label>Add a note (optional)</label>
                    <textarea rows="3" placeholder="Any notes for your parents?">All done! Organized the tools and swept everything.</textarea>
                </div>

                <button class="btn btn-success" onclick="submitChore()">
                    <i class="fas fa-paper-plane"></i> Submit for Verification
                </button>
            </div>
        </div>

        <!-- SCREEN 5A: KID SWAP REQUEST -->
        <div id="kid-swap-request" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-chore-detail')"></i>
                <h1>Request Swap</h1>
                <p>Choose swap type</p>
            </div>
            <div class="content">
                <div class="card">
                    <div class="card-title" style="margin-bottom: 8px;">Chore to Swap</div>
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 12px;">
                        <div style="font-size: 16px; font-weight: 600; color: var(--text);">Clean the garage</div>
                        <div class="points-badge">50 pts</div>
                    </div>
                </div>

                <div class="section-header" style="margin-top: 24px;">
                    <div class="section-title">Choose Swap Type</div>
                </div>

                <div class="card" onclick="navigateTo('kid-swap-sibling-select')">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="font-size: 48px;"></div>
                        <div style="flex: 1;">
                            <div class="card-title">Swap with Sibling</div>
                            <p style="font-size: 13px; color: var(--text-secondary); margin-top: 4px;">
                                Trade chores with Jake or Lily
                            </p>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                    </div>
                    <div style="display: flex; gap: 8px; margin-top: 16px;">
                        <div class="kid-avatar" style="width: 36px; height: 36px; font-size: 14px;">J</div>
                        <div class="kid-avatar" style="width: 36px; height: 36px; font-size: 14px;">L</div>
                    </div>
                </div>

                <div class="card" onclick="navigateTo('kid-swap-parent')">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="font-size: 48px;"></div>
                        <div style="flex: 1;">
                            <div class="card-title">Request from Parent</div>
                            <p style="font-size: 13px; color: var(--text-secondary); margin-top: 4px;">
                                Ask Dad to change this chore
                            </p>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- SCREEN 5B-1: KID SWAP SIBLING SELECT -->
        <div id="kid-swap-sibling-select" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-swap-request')"></i>
                <h1>Swap with...</h1>
                <p>Choose a sibling</p>
            </div>
            <div class="content">
                <div class="sibling-select-card" onclick="chooseSibling('Jake')">
                    <div class="kid-avatar" style="width: 48px; height: 48px; font-size: 18px;">J</div>
                    <div class="sibling-info">
                        <div class="sibling-name">Jake</div>
                        <div class="sibling-age">Age 10</div>
                        <div class="sibling-chore-count">3 chores available</div>
                    </div>
                    <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                </div>

                <div class="sibling-select-card" onclick="chooseSibling('Lily')">
                    <div class="kid-avatar" style="width: 48px; height: 48px; font-size: 18px;">L</div>
                    <div class="sibling-info">
                        <div class="sibling-name">Lily</div>
                        <div class="sibling-age">Age 8</div>
                        <div class="sibling-chore-count">2 chores available</div>
                    </div>
                    <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                </div>
            </div>
        </div>

        <!-- SCREEN 5B-2: KID SWAP SIBLING -->
        <div id="kid-swap-sibling" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-swap-sibling-select')"></i>
                <h1>Swap with <span id="swap-sibling-name">Jake</span></h1>
                <p>Choose a chore to trade</p>
            </div>
            <div class="content">
                <div class="card">
                    <div class="card-title" style="margin-bottom: 8px;">Your Chore</div>
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 12px;">
                        <div style="font-size: 16px; font-weight: 600; color: var(--text);">Clean the garage</div>
                        <div class="points-badge">50 pts</div>
                    </div>
                </div>

                <div class="section-header" style="margin-top: 24px;">
                    <div class="section-title"><span id="swap-sibling-name2">Jake</span>'s Available Chores</div>
                    <div style="font-size: 13px; color: var(--text-secondary);">Select one to propose</div>
                </div>

                <div class="card swap-chore-option" onclick="selectSwapChore(this)" style="border: 2px solid var(--border); cursor: pointer;">
                    <div class="card-header">
                        <div class="card-title">Vacuum living room</div>
                        <div class="points-badge">30 pts</div>
                    </div>
                    <div style="font-size: 13px; color: var(--text-secondary); margin-top: 8px;">
                        <i class="far fa-calendar"></i> Due Friday
                    </div>
                </div>

                <div class="card swap-chore-option" onclick="selectSwapChore(this)" style="border: 2px solid var(--border); cursor: pointer;">
                    <div class="card-header">
                        <div class="card-title">Set dinner table</div>
                        <div class="points-badge">10 pts</div>
                    </div>
                    <div style="font-size: 13px; color: var(--text-secondary); margin-top: 8px;">
                        <i class="far fa-calendar"></i> Daily
                    </div>
                </div>

                <div class="card swap-chore-option" onclick="selectSwapChore(this)" style="border: 2px solid var(--border); cursor: pointer;">
                    <div class="card-header">
                        <div class="card-title">Take out trash</div>
                        <div class="points-badge">15 pts</div>
                    </div>
                    <div style="font-size: 13px; color: var(--text-secondary); margin-top: 8px;">
                        <i class="far fa-calendar"></i> Due Thursday
                    </div>
                </div>

                <div class="incentive-card">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                        <div style="font-size: 24px;"></div>
                        <div style="flex: 1;">
                            <div class="card-title">Sweeten the Deal</div>
                            <div style="font-size: 13px; color: var(--text-secondary); margin-top: 2px;">
                                Offer some of your points to make the trade more appealing
                            </div>
                        </div>
                    </div>
                    <div class="incentive-toggle">
                        <label style="font-size: 15px; font-weight: 500; color: var(--text);">Offer Points Incentive</label>
                        <div id="incentive-toggle" class="toggle-switch" onclick="toggleIncentive()"></div>
                    </div>
                    <div id="incentive-slider-section" class="incentive-slider-section">
                        <input type="range" id="incentive-slider" class="points-slider" min="0" max="20" value="0" oninput="updateIncentivePoints(this.value)">
                        <div class="points-offer-display">
                            <div class="points-offer-value"><span id="incentive-value">0</span> pts</div>
                            <div class="points-offer-label">Offering</div>
                        </div>
                        <div style="font-size: 13px; color: var(--text-secondary); text-align: center; margin-top: 8px;">
                            You have 135 pts - <span id="incentive-value-sub">0</span> pts = <span id="incentive-remaining">135</span> pts remaining
                        </div>
                        <div style="font-size: 12px; color: var(--text-secondary); text-align: center; margin-top: 8px; font-style: italic;">
                            Points transfer to <span id="swap-sibling-name3">Jake</span> when swap is accepted
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="navigateTo('kid-swap-sibling-confirm')">
                    <i class="fas fa-paper-plane"></i> Propose Swap
                </button>
            </div>
        </div>

        <!-- SCREEN 5B-3: KID SWAP SIBLING CONFIRM -->
        <div id="kid-swap-sibling-confirm" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-swap-sibling')"></i>
                <h1>Confirm Swap</h1>
                <p>Review your proposal</p>
            </div>
            <div class="content">
                <div class="swap-summary">
                    <div class="swap-item-label">You give:</div>
                    <div class="swap-item">
                        <div>
                            <div style="font-size: 24px; margin-bottom: 8px;"></div>
                            <div class="swap-item-name">Clean the garage</div>
                        </div>
                        <div class="points-badge">50 pts</div>
                    </div>

                    <div class="swap-arrow"></div>

                    <div class="swap-item-label">You get:</div>
                    <div class="swap-item">
                        <div>
                            <div style="font-size: 24px; margin-bottom: 8px;"></div>
                            <div class="swap-item-name" id="confirm-swap-get-name">Vacuum living room</div>
                        </div>
                        <div class="points-badge" id="confirm-swap-get-pts">30 pts</div>
                    </div>

                    <div id="confirm-incentive-line" style="display: none; font-size: 14px; color: var(--accent); font-weight: 600; margin-top: 16px; text-align: center;">
                        + 10 pts incentive
                    </div>
                </div>

                <button class="btn btn-primary" onclick="submitSwapConfirm()">
                    <i class="fas fa-check"></i> Send to <span id="swap-sibling-name4">Jake</span>
                </button>
            </div>
        </div>

        <!-- SCREEN 5B-4: KID SWAP SIBLING SENT -->
        <div id="kid-swap-sibling-sent" class="screen">
            <div class="success-screen">
                <div class="success-checkmark"></div>
                <div class="success-title">Swap Request Sent!</div>
                <div class="success-subtitle"><span id="swap-sibling-name5">Jake</span> will see this next time he opens Challey</div>
                <div class="success-subtitle">If he accepts, the swap happens automatically and Dad gets notified.</div>
                <div id="sent-incentive-line" class="success-detail" style="display: none;">
                    10 pts will transfer to Jake on acceptance
                </div>
                <button class="btn btn-primary" onclick="navigateTo('kid-chores')" style="margin-bottom: 12px;">
                    <i class="fas fa-arrow-left"></i> Back to My Chores
                </button>
                <button class="btn btn-secondary" onclick="viewIncomingSwap()">
                    <i class="fas fa-eye"></i> Demo: See Jake's View
                </button>
            </div>
        </div>

        <!-- SCREEN 5B-5: KID SWAP INCOMING (Jake's perspective) -->
        <div id="kid-swap-incoming" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-chores')"></i>
                <h1>Incoming Swap</h1>
                <p>From Maggie</p>
            </div>
            <div class="content">
                <div style="text-align: center; margin-bottom: 24px;">
                    <div style="font-size: 48px; margin-bottom: 12px;"></div>
                    <div style="font-size: 18px; font-weight: 600; color: var(--text);">Maggie wants to swap with you!</div>
                </div>

                <div class="incoming-swap-card">
                    <div class="incoming-label">She gives you:</div>
                    <div class="incoming-chore">Clean the garage</div>
                    <div class="incoming-points">50 pts</div>
                </div>

                <div class="incoming-swap-card">
                    <div class="incoming-label">She wants:</div>
                    <div class="incoming-chore">Vacuum living room</div>
                    <div class="incoming-points">30 pts</div>
                </div>

                <div id="incoming-bonus" class="bonus-badge" style="display: none; text-align: center; width: 100%;">
                    + 10 bonus points!
                </div>

                <div style="display: flex; gap: 12px; margin-top: 24px;">
                    <button class="btn btn-outline" onclick="declineSwap()" style="flex: 1;">
                        Decline
                    </button>
                    <button class="btn btn-secondary" onclick="navigateTo('kid-swap-counter')" style="flex: 1;">
                        <i class="fas fa-exchange-alt"></i> Counter
                    </button>
                    <button class="btn btn-success" onclick="acceptSwap()" style="flex: 1;">
                        <i class="fas fa-check"></i> Accept
                    </button>
                </div>
            </div>
        </div>

        <!-- SCREEN: KID SWAP COUNTER OFFER -->
        <div id="kid-swap-counter" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-swap-incoming')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Counter Offer</h1>
                    <p>Propose something different to Maggie</p>
                </div>
            </div>
            <div class="content">
                <div class="card" style="background: var(--bg-light);">
                    <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 4px;">Maggie wants:</div>
                    <div style="font-size: 16px; font-weight: 600; color: var(--text);">Vacuum living room (30 pts)</div>
                </div>

                <div class="section-header" style="margin-top: 20px;">
                    <div class="section-title">Your Counter</div>
                </div>

                <!-- Option 1: Pick a different chore -->
                <div class="card" onclick="document.getElementById('counter-chore-list').style.display='block'; document.getElementById('counter-favor-section').style.display='none';" style="cursor: pointer; border: 2px solid var(--border);">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="font-size: 32px;">&#x1F504;</div>
                        <div>
                            <div class="card-title">Offer a Different Chore</div>
                            <div style="font-size: 13px; color: var(--text-secondary); margin-top: 2px;">Pick from your available chores</div>
                        </div>
                    </div>
                </div>

                <!-- Option 2: Offer a favor -->
                <div class="card" onclick="document.getElementById('counter-favor-section').style.display='block'; document.getElementById('counter-chore-list').style.display='none';" style="cursor: pointer; border: 2px solid var(--border);">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="font-size: 32px;">&#x1F91D;</div>
                        <div>
                            <div class="card-title">Offer a Favor</div>
                            <div style="font-size: 13px; color: var(--text-secondary); margin-top: 2px;">No points  just a promise between siblings</div>
                        </div>
                    </div>
                </div>

                <!-- Chore selection (hidden by default) -->
                <div id="counter-chore-list" style="display: none; margin-top: 16px;">
                    <div class="section-header">
                        <div class="section-title">Your Available Chores</div>
                    </div>
                    <div class="card swap-chore-option" onclick="selectSwapChore(this)" style="border: 2px solid var(--border); cursor: pointer;">
                        <div class="card-header">
                            <div class="card-title">Set dinner table</div>
                            <div class="points-badge">10 pts</div>
                        </div>
                    </div>
                    <div class="card swap-chore-option" onclick="selectSwapChore(this)" style="border: 2px solid var(--border); cursor: pointer;">
                        <div class="card-header">
                            <div class="card-title">Take out trash</div>
                            <div class="points-badge">15 pts</div>
                        </div>
                    </div>
                    <div class="card swap-chore-option" onclick="selectSwapChore(this)" style="border: 2px solid var(--border); cursor: pointer;">
                        <div class="card-header">
                            <div class="card-title">Water the plants</div>
                            <div class="points-badge">10 pts</div>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="navigateTo('kid-swap-counter-sent')">
                        <i class="fas fa-paper-plane"></i> Send Counter Offer
                    </button>
                </div>

                <!-- Favor input (hidden by default) -->
                <div id="counter-favor-section" style="display: none; margin-top: 16px;">
                    <div class="section-header">
                        <div class="section-title">Describe Your Favor</div>
                    </div>
                    <div class="input-group">
                        <textarea placeholder="e.g., I'll let you pick the movie tonight, I'll share my snacks..." style="min-height: 100px;"></textarea>
                    </div>
                    <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px; font-style: italic;">
                        <i class="fas fa-info-circle"></i> Favors are between you and your sibling  not tracked in the app, no points involved.
                    </div>
                    <button class="btn btn-primary" onclick="navigateTo('kid-swap-counter-sent')">
                        <i class="fas fa-paper-plane"></i> Send Favor Offer
                    </button>
                </div>
            </div>
        </div>

        <!-- SCREEN: KID SWAP COUNTER SENT -->
        <div id="kid-swap-counter-sent" class="screen">
            <div class="success-screen">
                <div class="success-checkmark">&#x2713;</div>
                <div class="success-title">Counter Offer Sent!</div>
                <div class="success-subtitle">Maggie will see your counter offer next time she opens Challey.</div>
                <div class="success-subtitle" style="margin-top: 8px;">If she accepts, the swap happens automatically.</div>
                <button class="btn btn-primary" onclick="navigateTo('kid-chores')" style="margin-top: 24px;">
                    <i class="fas fa-arrow-left"></i> Back to My Chores
                </button>
                <button class="btn btn-outline" onclick="navigateTo('kid-swap-counter-received')" style="margin-top: 12px; font-size: 13px;">
                    <i class="fas fa-forward"></i> Demo: Maggie's View
                </button>
            </div>
        </div>

        <!-- SCREEN: KID SWAP COUNTER RECEIVED (Maggie sees Jake's counter) -->
        <div id="kid-swap-counter-received" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-chores')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Counter Offer</h1>
                    <p>Jake has a different idea</p>
                </div>
            </div>
            <div class="content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 48px; margin-bottom: 8px;">&#x1F91D;</div>
                    <div style="font-size: 16px; font-weight: 600; color: var(--text);">Jake countered your swap!</div>
                </div>

                <div class="card" style="background: var(--bg-light);">
                    <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 4px;">You wanted:</div>
                    <div style="font-size: 16px; font-weight: 600; color: var(--text);">Vacuum living room (30 pts)</div>
                </div>

                <div style="text-align: center; font-size: 24px; padding: 8px 0;">&#x2195;&#xFE0F;</div>

                <div class="card" style="background: linear-gradient(135deg, #FFF0F5, #FFE8F0); border: 2px solid var(--secondary);">
                    <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 4px;">Jake offers instead:</div>
                    <div style="display: flex; align-items: center; gap: 12px; margin-top: 8px;">
                        <div style="font-size: 32px;">&#x1F91D;</div>
                        <div>
                            <div style="font-size: 16px; font-weight: 600; color: var(--text);">A Favor</div>
                            <div style="font-size: 14px; color: var(--text-secondary); font-style: italic; margin-top: 4px;">"I'll let you pick the movie tonight"</div>
                        </div>
                    </div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 12px;">
                        <i class="fas fa-info-circle"></i> No points  just a sibling promise
                    </div>
                </div>

                <div style="font-size: 14px; color: var(--text-secondary); text-align: center; margin: 16px 0;">
                    If you accept, <strong>Clean the garage</strong> moves to Jake.
                </div>

                <div style="display: flex; gap: 12px;">
                    <button class="btn btn-outline" onclick="showToast('Swap cancelled'); navigateTo('kid-chores');" style="flex: 1;">
                        Decline
                    </button>
                    <button class="btn btn-success" onclick="createConfetti(); showToast('Favor accepted! Chore moved to Jake.'); setTimeout(function(){ navigateTo('kid-chores'); }, 1500);" style="flex: 1;">
                        <i class="fas fa-check"></i> Accept Favor
                    </button>
                </div>
            </div>
        </div>

        <!-- SCREEN 5B-6: KID SWAP ACCEPTED -->
        <div id="kid-swap-accepted" class="screen">
            <div class="success-screen">
                <div class="success-checkmark"></div>
                <div class="success-title">Swap Complete!</div>
                <div class="success-subtitle">Clean the garage is now yours. Vacuum living room is now Maggie's.</div>
                <div class="success-subtitle">Dad has been notified.</div>
                <div id="accepted-bonus" class="success-detail" style="display: none;">
                    +10 bonus points received!
                </div>
                <button class="btn btn-primary" onclick="navigateTo('kid-chores')">
                    <i class="fas fa-list"></i> Go to My Chores
                </button>
            </div>
        </div>

        <!-- SCREEN 5C-1: KID SWAP PARENT -->
        <div id="kid-swap-parent" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-swap-request')"></i>
                <h1>Request from Dad</h1>
                <p>Ask to change this chore</p>
            </div>
            <div class="content">
                <div class="card">
                    <div class="card-title" style="margin-bottom: 8px;">Instead of:</div>
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 12px;">
                        <div style="font-size: 16px; font-weight: 600; color: var(--text);">Clean the garage</div>
                        <div class="points-badge">50 pts</div>
                    </div>
                </div>

                <div class="section-header" style="margin-top: 24px;">
                    <div class="section-title">Choose an Existing Chore</div>
                </div>

                <div class="card swap-chore-option" onclick="selectParentSwapChore(this)" style="border: 2px solid var(--border); cursor: pointer;">
                    <div class="card-header">
                        <div class="card-title">Help with groceries</div>
                        <div class="points-badge">35 pts</div>
                    </div>
                </div>

                <div class="card swap-chore-option" onclick="selectParentSwapChore(this)" style="border: 2px solid var(--border); cursor: pointer;">
                    <div class="card-header">
                        <div class="card-title">Organize bookshelf</div>
                        <div class="points-badge">20 pts</div>
                    </div>
                </div>

                <div class="card swap-chore-option" onclick="selectParentSwapChore(this)" style="border: 2px solid var(--border); cursor: pointer;">
                    <div class="card-header">
                        <div class="card-title">Wash the car</div>
                        <div class="points-badge">45 pts</div>
                    </div>
                </div>

                <div class="section-header" style="margin-top: 30px;">
                    <div class="section-title">Or Suggest Something New</div>
                </div>

                <div class="input-group">
                    <label>Chore Name</label>
                    <input type="text" id="new-chore-name" placeholder="e.g., Help with garden">
                </div>

                <div class="input-group">
                    <label>Brief Description</label>
                    <textarea id="new-chore-desc" rows="2" placeholder="What does this chore involve?"></textarea>
                </div>

                <div class="input-group">
                    <label>Suggested Points</label>
                    <input type="number" id="new-chore-points" placeholder="e.g., 30">
                </div>

                <button class="btn btn-primary" onclick="submitParentRequest()">
                    <i class="fas fa-paper-plane"></i> Send Request to Dad
                </button>
            </div>
        </div>

        <!-- SCREEN 5C-2: KID SWAP PARENT CONFIRM -->
        <div id="kid-swap-parent-confirm" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-swap-parent')"></i>
                <h1>Confirm Request</h1>
                <p>Review before sending</p>
            </div>
            <div class="content">
                <div class="swap-summary">
                    <div class="swap-item-label">Instead of:</div>
                    <div class="swap-item">
                        <div>
                            <div style="font-size: 24px; margin-bottom: 8px;"></div>
                            <div class="swap-item-name">Clean the garage</div>
                        </div>
                        <div class="points-badge">50 pts</div>
                    </div>

                    <div class="swap-arrow"></div>

                    <div class="swap-item-label">You'd rather do:</div>
                    <div class="swap-item">
                        <div>
                            <div style="font-size: 24px; margin-bottom: 8px;"></div>
                            <div class="swap-item-name" id="parent-confirm-chore-name">Help with groceries</div>
                        </div>
                        <div class="points-badge" id="parent-confirm-chore-pts">35 pts</div>
                    </div>
                </div>

                <div class="input-group" style="margin-top: 20px;">
                    <label>Why do you want this change? (Optional)</label>
                    <textarea id="parent-swap-reason" rows="3" placeholder="This helps Dad understand your request..."></textarea>
                </div>

                <button class="btn btn-primary" onclick="sendParentRequest()">
                    <i class="fas fa-check"></i> Send to Dad
                </button>
            </div>
        </div>

        <!-- SCREEN 5C-3: KID SWAP PARENT SENT -->
        <div id="kid-swap-parent-sent" class="screen">
            <div class="success-screen">
                <div class="success-checkmark"></div>
                <div class="success-title">Request Sent to Dad!</div>
                <div class="success-subtitle">He'll review it and let you know.</div>
                <button class="btn btn-primary" onclick="navigateTo('kid-chores')">
                    <i class="fas fa-arrow-left"></i> Back to My Chores
                </button>
            </div>
        </div>

        <!-- SCREEN 5C-4: PARENT SWAP REVIEW (Dad's perspective) -->
        <div id="parent-swap-review" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('parent-dashboard')"></i>
                <h1>Swap Request</h1>
                <p>From Maggie</p>
            </div>
            <div class="content">
                <div style="text-align: center; margin-bottom: 24px;">
                    <div style="font-size: 48px; margin-bottom: 12px;"></div>
                    <div style="font-size: 18px; font-weight: 600; color: var(--text);">Maggie is asking to change a chore</div>
                </div>

                <div class="incoming-swap-card">
                    <div class="incoming-label">Current chore:</div>
                    <div class="incoming-chore">Clean the garage</div>
                    <div class="incoming-points">50 pts</div>
                </div>

                <div class="incoming-swap-card">
                    <div class="incoming-label">She'd rather do:</div>
                    <div class="incoming-chore">Help with groceries</div>
                    <div class="incoming-points">35 pts</div>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <div class="card-title" style="margin-bottom: 8px;">Maggie's Reason:</div>
                    <div style="font-size: 14px; color: var(--text-secondary); font-style: italic;">
                        "I prefer indoor tasks and the garage is really messy right now."
                    </div>
                </div>

                <div style="display: flex; gap: 12px; margin-top: 24px;">
                    <button class="btn btn-outline" onclick="declineSwapAsParent()" style="flex: 1;">
                        <i class="fas fa-times"></i> Decline
                    </button>
                    <button class="btn btn-success" onclick="approveSwapAsParent()" style="flex: 1;">
                        <i class="fas fa-check"></i> Approve
                    </button>
                </div>

                <div id="parent-decline-reason" class="decline-reason">
                    <div class="input-group">
                        <label>Reason for declining (Optional)</label>
                        <textarea rows="2" placeholder="Let Maggie know why..."></textarea>
                    </div>
                    <button class="btn btn-danger" onclick="sendDecline()">
                        Send Decline
                    </button>
                </div>
            </div>
        </div>

        <!-- SCREEN 6: KID REWARDS SHOP -->
        <div id="kid-rewards" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <div class="role-switcher" onclick="toggleRole()">
                            <i class="fas fa-repeat"></i> <span class="role-text">Switch to Parent</span>
                        </div>
                    </div>
                    <div class="header-top-right">
                        <div class="gear-icon" onclick="navigateTo('kid-settings')"><i class="fas fa-gear"></i></div>
                        <div class="bell-icon" onclick="toggleNotifications()"><i class="fas fa-bell"></i><div class="notification-badge">3</div></div>
                    </div>
                </div>
                <div class="header-title-row">
                    <h1>Rewards Shop</h1>
                    <p style="opacity: 1;"><i class="fas fa-coins" style="color: var(--accent);"></i> 135 pts available</p>
                </div>
            </div>
            <div class="content">
                <!-- Wishlist Section -->
                <div class="section-header">
                    <div class="section-title">My Wishlist</div>
                    <div class="section-action" onclick="navigateTo('kid-add-wish')">+ Add to Wishlist</div>
                </div>
                <div class="wishlist-link-banner" onclick="navigateTo('kid-wishlist')">
                    <i class="fas fa-wand-magic-sparkles" style="font-size: 24px;"></i>
                    <div>
                        <div style="font-weight: 700; font-size: 15px;">View My Wishlist</div>
                        <div style="font-size: 12px; opacity: 0.9;">3 wishes  tap to manage</div>
                    </div>
                    <i class="fas fa-chevron-right" style="margin-left: auto; opacity: 0.7;"></i>
                </div>

                <div class="section-header" style="margin-top: 16px;">
                    <div class="section-title">Available Rewards</div>
                </div>

                <div class="reward-card" data-reward="movie-night" data-cost="50">
                    <div class="reward-icon"></div>
                    <div class="reward-title">Movie Night</div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Family picks movie together</p>
                    <div class="reward-cost">50 points <span style="font-size: 12px; color: var(--text-secondary); font-weight: 400;">($2.50)</span></div>
                    <div class="reward-affordable">You can get this! </div>
                    <div class="reward-card-actions" onclick="event.stopPropagation();">
                        <div style="font-size: 13px; color: var(--text-secondary);"><i class="fas fa-coins" style="color: var(--accent);"></i> 50 pts</div>
                        <button class="reward-add-btn can-add" onclick="toggleCartItem(this, 'Movie Night', 50)"><i class="fas fa-plus"></i> <span class="btn-label-add">Add</span><span class="btn-label-remove">Remove</span></button>
                    </div>
                </div>

                <div class="reward-card" data-reward="gift-card" data-cost="100">
                    <div class="reward-icon"></div>
                    <div class="reward-title">$10 Amazon Gift Card</div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Shop for what you want</p>
                    <div class="reward-cost">100 points <span style="font-size: 12px; color: var(--text-secondary); font-weight: 400;">($5.00)</span></div>
                    <div class="reward-affordable">You can get this! </div>
                    <div class="reward-card-actions" onclick="event.stopPropagation();">
                        <div style="font-size: 13px; color: var(--text-secondary);"><i class="fas fa-coins" style="color: var(--accent);"></i> 100 pts</div>
                        <button class="reward-add-btn can-add" onclick="toggleCartItem(this, '$10 Gift Card', 100)"><i class="fas fa-plus"></i> <span class="btn-label-add">Add</span><span class="btn-label-remove">Remove</span></button>
                    </div>
                </div>

                <div class="reward-card" data-reward="screen-time" data-cost="30">
                    <div class="reward-icon"></div>
                    <div class="reward-title">Extra 30 min Screen Time</div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">One night bonus time</p>
                    <div class="reward-cost">30 points <span style="font-size: 12px; color: var(--text-secondary); font-weight: 400;">($1.50)</span></div>
                    <div class="reward-affordable">You can get this! </div>
                    <div class="reward-card-actions" onclick="event.stopPropagation();">
                        <div style="font-size: 13px; color: var(--text-secondary);"><i class="fas fa-coins" style="color: var(--accent);"></i> 30 pts</div>
                        <button class="reward-add-btn can-add" onclick="toggleCartItem(this, 'Screen Time', 30)"><i class="fas fa-plus"></i> <span class="btn-label-add">Add</span><span class="btn-label-remove">Remove</span></button>
                    </div>
                </div>

                <div class="reward-card" data-reward="dinner" data-cost="40">
                    <div class="reward-icon"></div>
                    <div class="reward-title">Choose Dinner Menu</div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Pick what we eat tonight</p>
                    <div class="reward-cost">40 points <span style="font-size: 12px; color: var(--text-secondary); font-weight: 400;">($2.00)</span></div>
                    <div class="reward-affordable">You can get this! </div>
                    <div class="reward-card-actions" onclick="event.stopPropagation();">
                        <div style="font-size: 13px; color: var(--text-secondary);"><i class="fas fa-coins" style="color: var(--accent);"></i> 40 pts</div>
                        <button class="reward-add-btn can-add" onclick="toggleCartItem(this, 'Choose Dinner', 40)"><i class="fas fa-plus"></i> <span class="btn-label-add">Add</span><span class="btn-label-remove">Remove</span></button>
                    </div>
                </div>

                <div class="reward-card" data-reward="sleepover" data-cost="150">
                    <div class="reward-icon"></div>
                    <div class="reward-title">Sleepover with Friend</div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Invite a friend over</p>
                    <div class="reward-cost">150 points <span style="font-size: 12px; color: var(--text-secondary); font-weight: 400;">($7.50)</span></div>
                    <div class="reward-nudge">15 points away!</div>
                    <div class="reward-card-actions" onclick="event.stopPropagation();">
                        <div style="font-size: 13px; color: var(--text-secondary);"><i class="fas fa-coins" style="color: var(--accent);"></i> 150 pts</div>
                        <button class="reward-add-btn disabled" disabled><i class="fas fa-lock"></i> <span>Not enough pts</span></button>
                    </div>
                </div>

                <div class="reward-card" data-reward="book" data-cost="80">
                    <div class="reward-icon"></div>
                    <div class="reward-title">New Book</div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Pick any book you want</p>
                    <div class="reward-cost">80 points <span style="font-size: 12px; color: var(--text-secondary); font-weight: 400;">($4.00)</span></div>
                    <div class="reward-affordable">You can get this! </div>
                    <div class="reward-card-actions" onclick="event.stopPropagation();">
                        <div style="font-size: 13px; color: var(--text-secondary);"><i class="fas fa-coins" style="color: var(--accent);"></i> 80 pts</div>
                        <button class="reward-add-btn can-add" onclick="toggleCartItem(this, 'New Book', 80)"><i class="fas fa-plus"></i> <span class="btn-label-add">Add</span><span class="btn-label-remove">Remove</span></button>
                    </div>
                </div>

                <div class="reward-card" data-reward="skip-chore" data-cost="75">
                    <div class="reward-icon"></div>
                    <div class="reward-title">Skip One Chore Pass</div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Use wisely!</p>
                    <div class="reward-cost">75 points <span style="font-size: 12px; color: var(--text-secondary); font-weight: 400;">($3.75)</span></div>
                    <div class="reward-affordable">You can get this! </div>
                    <div class="reward-card-actions" onclick="event.stopPropagation();">
                        <div style="font-size: 13px; color: var(--text-secondary);"><i class="fas fa-coins" style="color: var(--accent);"></i> 75 pts</div>
                        <button class="reward-add-btn can-add" onclick="toggleCartItem(this, 'Skip Chore Pass', 75)"><i class="fas fa-plus"></i> <span class="btn-label-add">Add</span><span class="btn-label-remove">Remove</span></button>
                    </div>
                </div>

                <div class="reward-card" data-reward="ice-cream" data-cost="60">
                    <div class="reward-icon"></div>
                    <div class="reward-title">Ice Cream Trip</div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Visit your favorite spot</p>
                    <div class="reward-cost">60 points <span style="font-size: 12px; color: var(--text-secondary); font-weight: 400;">($3.00)</span></div>
                    <div class="reward-affordable">You can get this! </div>
                    <div class="reward-card-actions" onclick="event.stopPropagation();">
                        <div style="font-size: 13px; color: var(--text-secondary);"><i class="fas fa-coins" style="color: var(--accent);"></i> 60 pts</div>
                        <button class="reward-add-btn can-add" onclick="toggleCartItem(this, 'Ice Cream Trip', 60)"><i class="fas fa-plus"></i> <span class="btn-label-add">Add</span><span class="btn-label-remove">Remove</span></button>
                    </div>
                </div>

                <!-- Spacer for cart bar -->
                <div style="height: 80px;"></div>
            </div>

            <!-- Floating Cart Bar -->
            <div class="reward-cart-bar" id="reward-cart-bar">
                <div class="cart-info">
                    <div class="cart-count" id="cart-count">0 items</div>
                    <div class="cart-total" id="cart-total">0 pts total</div>
                    <div class="cart-remaining" id="cart-remaining">135 pts left</div>
                </div>
                <button class="cart-checkout-btn" onclick="checkoutCart()">Redeem All</button>
            </div>
            <div class="bottom-nav kid-nav">
                <div class="nav-item" onclick="navigateTo('kid-chores')">
                    <i class="fas fa-list-check"></i>
                    <span>Chores</span>
                </div>
                <div class="nav-item active" onclick="navigateTo('kid-rewards')">
                    <i class="fas fa-gift"></i>
                    <span>Rewards</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-points')">
                    <i class="fas fa-coins"></i>
                    <span>Points</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-board')">
                    <i class="fas fa-trophy"></i>
                    <span>Board</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-living-room')">
                    <i class="fas fa-couch"></i>
                    <span>Living Room</span>
                </div>
            </div>
        </div>

        <!-- SCREEN 7: KID REWARD DETAIL -->
        <div id="kid-reward-detail" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-rewards')"></i>
                <h1>Reward Details</h1>
                <p>Ready to redeem?</p>
            </div>
            <div class="content">
                <div class="card" style="text-align: center; padding: 40px 20px;">
                    <div style="font-size: 80px; margin-bottom: 20px;"></div>
                    <div style="font-size: 24px; font-weight: 700; color: var(--text); margin-bottom: 12px;">Movie Night</div>
                    <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6; margin-bottom: 20px;">
                        The whole family picks a movie together and watches it on Friday or Saturday night. Popcorn included!
                    </p>
                    <div style="font-size: 36px; font-weight: 700; color: var(--accent); margin-bottom: 20px;">50 points</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">
                        You have <strong style="color: var(--secondary);">135 points</strong> available
                    </div>
                </div>

                <button class="btn btn-primary" onclick="redeemReward()">
                    <i class="fas fa-star"></i> Redeem Now
                </button>
                <button class="btn btn-secondary" onclick="navigateTo('kid-rewards')" style="margin-top: 12px;">
                    Go Back
                </button>
            </div>
        </div>

        <!-- SCREEN 7B: KID WISHLIST -->
        <div id="kid-wishlist" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-rewards')"></i>
                <h1>My Wishlist</h1>
                <p>Things I'd love to have!</p>
            </div>
            <div class="content">
                <div class="wishlist-item">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div style="font-size: 16px; font-weight: 600; color: var(--text);">Nintendo Switch Game</div>
                        <span class="wishlist-status wishlist-approved">Approved </span>
                    </div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Super Mario Wonder  it looks so fun!</p>
                    <div style="display: flex; gap: 6px; align-items: center;">
                        <span class="occasion-tag occasion-birthday"> Birthday</span>
                        <span style="font-size: 12px; color: var(--text-secondary);">~$50</span>
                    </div>
                </div>

                <div class="wishlist-item">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div style="font-size: 16px; font-weight: 600; color: var(--text);">Art Supply Kit</div>
                        <span class="wishlist-status wishlist-approved">Approved </span>
                    </div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Professional colored pencils and sketchbook</p>
                    <div style="display: flex; gap: 6px; align-items: center;">
                        <span class="occasion-tag occasion-christmas"> Christmas</span>
                        <span style="font-size: 12px; color: var(--text-secondary);">~$35</span>
                    </div>
                </div>

                <div class="wishlist-item">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div style="font-size: 16px; font-weight: 600; color: var(--text);">Bluetooth Speaker</div>
                        <span class="wishlist-status wishlist-pending">Pending</span>
                    </div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Small waterproof one for my room</p>
                    <div style="display: flex; gap: 6px; align-items: center;">
                        <span class="occasion-tag occasion-anytime"> Anytime</span>
                        <span style="font-size: 12px; color: var(--text-secondary);">~$25</span>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="navigateTo('kid-add-wish')" style="margin-top: 12px;">
                    <i class="fas fa-plus"></i> Add a Wish
                </button>
            </div>
        </div>

        <!-- SCREEN 7C: KID ADD WISH -->
        <div id="kid-add-wish" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-wishlist')"></i>
                <h1>Add a Wish</h1>
                <p>What do you want?</p>
            </div>
            <div class="content">
                <div class="input-group">
                    <label>What do you want?</label>
                    <input type="text" placeholder="e.g., Nintendo Switch Game">
                </div>

                <div class="input-group">
                    <label>Why do you want it?</label>
                    <textarea rows="3" placeholder="Tell your parents why this would be awesome!"></textarea>
                </div>

                <div class="input-group">
                    <label>Approximate Price</label>
                    <input type="text" placeholder="e.g., $50">
                </div>

                <div class="input-group">
                    <label>Link (optional)</label>
                    <input type="url" placeholder="Paste a link to the item">
                </div>

                <div class="input-group">
                    <label>Tag an Occasion</label>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <div class="kid-chip selected" onclick="this.classList.toggle('selected')"> Birthday</div>
                        <div class="kid-chip" onclick="this.classList.toggle('selected')"> Christmas</div>
                        <div class="kid-chip" onclick="this.classList.toggle('selected')"> Holiday</div>
                        <div class="kid-chip" onclick="this.classList.toggle('selected')"> Anytime</div>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="navigateTo('kid-wishlist')">
                    <i class="fas fa-wand-magic-sparkles"></i> Add to Wishlist
                </button>
            </div>
        </div>

        <!-- SCREEN 7D: KID CASH-OUT -->
        <div id="kid-cashout" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-rewards')"></i>
                <h1>Cash Out</h1>
                <p>Turn points into cash</p>
            </div>
            <div class="content">
                <div class="stat-card">
                    <div class="stat-value">135</div>
                    <div class="stat-label">Points Available</div>
                </div>

                <div class="section-header">
                    <div class="section-title">Select Amount</div>
                </div>

                <div class="cashout-btn" onclick="selectCashout(this, 1, 20)">
                    <div style="font-size: 24px; font-weight: 700; color: #28a745; margin-bottom: 4px;">$1.00</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">20 points</div>
                </div>

                <div class="cashout-btn selected" onclick="selectCashout(this, 5, 100)">
                    <div style="font-size: 24px; font-weight: 700; color: #28a745; margin-bottom: 4px;">$5.00</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">100 points</div>
                </div>

                <div class="cashout-btn disabled">
                    <div style="font-size: 24px; font-weight: 700; color: var(--text-secondary); margin-bottom: 4px;">$10.00</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">200 points  Not enough points</div>
                </div>

                <div class="cashout-btn disabled">
                    <div style="font-size: 24px; font-weight: 700; color: var(--text-secondary); margin-bottom: 4px;">$25.00</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">500 points  Not enough points</div>
                </div>

                <button class="btn btn-success" onclick="processCashout()" style="margin-top: 20px;">
                    <i class="fas fa-dollar-sign"></i> Cash Out $<span id="cashout-amount">5.00</span>
                </button>
            </div>
        </div>

        <!-- SCREEN 7E: KID CASH-OUT SUCCESS -->
        <div id="kid-cashout-success" class="screen">
            <div class="success-screen">
                <div class="success-checkmark"></div>
                <div class="success-title">Cash Out Requested!</div>
                <div style="font-size: 28px; font-weight: 700; color: #28a745; margin: 16px 0;">
                    $<span id="success-cashout-amount">5.00</span> (100 pts)
                </div>
                <div class="success-subtitle">Dad will hand you the cash. We'll remind him!</div>
                <button class="btn btn-primary" onclick="navigateTo('kid-rewards')" style="margin-top: 24px;">
                    Back to Rewards
                </button>
            </div>
        </div>

        <!-- SCREEN 8: KID POINTS -->
        <div id="kid-points" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <div class="role-switcher" onclick="toggleRole()">
                            <i class="fas fa-repeat"></i> <span class="role-text">Switch to Parent</span>
                        </div>
                    </div>
                    <div class="header-top-right">
                        <div class="gear-icon" onclick="navigateTo('kid-settings')"><i class="fas fa-gear"></i></div>
                        <div class="bell-icon" onclick="toggleNotifications()"><i class="fas fa-bell"></i><div class="notification-badge">3</div></div>
                    </div>
                </div>
                <div class="header-title-row">
                    <h1>My Points</h1>
                    <p>Track your earnings</p>
                </div>
            </div>
            <div class="content">
                <div class="stat-card">
                    <div class="stat-value">135</div>
                    <div class="stat-label">Current Balance</div>
                </div>

                <!-- Cash-out section -->
                <div class="card" style="background: linear-gradient(135deg, #d4edda, #c3e6cb); cursor: pointer;" onclick="navigateTo('kid-cashout-confirm')">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div>
                            <div style="font-size: 15px; font-weight: 600; color: #155724;">Your points are worth $6.75</div>
                            <div style="font-size: 13px; color: #28a745;">100 pts = $5.00</div>
                        </div>
                        <button class="btn btn-success" style="width: auto; padding: 10px 20px; font-size: 14px;" onclick="event.stopPropagation(); navigateTo('kid-cashout-confirm')">
                            <i class="fas fa-dollar-sign"></i> Cash Out
                        </button>
                    </div>
                </div>

                <!-- Pending Cash-Out Status Card -->
                <div class="card" style="background: linear-gradient(135deg, #FFF3CD, #FFE8A1); cursor: pointer; border: 2px solid #FFD700;" onclick="navigateTo('kid-cashout-pending')">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="font-size: 28px;"></div>
                        <div style="flex: 1;">
                            <div style="font-size: 15px; font-weight: 700; color: #856404;">Pending Cash-Out: $5.00</div>
                            <div style="font-size: 12px; color: #856404;">Waiting for Dad to confirm  Tap to check status</div>
                        </div>
                        <i class="fas fa-chevron-right" style="color: #856404;"></i>
                    </div>
                </div>

                <div class="stat-grid">
                    <div class="mini-stat">
                        <div class="mini-stat-value">85</div>
                        <div class="mini-stat-label">Earned This Week</div>
                    </div>
                    <div class="mini-stat">
                        <div class="mini-stat-value">235</div>
                        <div class="mini-stat-label">Earned This Month</div>
                    </div>
                    <div class="mini-stat">
                        <div class="mini-stat-value">100</div>
                        <div class="mini-stat-label">Spent This Month</div>
                    </div>
                    <div class="mini-stat">
                        <div class="mini-stat-value">7</div>
                        <div class="mini-stat-label">Day Streak</div>
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-title">Recent Activity</div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div style="font-size: 14px; color: #28a745;">
                            <i class="fas fa-plus-circle"></i> Earned
                        </div>
                        <div style="font-size: 16px; font-weight: 700; color: #28a745;">+40 pts</div>
                    </div>
                    <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">Vacuum living room</div>
                    <div class="reaction-display">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <div style="font-size: 12px; color: #999; margin-top: 4px;">2 days ago</div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div style="font-size: 14px; color: #dc3545;">
                            <i class="fas fa-minus-circle"></i> Spent
                        </div>
                        <div style="font-size: 16px; font-weight: 700; color: #dc3545;">-50 pts</div>
                    </div>
                    <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">Redeemed: Movie Night</div>
                    <div style="font-size: 12px; color: #999;">3 days ago</div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div style="font-size: 14px; color: #28a745;">
                            <i class="fas fa-plus-circle"></i> Earned
                        </div>
                        <div style="font-size: 16px; font-weight: 700; color: #28a745;">+25 pts</div>
                    </div>
                    <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">Clean your room</div>
                    <div class="reaction-display">
                        <span></span>
                        <span></span>
                    </div>
                    <div style="font-size: 12px; color: #999; margin-top: 4px;">5 days ago</div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div style="font-size: 14px; color: #dc3545;">
                            <i class="fas fa-minus-circle"></i> Spent
                        </div>
                        <div style="font-size: 16px; font-weight: 700; color: #dc3545;">-30 pts</div>
                    </div>
                    <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">Redeemed: Extra Screen Time</div>
                    <div style="font-size: 12px; color: #999;">1 week ago</div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div style="font-size: 14px; color: #28a745;">
                            <i class="fas fa-plus-circle"></i> Earned
                        </div>
                        <div style="font-size: 16px; font-weight: 700; color: #28a745;">+20 pts</div>
                    </div>
                    <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 4px;">Walk the dog</div>
                    <div class="reaction-display">
                        <span></span>
                    </div>
                    <div style="font-size: 12px; color: #999; margin-top: 4px;">1 week ago</div>
                </div>
            </div>
            <div class="bottom-nav kid-nav">
                <div class="nav-item" onclick="navigateTo('kid-chores')">
                    <i class="fas fa-list-check"></i>
                    <span>Chores</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-rewards')">
                    <i class="fas fa-gift"></i>
                    <span>Rewards</span>
                </div>
                <div class="nav-item active" onclick="navigateTo('kid-points')">
                    <i class="fas fa-coins"></i>
                    <span>Points</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-board')">
                    <i class="fas fa-trophy"></i>
                    <span>Board</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-living-room')">
                    <i class="fas fa-couch"></i>
                    <span>Living Room</span>
                </div>
            </div>
        </div>

        <!-- SCREEN: KID BOARD (restructured from Leaderboard) -->
        <div id="kid-board" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <div class="role-switcher" onclick="toggleRole()">
                            <i class="fas fa-repeat"></i> <span class="role-text">Switch to Parent</span>
                        </div>
                    </div>
                    <div class="header-top-right">
                        <div class="gear-icon" onclick="navigateTo('kid-settings')"><i class="fas fa-gear"></i></div>
                        <div class="bell-icon" onclick="toggleNotifications()"><i class="fas fa-bell"></i><div class="notification-badge">3</div></div>
                    </div>
                </div>
                <div class="header-title-row">
                    <h1>My Board</h1>
                    <p>Your badges, rankings & more</p>
                </div>
            </div>
            <div class="content">
                <!-- My Swag Section -->
                <div class="section-header">
                    <div class="section-title">My Swag</div>
                </div>
                <div class="swag-section">
                    <div class="swag-profile">M</div>
                    <div class="swag-badges">
                        <div class="swag-badge" style="background: linear-gradient(135deg, #FFD700, #FFA500);"></div>
                        <div class="swag-badge" style="background: linear-gradient(135deg, #FF69B4, #D63384);"></div>
                        <div class="swag-badge" style="background: linear-gradient(135deg, #39D353, #28a745);"></div>
                        <div class="swag-badge" style="background: linear-gradient(135deg, #58A6FF, #2E86AB);"></div>
                        <div class="swag-badge" style="background: linear-gradient(135deg, #FF6B9D, #FEC163);"></div>
                    </div>
                </div>

                <!-- Spotlight -->
                <div class="section-header">
                    <div class="section-title">Spotlight</div>
                </div>
                <div class="spotlight-card">
                    <div style="font-size: 36px; margin-bottom: 8px;"></div>
                    <div style="font-size: 18px; font-weight: 700;">This Week's MVP: Maggie</div>
                    <div style="font-size: 14px; opacity: 0.9; margin-top: 4px;">85 pts earned!</div>
                </div>

                <!-- Family Rankings -->
                <div class="section-header">
                    <div class="section-title">Family Rankings</div>
                </div>
                <div class="leaderboard-item" onclick="navigateTo('kid-board')" style="border: 2px solid var(--accent);">
                    <div class="leaderboard-rank"></div>
                    <div class="leaderboard-avatar">M</div>
                    <div class="leaderboard-info">
                        <div class="leaderboard-name">Maggie (You!)</div>
                        <div style="font-size: 13px; color: var(--text-secondary);">7 day streak </div>
                    </div>
                    <div class="leaderboard-points">85 pts</div>
                </div>
                <div class="leaderboard-item" onclick="navigateTo('sibling-profile')" style="cursor: pointer;">
                    <div class="leaderboard-rank"></div>
                    <div class="leaderboard-avatar">L</div>
                    <div class="leaderboard-info">
                        <div class="leaderboard-name">Lily</div>
                        <div style="font-size: 13px; color: var(--text-secondary);">5 day streak </div>
                    </div>
                    <div class="leaderboard-points">65 pts</div>
                </div>
                <div class="leaderboard-item" onclick="navigateTo('sibling-profile')" style="cursor: pointer;">
                    <div class="leaderboard-rank"></div>
                    <div class="leaderboard-avatar">J</div>
                    <div class="leaderboard-info">
                        <div class="leaderboard-name">Jake</div>
                        <div style="font-size: 13px; color: var(--text-secondary);">3 day streak </div>
                    </div>
                    <div class="leaderboard-points">50 pts</div>
                </div>

                <!-- Send Shout-Out -->
                <div class="shoutout-banner" onclick="navigateTo('kid-shoutout-select')">
                    <div style="font-size: 32px;"></div>
                    <div style="flex: 1;">
                        <div style="font-weight: 700; font-size: 16px;">Give a Shout-Out</div>
                        <div style="font-size: 13px; opacity: 0.9;">Show your sibling some love</div>
                    </div>
                    <i class="fas fa-chevron-right" style="opacity: 0.7;"></i>
                </div>
            </div>
            <div class="bottom-nav kid-nav">
                <div class="nav-item" onclick="navigateTo('kid-chores')"><i class="fas fa-list-check"></i><span>Chores</span></div>
                <div class="nav-item" onclick="navigateTo('kid-rewards')"><i class="fas fa-gift"></i><span>Rewards</span></div>
                <div class="nav-item" onclick="navigateTo('kid-points')"><i class="fas fa-coins"></i><span>Points</span></div>
                <div class="nav-item active" onclick="navigateTo('kid-board')"><i class="fas fa-trophy"></i><span>Board</span></div>
                <div class="nav-item" onclick="navigateTo('kid-living-room')"><i class="fas fa-couch"></i><span>Living Room</span></div>
            </div>
        </div>

        <!-- SCREEN: SIBLING PROFILE -->
        <div id="sibling-profile" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-board')"></i>
                <h1>Jake's Profile</h1>
                <p>Your brother</p>
            </div>
            <div class="content">
                <div class="sibling-profile-header">
                    <div class="sibling-profile-avatar">J</div>
                    <h2 style="font-size: 22px; color: var(--text);">Jake</h2>
                    <p style="font-size: 14px; color: var(--text-secondary);">Age 10</p>
                </div>
                <div class="section-header"><div class="section-title">Badges</div></div>
                <div class="swag-section" style="justify-content: center;">
                    <div class="swag-badges">
                        <div class="swag-badge" style="background: linear-gradient(135deg, #FFD700, #FFA500);"></div>
                        <div class="swag-badge" style="background: linear-gradient(135deg, #39D353, #28a745);"></div>
                        <div class="swag-badge" style="background: linear-gradient(135deg, #58A6FF, #2E86AB);"></div>
                    </div>
                </div>
                <div class="stat-grid">
                    <div class="mini-stat"><div class="mini-stat-value">3</div><div class="mini-stat-label">Day Streak</div></div>
                    <div class="mini-stat"><div class="mini-stat-value">70</div><div class="mini-stat-label">Points This Month</div></div>
                    <div class="mini-stat"><div class="mini-stat-value">24</div><div class="mini-stat-label">Chores Completed</div></div>
                    <div class="mini-stat"><div class="mini-stat-value">5</div><div class="mini-stat-label">Shout-Outs</div></div>
                </div>
                <button class="btn" onclick="navigateTo('kid-shoutout-select')" style="background: linear-gradient(135deg, #FF69B4, #E74C3C); color: white; margin-top: 16px;">
                    <i class="fas fa-heart"></i> Give a Shout-Out
                </button>
            </div>
        </div>

        <!-- SCREEN: KID SHOUT-OUT - SELECT SIBLING -->
        <div id="kid-shoutout-select" class="screen">
            <div class="header" style="background: linear-gradient(135deg, #FF69B4, #E74C3C);">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-board')"></i>
                <h1>Give a Shout-Out</h1>
                <p>Who do you want to celebrate?</p>
            </div>
            <div class="content">
                <div style="text-align: center; margin-bottom: 24px;">
                    <div style="font-size: 48px; margin-bottom: 8px;"></div>
                    <p style="font-size: 15px; color: var(--text-secondary); line-height: 1.5;">
                        Did your sibling do something awesome?<br>Give them a badge and let the whole family know!
                    </p>
                </div>

                <div class="shoutout-sibling-card" onclick="startShoutout('Jake')">
                    <div class="kid-avatar" style="width: 56px; height: 56px; font-size: 22px;">J</div>
                    <div class="sibling-info">
                        <div class="sibling-name">Jake</div>
                        <div class="sibling-age">Age 10</div>
                    </div>
                    <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                </div>

                <div class="shoutout-sibling-card" onclick="startShoutout('Lily')">
                    <div class="kid-avatar" style="width: 56px; height: 56px; font-size: 22px;">L</div>
                    <div class="sibling-info">
                        <div class="sibling-name">Lily</div>
                        <div class="sibling-age">Age 8</div>
                    </div>
                    <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                </div>
            </div>
        </div>

        <!-- SCREEN: KID SHOUT-OUT - CREATE -->
        <div id="kid-shoutout-create" class="screen">
            <div class="header" style="background: linear-gradient(135deg, #FF69B4, #E74C3C);">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-shoutout-select')"></i>
                <h1>Shout-Out for <span id="shoutout-target-name">Jake</span></h1>
                <p>Pick a badge and tell them why</p>
            </div>
            <div class="content">
                <div class="input-group">
                    <label>Choose a Badge</label>
                </div>
                <div class="badges-grid" style="margin-bottom: 20px;">
                    <div class="shoutout-badge-option" onclick="selectShoutoutBadge(this, 'Amazing Sibling', '')">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #FFD700, #FFA500);"></div>
                            <div class="badge-label">Amazing Sibling</div>
                        </div>
                    </div>
                    <div class="shoutout-badge-option" onclick="selectShoutoutBadge(this, 'Kind Heart', '')">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #E74C3C, #C0392B);"></div>
                            <div class="badge-label">Kind Heart</div>
                        </div>
                    </div>
                    <div class="shoutout-badge-option" onclick="selectShoutoutBadge(this, 'Best Helper', '')">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #1ABC9C, #16A085);"></div>
                            <div class="badge-label">Best Helper</div>
                        </div>
                    </div>
                    <div class="shoutout-badge-option" onclick="selectShoutoutBadge(this, 'So Funny', '')">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #FF6B35, #E65100);"></div>
                            <div class="badge-label">So Funny</div>
                        </div>
                    </div>
                    <div class="shoutout-badge-option" onclick="selectShoutoutBadge(this, 'Super Brave', '')">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #F39C12, #D35400);"></div>
                            <div class="badge-label">Super Brave</div>
                        </div>
                    </div>
                    <div class="shoutout-badge-option" onclick="selectShoutoutBadge(this, 'Team Player', '')">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #9B59B6, #6C3483);"></div>
                            <div class="badge-label">Team Player</div>
                        </div>
                    </div>
                </div>

                <div class="input-group">
                    <label>What did they do?</label>
                    <textarea id="shoutout-note" rows="3" placeholder="e.g., Jake helped me carry the groceries without me even asking! He's the best little brother."></textarea>
                </div>

                <div class="shoutout-points-section">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                        <div>
                            <div style="font-weight: 600; color: var(--text);">Gift Points</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Share some of your points</div>
                        </div>
                        <div id="shoutout-toggle" class="toggle-switch" onclick="toggleShoutoutPoints()"></div>
                    </div>
                    <div id="shoutout-points-slider-section" class="incentive-slider-section">
                        <div class="points-offer-display">
                            <div class="points-offer-value" style="color: #FF69B4;" id="shoutout-points-value">5</div>
                            <div class="points-offer-label">points to gift</div>
                        </div>
                        <input type="range" class="shoutout-points-slider" min="1" max="25" value="5" oninput="updateShoutoutPoints(this.value)">
                        <div style="display: flex; justify-content: space-between; font-size: 12px; color: var(--text-secondary);">
                            <span>1 pt</span>
                            <span>You have 135 pts &middot; <span id="shoutout-remaining">130</span> remaining</span>
                            <span>25 pts</span>
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="navigateTo('kid-shoutout-confirm')" style="background: linear-gradient(135deg, #FF69B4, #E74C3C); color: white; margin-top: 12px;">
                    <i class="fas fa-heart"></i> Preview Shout-Out
                </button>
            </div>
        </div>

        <!-- SCREEN: KID SHOUT-OUT - CONFIRM -->
        <div id="kid-shoutout-confirm" class="screen">
            <div class="header" style="background: linear-gradient(135deg, #FF69B4, #E74C3C);">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-shoutout-create')"></i>
                <h1>Preview</h1>
                <p>Here's what they'll see</p>
            </div>
            <div class="content">
                <div class="shoutout-preview">
                    <div style="font-size: 48px; margin-bottom: 12px;"></div>
                    <div style="font-size: 13px; color: #999; text-transform: uppercase; letter-spacing: 1px;">Shout-Out from Maggie</div>
                    <div style="font-size: 22px; font-weight: 700; color: var(--text); margin: 8px 0;" id="confirm-shoutout-target">To Jake</div>
                    <div class="shoutout-badge-display" style="margin: 12px auto;" id="confirm-shoutout-badge">
                        <span></span>
                        <span style="font-weight: 600;">Amazing Sibling</span>
                    </div>
                    <div class="shoutout-note" id="confirm-shoutout-note">"Jake helped me carry the groceries without me even asking!"</div>
                    <div id="confirm-shoutout-points" style="font-size: 16px; font-weight: 700; color: #FF69B4; margin-top: 8px;">
                        + 5 pts gifted
                    </div>
                </div>

                <div style="text-align: center; margin-bottom: 20px;">
                    <p style="font-size: 14px; color: var(--text-secondary);">
                        <i class="fas fa-eye"></i> Dad and Mom will also see this and can reward you both with extra points!
                    </p>
                </div>

                <button class="btn" onclick="sendShoutout()" style="background: linear-gradient(135deg, #FF69B4, #E74C3C); color: white;">
                    <i class="fas fa-paper-plane"></i> Send Shout-Out
                </button>
            </div>
        </div>

        <!-- SCREEN: KID SHOUT-OUT - SENT -->
        <div id="kid-shoutout-sent" class="screen">
            <div class="success-screen" style="background: linear-gradient(135deg, #FFF0F5, #FFE4E1);">
                <div class="success-checkmark" style="background: linear-gradient(135deg, #FF69B4, #E74C3C);"></div>
                <div class="success-title">Shout-Out Sent!</div>
                <div class="success-subtitle">Dad will review and deliver your shout-out!</div>
                <div id="sent-shoutout-points" class="success-detail" style="color: #FF69B4;">
                    5 pts gifted from your balance
                </div>
                <div class="success-subtitle" style="font-size: 13px; margin-bottom: 24px;">
                    Dad can boost it with extra points and add a comment before <span id="sent-shoutout-target">Jake</span> sees it
                </div>
                <button class="btn btn-primary" onclick="navigateTo('kid-living-room')" style="margin-bottom: 12px;">
                    <i class="fas fa-couch"></i> Back to Living Room
                </button>
            </div>
        </div>

        <!-- SCREEN: KID SHOUT-OUT - RECEIVED (Jake's perspective) -->
        <div id="kid-shoutout-received" class="screen">
            <div class="header" style="background: linear-gradient(135deg, #FF69B4, #E74C3C);">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-living-room')"></i>
                <h1>Shout-Out!</h1>
                <p>Someone thinks you're awesome</p>
            </div>
            <div class="content">
                <div class="shoutout-received-card">
                    <div class="shoutout-from">
                        <div class="shoutout-from-avatar">M</div>
                        <div>
                            <div style="font-size: 18px; font-weight: 700; color: var(--text);">From Maggie</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Your big sister</div>
                        </div>
                    </div>

                    <div style="text-align: center; margin: 16px 0;">
                        <div class="shoutout-badge-display" style="font-size: 15px; padding: 10px 20px;">
                            <span style="font-size: 24px;"></span>
                            <span style="font-weight: 700;">Amazing Sibling</span>
                        </div>
                    </div>

                    <div class="shoutout-note">
                        "Jake helped me carry the groceries without me even asking! He's the best little brother."
                    </div>

                    <div style="text-align: center; margin-top: 16px;">
                        <div style="font-size: 28px; font-weight: 700; color: #FF69B4;">+5 pts</div>
                        <div style="font-size: 13px; color: var(--text-secondary);">gifted from Maggie</div>
                    </div>
                </div>

                <div class="card" style="text-align: center; background: #FFF8DC;">
                    <div style="font-size: 32px; margin-bottom: 8px;"></div>
                    <div style="font-size: 15px; font-weight: 600; color: var(--text); margin-bottom: 4px;">Dad boosted this!</div>
                    <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">"This is what family is all about. So proud of you both."</div>
                    <div style="font-size: 20px; font-weight: 700; color: var(--accent);">+10 bonus pts each</div>
                </div>

                <button class="btn btn-thank-you" onclick="thankYouShoutout()" style="margin-top: 16px;">
                    <i class="fas fa-heart"></i> Thank You!
                </button>

                <button class="btn" onclick="navigateTo('kid-shoutout-select')" style="background: linear-gradient(135deg, #FF69B4, #E74C3C); color: white; margin-top: 12px;">
                    <i class="fas fa-heart"></i> Give a Shout-Out Back
                </button>
            </div>
        </div>

        <!-- SCREEN: PARENT SHOUT-OUT REVIEW -->
        <div id="parent-shoutout-review" class="screen">
            <div class="header" style="background: linear-gradient(135deg, #FF69B4, #E74C3C);">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('parent-dashboard')"></i>
                <h1>Sibling Shout-Out</h1>
                <p>Your kids are being kind</p>
            </div>
            <div class="content">
                <div class="shoutout-received-card">
                    <div class="shoutout-from">
                        <div class="shoutout-from-avatar">M</div>
                        <div>
                            <div style="font-size: 18px; font-weight: 700; color: var(--text);">Maggie  Jake</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">1 hour ago</div>
                        </div>
                    </div>

                    <div style="text-align: center; margin: 12px 0;">
                        <div class="shoutout-badge-display" style="font-size: 15px; padding: 10px 20px;">
                            <span style="font-size: 24px;"></span>
                            <span style="font-weight: 700;">Amazing Sibling</span>
                        </div>
                    </div>

                    <div class="shoutout-note">
                        "Jake helped me carry the groceries without me even asking! He's the best little brother."
                    </div>

                    <div style="text-align: center; margin-top: 12px; font-size: 14px; color: #FF69B4; font-weight: 600;">
                        Maggie gifted Jake 5 pts
                    </div>
                </div>

                <div class="boost-section">
                    <div style="text-align: center; margin-bottom: 16px;">
                        <div style="font-size: 32px; margin-bottom: 8px;"></div>
                        <div style="font-size: 18px; font-weight: 700; color: var(--text);">Boost This Shout-Out</div>
                        <div style="font-size: 13px; color: var(--text-secondary); margin-top: 4px;">
                            Reward both kids for being kind to each other
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Bonus points for EACH kid</label>
                        <div style="display: flex; gap: 8px; margin-top: 8px;">
                            <div class="kid-chip" onclick="selectBoostAmount(this, 5)" style="flex: 1; text-align: center;">5 pts</div>
                            <div class="kid-chip selected" onclick="selectBoostAmount(this, 10)" style="flex: 1; text-align: center;">10 pts</div>
                            <div class="kid-chip" onclick="selectBoostAmount(this, 15)" style="flex: 1; text-align: center;">15 pts</div>
                            <div class="kid-chip" onclick="selectBoostAmount(this, 25)" style="flex: 1; text-align: center;">25 pts</div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Add a note (optional)</label>
                        <textarea rows="2" placeholder="e.g., This is what family is all about. So proud of you both!"></textarea>
                    </div>

                    <div style="text-align: center; padding: 12px; background: var(--bg-light); border-radius: 12px; margin-bottom: 16px;">
                        <div style="font-size: 14px; color: var(--text-secondary);">Both Maggie and Jake will receive</div>
                        <div style="font-size: 28px; font-weight: 700; color: var(--accent);" id="boost-amount-display">+10 pts each</div>
                    </div>

                    <div style="text-align: center; padding: 12px; background: #FFF0F5; border-radius: 12px; margin-bottom: 16px;">
                        <div style="font-size: 13px; color: var(--text-secondary);">
                            <i class="fas fa-info-circle"></i> Jake will see your boost and comment along with Maggie's shout-out
                        </div>
                    </div>

                    <button class="btn" onclick="boostShoutout()" style="background: linear-gradient(135deg, #FF69B4, #E74C3C); color: white;">
                        <i class="fas fa-rocket"></i> Boost & Deliver to Jake
                    </button>
                </div>

                <div style="text-align: center; margin-top: 16px;">
                    <button class="btn btn-outline" onclick="navigateTo('parent-dashboard')" style="width: auto; padding: 10px 24px; display: inline-block;">
                        Skip  just view
                    </button>
                </div>
            </div>
        </div>

        <!-- THE LIVING ROOM -->
        <div id="kid-living-room" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <div class="role-switcher" onclick="toggleRole()">
                            <i class="fas fa-repeat"></i> <span class="role-text">Switch to Parent</span>
                        </div>
                    </div>
                    <div class="header-top-right">
                        <div class="gear-icon" onclick="navigateTo('kid-settings')">
                            <i class="fas fa-gear"></i>
                        </div>
                        <div class="bell-icon" onclick="toggleNotifications()">
                            <i class="fas fa-bell"></i>
                            <div class="notification-badge">3</div>
                        </div>
                    </div>
                </div>
                <div class="header-title-row">
                    <h1>The Living Room</h1>
                    <p>Your family's space</p>
                </div>
            </div>
            <div class="content" style="padding: 16px;">

                <!-- Year-End Recap Banner -->
                <div class="wrapped-banner" onclick="openYearRecap()" style="margin-bottom: 16px;">
                    <div style="font-size: 32px;"></div>
                    <div style="flex: 1;">
                        <div style="font-weight: 700; font-size: 16px;">Your 2026 Wrapped is here!</div>
                        <div style="font-size: 13px; opacity: 0.9;">See your year in review</div>
                    </div>
                    <i class="fas fa-chevron-right" style="opacity: 0.8;"></i>
                </div>

                <!-- Pinned Announcement -->
                <div class="living-room-post announcement-post">
                    <div class="post-header">
                        <div class="post-avatar" style="background: linear-gradient(135deg, var(--accent), #E65100);">D</div>
                        <div class="post-author">
                            <div class="post-author-name">Dad</div>
                            <div class="post-time">Pinned</div>
                        </div>
                        <div class="pinned-indicator">
                            <i class="fas fa-thumbtack"></i> Pinned
                        </div>
                    </div>
                    <div class="post-body">
                        <div class="post-caption">
                            <strong>Family Game Night this Saturday!</strong> Everyone picks one game. Pizza is on me. Be there or be square.
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn liked" onclick="togglePostLike(this)">
                                <i class="fas fa-heart"></i> <span>4</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>2</span>
                            </div>
                        </div>
                    </div>
                    <div class="post-comments">
                        <div class="post-comment">
                            <div class="comment-avatar">M</div>
                            <div class="comment-text"><strong>Maggie:</strong> Dibs on Monopoly!</div>
                        </div>
                        <div class="post-comment">
                            <div class="comment-avatar">J</div>
                            <div class="comment-text"><strong>Jake:</strong> No way, Uno!</div>
                        </div>
                    </div>
                </div>

                <!-- Shout-out Post (auto-generated) -->
                <div class="living-room-post" style="border-left: 4px solid #FF69B4;">
                    <div class="post-header">
                        <div class="post-avatar" style="background: linear-gradient(135deg, #FF69B4, #E74C3C);">M</div>
                        <div class="post-author">
                            <div class="post-author-name">Maggie</div>
                            <div class="post-time">1 hour ago</div>
                        </div>
                        <div class="post-type-badge shoutout-post-badge">Shout-Out</div>
                    </div>
                    <div class="post-body">
                        <div class="post-caption">
                            Gave Jake the <strong>Amazing Sibling</strong> badge! "Jake helped me carry the groceries without me even asking!"
                        </div>
                        <div style="text-align: center; padding: 8px 0;">
                            <span class="shoutout-badge-display" style="font-size: 14px; padding: 8px 16px;"> Amazing Sibling</span>
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn" onclick="togglePostLike(this)">
                                <i class="far fa-heart"></i> <span>3</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>1</span>
                            </div>
                        </div>
                    </div>
                    <div class="post-comments">
                        <div class="post-comment">
                            <div class="comment-avatar" style="background: linear-gradient(135deg, var(--accent), #E65100);">D</div>
                            <div class="comment-text"><strong>Dad:</strong> This is what family is about! +10 pts each</div>
                        </div>
                    </div>
                </div>

                <!-- Chore Proof Post (auto-generated) -->
                <div class="living-room-post">
                    <div class="post-header">
                        <div class="post-avatar">M</div>
                        <div class="post-author">
                            <div class="post-author-name">Maggie</div>
                            <div class="post-time">2 hours ago</div>
                        </div>
                        <div class="post-type-badge chore-proof-badge">Chore Done</div>
                    </div>
                    <div class="post-image-placeholder" style="background: linear-gradient(135deg, #d4edda, #A8D5E2);">
                        <div style="text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 8px;"></div>
                            <div style="font-size: 14px; color: var(--primary); font-weight: 600;">Clean the garage</div>
                        </div>
                    </div>
                    <div class="post-body">
                        <div class="post-caption">
                            All done! Organized the tools and swept everything. +50 pts
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn liked" onclick="togglePostLike(this)">
                                <i class="fas fa-heart"></i> <span>2</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>1</span>
                            </div>
                            <div class="post-reaction-btn">
                                <span> </span>
                            </div>
                        </div>
                    </div>
                    <div class="post-comments">
                        <div class="post-comment">
                            <div class="comment-avatar" style="background: linear-gradient(135deg, var(--accent), #E65100);">D</div>
                            <div class="comment-text"><strong>Dad:</strong> Garage looks amazing!</div>
                        </div>
                    </div>
                </div>

                <!-- Photo Post (manual - user shared) -->
                <div class="living-room-post">
                    <div class="post-header">
                        <div class="post-avatar">J</div>
                        <div class="post-author">
                            <div class="post-author-name">Jake</div>
                            <div class="post-time">5 hours ago</div>
                        </div>
                    </div>
                    <div class="post-image-placeholder" style="background: linear-gradient(135deg, #E8F4F8, #74B9FF);">
                        <div style="text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 8px;"></div>
                            <div style="font-size: 14px; color: var(--primary); font-weight: 600;">Fido at the park!</div>
                        </div>
                    </div>
                    <div class="post-body">
                        <div class="post-caption">
                            Fido learned a new trick today! He can shake hands now 
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn liked" onclick="togglePostLike(this)">
                                <i class="fas fa-heart"></i> <span>5</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>3</span>
                            </div>
                        </div>
                    </div>
                    <div class="post-comments">
                        <div class="post-comment">
                            <div class="comment-avatar">M</div>
                            <div class="comment-text"><strong>Maggie:</strong> Aww so cute!!</div>
                        </div>
                        <div class="post-comment">
                            <div class="comment-avatar">L</div>
                            <div class="comment-text"><strong>Lily:</strong> I want to teach him to roll over next!</div>
                        </div>
                        <div class="post-comment">
                            <div class="comment-avatar" style="background: linear-gradient(135deg, var(--accent), #E65100);">D</div>
                            <div class="comment-text"><strong>Dad:</strong> Good boy Fido!</div>
                        </div>
                    </div>
                </div>

                <!-- Streak Post (auto-generated) -->
                <div class="living-room-post" style="border-left: 4px solid #FF6B35;">
                    <div class="post-header">
                        <div class="post-avatar">M</div>
                        <div class="post-author">
                            <div class="post-author-name">Maggie</div>
                            <div class="post-time">Yesterday</div>
                        </div>
                        <div class="post-type-badge streak-post-badge">Milestone</div>
                    </div>
                    <div class="post-body">
                        <div style="text-align: center; padding: 16px 0;">
                            <div style="font-size: 48px;"></div>
                            <div style="font-size: 24px; font-weight: 700; color: var(--text); margin-top: 8px;">7-Day Streak!</div>
                            <div style="font-size: 14px; color: var(--text-secondary); margin-top: 4px;">Maggie has been on fire for a whole week!</div>
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn liked" onclick="togglePostLike(this)">
                                <i class="fas fa-heart"></i> <span>4</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>2</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reward Redeemed Post -->
                <div class="living-room-post">
                    <div class="post-header">
                        <div class="post-avatar">M</div>
                        <div class="post-author">
                            <div class="post-author-name">Maggie</div>
                            <div class="post-time">2 days ago</div>
                        </div>
                        <div class="post-type-badge" style="background: var(--accent); color: white;">Reward</div>
                    </div>
                    <div class="post-body">
                        <div style="text-align: center; padding: 12px 0;">
                            <div style="font-size: 48px;"></div>
                            <div style="font-size: 18px; font-weight: 700; color: var(--text); margin-top: 8px;">Movie Night Redeemed!</div>
                            <div style="font-size: 14px; color: var(--accent); margin-top: 4px;">-50 pts</div>
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn" onclick="togglePostLike(this)">
                                <i class="far fa-heart"></i> <span>3</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>1</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lily Photo Post -->
                <div class="living-room-post">
                    <div class="post-header">
                        <div class="post-avatar">L</div>
                        <div class="post-author">
                            <div class="post-author-name">Lily</div>
                            <div class="post-time">3 days ago</div>
                        </div>
                    </div>
                    <div class="post-image-placeholder" style="background: linear-gradient(135deg, #FFE4E1, #FFB6C1);">
                        <div style="text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 8px;"></div>
                            <div style="font-size: 14px; color: #8B1A4A; font-weight: 600;">My art project!</div>
                        </div>
                    </div>
                    <div class="post-body">
                        <div class="post-caption">
                            Look what I made in art class today! It's a painting of our family
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn liked" onclick="togglePostLike(this)">
                                <i class="fas fa-heart"></i> <span>6</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>4</span>
                            </div>
                        </div>
                    </div>
                    <div class="post-comments">
                        <div class="post-comment">
                            <div class="comment-avatar">M</div>
                            <div class="comment-text"><strong>Maggie:</strong> Lily this is beautiful!</div>
                        </div>
                        <div class="post-comment">
                            <div class="comment-avatar" style="background: linear-gradient(135deg, var(--accent), #E65100);">D</div>
                            <div class="comment-text"><strong>Dad:</strong> We're putting this on the fridge!</div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Camera FAB -->
            <div class="camera-fab" onclick="navigateTo('kid-living-room')">
                <i class="fas fa-camera"></i>
            </div>
            <div class="bottom-nav kid-nav">
                <div class="nav-item" onclick="navigateTo('kid-chores')">
                    <i class="fas fa-list-check"></i>
                    <span>Chores</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-rewards')">
                    <i class="fas fa-gift"></i>
                    <span>Rewards</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-points')">
                    <i class="fas fa-coins"></i>
                    <span>Points</span>
                </div>
                <div class="nav-item" onclick="navigateTo('kid-board')">
                    <i class="fas fa-trophy"></i>
                    <span>Board</span>
                </div>
                <div class="nav-item active" onclick="navigateTo('kid-living-room')">
                    <i class="fas fa-couch"></i>
                    <span>Living Room</span>
                </div>
            </div>
        </div>

        <!-- PARENT LIVING ROOM -->
        <div id="parent-living-room" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <div class="role-switcher" onclick="toggleRole()">
                            <i class="fas fa-repeat"></i> <span class="role-text">Switch to Kid</span>
                        </div>
                    </div>
                    <div class="header-top-right">
                        <div class="bell-icon" onclick="toggleNotifications()">
                            <i class="fas fa-bell"></i>
                            <div class="notification-badge">5</div>
                        </div>
                    </div>
                </div>
                <div class="header-title-row">
                    <h1>The Living Room</h1>
                    <p>Your family's space</p>
                </div>
            </div>
            <div class="content" style="padding: 16px;">

                <!-- Pinned Announcement -->
                <div class="living-room-post announcement-post">
                    <div class="post-header">
                        <div class="post-avatar" style="background: linear-gradient(135deg, var(--accent), #E65100);">D</div>
                        <div class="post-author">
                            <div class="post-author-name">Dad</div>
                            <div class="post-time">Pinned</div>
                        </div>
                        <div class="pinned-indicator">
                            <i class="fas fa-thumbtack"></i> Pinned
                        </div>
                    </div>
                    <div class="post-body">
                        <div class="post-caption">
                            <strong>Family Game Night this Saturday!</strong> Everyone picks one game. Pizza is on me. Be there or be square.
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn liked" onclick="togglePostLike(this)">
                                <i class="fas fa-heart"></i> <span>4</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>2</span>
                            </div>
                        </div>
                    </div>
                    <div class="post-comments">
                        <div class="post-comment">
                            <div class="comment-avatar">M</div>
                            <div class="comment-text"><strong>Maggie:</strong> Dibs on Monopoly!</div>
                        </div>
                        <div class="post-comment">
                            <div class="comment-avatar">J</div>
                            <div class="comment-text"><strong>Jake:</strong> No way, Uno!</div>
                        </div>
                    </div>
                </div>

                <!-- Shout-out Post (auto-generated) -->
                <div class="living-room-post" style="border-left: 4px solid #FF69B4;">
                    <div class="post-header">
                        <div class="post-avatar" style="background: linear-gradient(135deg, #FF69B4, #E74C3C);">M</div>
                        <div class="post-author">
                            <div class="post-author-name">Maggie</div>
                            <div class="post-time">1 hour ago</div>
                        </div>
                        <div class="post-type-badge shoutout-post-badge">Shout-Out</div>
                    </div>
                    <div class="post-body">
                        <div class="post-caption">
                            Gave Jake the <strong>Amazing Sibling</strong> badge! "Jake helped me carry the groceries without me even asking!"
                        </div>
                        <div style="text-align: center; padding: 8px 0;">
                            <span class="shoutout-badge-display" style="font-size: 14px; padding: 8px 16px;"> Amazing Sibling</span>
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn" onclick="togglePostLike(this)">
                                <i class="far fa-heart"></i> <span>3</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>1</span>
                            </div>
                        </div>
                    </div>
                    <div class="post-comments">
                        <div class="post-comment">
                            <div class="comment-avatar" style="background: linear-gradient(135deg, var(--accent), #E65100);">D</div>
                            <div class="comment-text"><strong>Dad:</strong> This is what family is about! +10 pts each</div>
                        </div>
                    </div>
                </div>

                <!-- Chore Proof Post (auto-generated) -->
                <div class="living-room-post">
                    <div class="post-header">
                        <div class="post-avatar">M</div>
                        <div class="post-author">
                            <div class="post-author-name">Maggie</div>
                            <div class="post-time">2 hours ago</div>
                        </div>
                        <div class="post-type-badge chore-proof-badge">Chore Done</div>
                    </div>
                    <div class="post-image-placeholder" style="background: linear-gradient(135deg, #d4edda, #A8D5E2);">
                        <div style="text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 8px;"></div>
                            <div style="font-size: 14px; color: var(--primary); font-weight: 600;">Clean the garage</div>
                        </div>
                    </div>
                    <div class="post-body">
                        <div class="post-caption">
                            All done! Organized the tools and swept everything. +50 pts
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn liked" onclick="togglePostLike(this)">
                                <i class="fas fa-heart"></i> <span>2</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>1</span>
                            </div>
                            <div class="post-reaction-btn">
                                <span> </span>
                            </div>
                        </div>
                    </div>
                    <div class="post-comments">
                        <div class="post-comment">
                            <div class="comment-avatar" style="background: linear-gradient(135deg, var(--accent), #E65100);">D</div>
                            <div class="comment-text"><strong>Dad:</strong> Garage looks amazing!</div>
                        </div>
                    </div>
                </div>

                <!-- Photo Post (manual - user shared) -->
                <div class="living-room-post">
                    <div class="post-header">
                        <div class="post-avatar">J</div>
                        <div class="post-author">
                            <div class="post-author-name">Jake</div>
                            <div class="post-time">5 hours ago</div>
                        </div>
                    </div>
                    <div class="post-image-placeholder" style="background: linear-gradient(135deg, #E8F4F8, #74B9FF);">
                        <div style="text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 8px;"></div>
                            <div style="font-size: 14px; color: var(--primary); font-weight: 600;">Fido at the park!</div>
                        </div>
                    </div>
                    <div class="post-body">
                        <div class="post-caption">
                            Fido learned a new trick today! He can shake hands now 
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn liked" onclick="togglePostLike(this)">
                                <i class="fas fa-heart"></i> <span>5</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>3</span>
                            </div>
                        </div>
                    </div>
                    <div class="post-comments">
                        <div class="post-comment">
                            <div class="comment-avatar">M</div>
                            <div class="comment-text"><strong>Maggie:</strong> Aww so cute!!</div>
                        </div>
                        <div class="post-comment">
                            <div class="comment-avatar">L</div>
                            <div class="comment-text"><strong>Lily:</strong> I want to teach him to roll over next!</div>
                        </div>
                        <div class="post-comment">
                            <div class="comment-avatar" style="background: linear-gradient(135deg, var(--accent), #E65100);">D</div>
                            <div class="comment-text"><strong>Dad:</strong> Good boy Fido!</div>
                        </div>
                    </div>
                </div>

                <!-- Streak Post (auto-generated) -->
                <div class="living-room-post" style="border-left: 4px solid #FF6B35;">
                    <div class="post-header">
                        <div class="post-avatar">M</div>
                        <div class="post-author">
                            <div class="post-author-name">Maggie</div>
                            <div class="post-time">Yesterday</div>
                        </div>
                        <div class="post-type-badge streak-post-badge">Milestone</div>
                    </div>
                    <div class="post-body">
                        <div style="text-align: center; padding: 16px 0;">
                            <div style="font-size: 48px;"></div>
                            <div style="font-size: 24px; font-weight: 700; color: var(--text); margin-top: 8px;">7-Day Streak!</div>
                            <div style="font-size: 14px; color: var(--text-secondary); margin-top: 4px;">Maggie has been on fire for a whole week!</div>
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn liked" onclick="togglePostLike(this)">
                                <i class="fas fa-heart"></i> <span>4</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>2</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reward Redeemed Post -->
                <div class="living-room-post">
                    <div class="post-header">
                        <div class="post-avatar">M</div>
                        <div class="post-author">
                            <div class="post-author-name">Maggie</div>
                            <div class="post-time">2 days ago</div>
                        </div>
                        <div class="post-type-badge" style="background: var(--accent); color: white;">Reward</div>
                    </div>
                    <div class="post-body">
                        <div style="text-align: center; padding: 12px 0;">
                            <div style="font-size: 48px;"></div>
                            <div style="font-size: 18px; font-weight: 700; color: var(--text); margin-top: 8px;">Movie Night Redeemed!</div>
                            <div style="font-size: 14px; color: var(--accent); margin-top: 4px;">-50 pts</div>
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn" onclick="togglePostLike(this)">
                                <i class="far fa-heart"></i> <span>3</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>1</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lily Photo Post -->
                <div class="living-room-post">
                    <div class="post-header">
                        <div class="post-avatar">L</div>
                        <div class="post-author">
                            <div class="post-author-name">Lily</div>
                            <div class="post-time">3 days ago</div>
                        </div>
                    </div>
                    <div class="post-image-placeholder" style="background: linear-gradient(135deg, #FFE4E1, #FFB6C1);">
                        <div style="text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 8px;"></div>
                            <div style="font-size: 14px; color: #8B1A4A; font-weight: 600;">My art project!</div>
                        </div>
                    </div>
                    <div class="post-body">
                        <div class="post-caption">
                            Look what I made in art class today! It's a painting of our family
                        </div>
                        <div class="post-reactions">
                            <div class="post-reaction-btn liked" onclick="togglePostLike(this)">
                                <i class="fas fa-heart"></i> <span>6</span>
                            </div>
                            <div class="post-reaction-btn">
                                <i class="far fa-comment"></i> <span>4</span>
                            </div>
                        </div>
                    </div>
                    <div class="post-comments">
                        <div class="post-comment">
                            <div class="comment-avatar">M</div>
                            <div class="comment-text"><strong>Maggie:</strong> Lily this is beautiful!</div>
                        </div>
                        <div class="post-comment">
                            <div class="comment-avatar" style="background: linear-gradient(135deg, var(--accent), #E65100);">D</div>
                            <div class="comment-text"><strong>Dad:</strong> We're putting this on the fridge!</div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Camera FAB -->
            <div class="camera-fab" onclick="navigateTo('parent-living-room')">
                <i class="fas fa-camera"></i>
            </div>

            <div class="bottom-nav parent-nav">
                <div class="nav-item" onclick="navigateTo('parent-dashboard')">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-verify')">
                    <i class="fas fa-check-circle"></i>
                    <span>Verify</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-rewards')">
                    <i class="fas fa-gift"></i>
                    <span>Rewards</span>
                </div>
                <div class="nav-item active" onclick="navigateTo('parent-living-room')">
                    <i class="fas fa-couch"></i>
                    <span>Living Room</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-family')">
                    <i class="fas fa-users"></i>
                    <span>Family</span>
                </div>
            </div>
        </div>

        <!-- SCREEN 9B: KID SETTINGS -->
        <div id="kid-settings" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-chores')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>My Settings</h1>
                    <p>Make Challey yours!</p>
                </div>
            </div>
            <div class="content">
                <div class="card">
                    <div class="card-title" style="margin-bottom: 16px;">My Profile</div>
                    <div class="profile-pic-large" style="background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);">
                        M
                        <div class="avatar-camera"><i class="fas fa-camera"></i></div>
                    </div>
                    <div style="text-align: center; font-size: 20px; font-weight: 700; color: var(--text); margin-bottom: 4px;">Maggie</div>
                    <div style="text-align: center; font-size: 14px; color: var(--text-secondary); margin-bottom: 16px;">Age 13  The Johnson Family</div>
                    <button class="btn btn-secondary" style="font-size: 14px; padding: 12px;">
                        <i class="fas fa-camera"></i> Change Profile Picture
                    </button>
                </div>

                <div class="card">
                    <div class="card-title" style="margin-bottom: 16px;">Appearance</div>

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div>
                            <div style="font-size: 14px; font-weight: 600; color: var(--text);">Dark Mode</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">Easier on the eyes</div>
                        </div>
                        <div class="toggle-switch" id="kid-dark-mode-toggle" onclick="toggleDarkMode()">
                            <div class="toggle-thumb"></div>
                        </div>
                    </div>

                    <div style="font-size: 14px; font-weight: 600; color: var(--text); margin-bottom: 12px;">Color Theme</div>
                    <div class="theme-grid">
                        <div class="theme-item theme-ocean active" onclick="setTheme('ocean')">
                            <div class="theme-preview"></div>
                            <div class="theme-name">Ocean</div>
                        </div>
                        <div class="theme-item theme-sunset" onclick="setTheme('sunset')">
                            <div class="theme-preview"></div>
                            <div class="theme-name">Sunset</div>
                        </div>
                        <div class="theme-item theme-forest" onclick="setTheme('forest')">
                            <div class="theme-preview"></div>
                            <div class="theme-name">Forest</div>
                        </div>
                        <div class="theme-item theme-midnight" onclick="setTheme('midnight')">
                            <div class="theme-preview"></div>
                            <div class="theme-name">Midnight</div>
                        </div>
                        <div class="theme-item theme-bubblegum" onclick="setTheme('bubblegum')">
                            <div class="theme-preview"></div>
                            <div class="theme-name">Bubblegum</div>
                        </div>
                        <div class="theme-item theme-arctic" onclick="setTheme('arctic')">
                            <div class="theme-preview"></div>
                            <div class="theme-name">Arctic</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title" style="margin-bottom: 12px;">Notifications</div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 14px; color: var(--text);">New chore alerts</span>
                        <div class="toggle-switch active">
                            <div class="toggle-thumb"></div>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 14px; color: var(--text);">Approval updates</span>
                        <div class="toggle-switch active">
                            <div class="toggle-thumb"></div>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="font-size: 14px; color: var(--text);">Streak reminders</span>
                        <div class="toggle-switch active">
                            <div class="toggle-thumb"></div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-title" style="margin-bottom: 12px;">Companion</div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 24px;" data-companion-emoji></span>
                            <span style="font-size: 14px; color: var(--text);">Show Chal</span>
                        </div>
                        <div class="toggle-switch active" id="companion-toggle" onclick="toggleCompanionSetting()">
                            <div class="toggle-thumb"></div>
                        </div>
                    </div>
                    <div style="font-size: 12px; color: var(--text-secondary);">
                        Your personal cheerleader! Chal gives tips, encouragement, and fun facts.
                    </div>
                </div>

                <div class="card">
                    <div style="font-size: 14px; color: #dc3545; cursor: pointer;">
                        <i class="fas fa-sign-out-alt"></i> Log Out
                    </div>
                </div>

                <div class="card">
                    <div class="card-title" style="margin-bottom: 8px;">About</div>
                    <div style="font-size: 13px; color: #999;">
                        Challey v3.0.0<br>
                        Made with care for families
                    </div>
                </div>
            </div>
        </div>

        <!-- SCREEN 10: PARENT DASHBOARD -->
        <div id="parent-dashboard" class="screen">
            <div class="dashboard-header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <div class="role-switcher" onclick="toggleRole()">
                            <i class="fas fa-repeat"></i> <span class="role-text">Switch to Kid</span>
                        </div>
                    </div>
                    <div class="header-top-right">
                        <div class="gear-icon" onclick="navigateTo('parent-settings')"><i class="fas fa-gear"></i></div>
                        <div class="bell-icon" onclick="toggleNotifications()">
                            <i class="fas fa-bell"></i>
                            <div class="notification-badge">5</div>
                        </div>
                    </div>
                </div>
                <h1>Family Dashboard</h1>
                <p>The Johnson Family</p>
                <div class="quick-stats">
                    <div class="quick-stat">
                        <div class="quick-stat-value">8</div>
                        <div class="quick-stat-label">Active Chores</div>
                    </div>
                    <div class="quick-stat">
                        <div class="quick-stat-value">3</div>
                        <div class="quick-stat-label">Pending</div>
                    </div>
                    <div class="quick-stat">
                        <div class="quick-stat-value">12</div>
                        <div class="quick-stat-label">This Week</div>
                    </div>
                </div>
            </div>
            <div class="content">
                <!-- Birthday Prep Card -->
                <div class="card" style="background: linear-gradient(135deg, #FFF0F5, #FFE4E1); border: 2px solid #FFB6C1; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                        <div style="font-size: 36px;"></div>
                        <div style="flex: 1;">
                            <div style="font-size: 16px; font-weight: 700; color: var(--text);">Maggie turns 14 in 7 days!</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">February 17, 2026</div>
                        </div>
                    </div>
                    <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px;">
                        Prepare something special for her big day:
                    </div>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                        <div class="kid-chip selected" onclick="this.classList.toggle('selected')" style="font-size: 12px;">Remove chores</div>
                        <div class="kid-chip selected" onclick="this.classList.toggle('selected')" style="font-size: 12px;">Double points</div>
                        <div class="kid-chip" onclick="this.classList.toggle('selected')" style="font-size: 12px;">Birthday badge</div>
                        <div class="kid-chip" onclick="this.classList.toggle('selected')" style="font-size: 12px;">View wishlist</div>
                    </div>
                    <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #FFB6C1;">
                        <div style="font-size: 12px; color: #FF69B4; font-weight: 600;">
                            <i class="fas fa-users"></i> Jake and Lily will be prompted to prepare shout-outs
                        </div>
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-title">Pending Verifications</div>
                    <div class="section-action" onclick="navigateTo('parent-verify')">View All</div>
                </div>

                <div class="card" onclick="navigateTo('parent-verify')">
                    <div class="card-header">
                        <div class="card-title">Clean the garage - Maggie</div>
                        <div class="points-badge">50 pts</div>
                    </div>
                    <div style="font-size: 13px; color: var(--accent); margin-top: 8px;">
                        <i class="fas fa-clock"></i> Waiting for review
                    </div>
                </div>

                <div class="card" onclick="navigateTo('parent-verify')">
                    <div class="card-header">
                        <div class="card-title">Walk the dog - Maggie</div>
                        <div class="points-badge">20 pts</div>
                    </div>
                    <div style="font-size: 13px; color: var(--accent); margin-top: 8px;">
                        <i class="fas fa-clock"></i> Waiting for review
                    </div>
                </div>

                <div class="section-header" style="margin-top: 24px;">
                    <div class="section-title">Swap Requests</div>
                </div>

                <div class="card" onclick="navigateTo('parent-swap-review')" style="background: #E8D4FF; cursor: pointer;">
                    <div class="card-header">
                        <div class="card-title">Maggie - Chore Change Request</div>
                        <div style="font-size: 24px;"></div>
                    </div>
                    <div style="font-size: 13px; color: #6f42c1; margin-top: 8px;">
                        <i class="fas fa-clock"></i> Wants to change "Clean the garage"  "Help with groceries"
                    </div>
                    <div style="font-size: 13px; color: #6f42c1; margin-top: 4px; font-weight: 600;">
                        <i class="fas fa-hand-pointer"></i> Tap to review
                    </div>
                </div>

                <!-- Suggestion Cards -->
                <div class="notification-action-card" style="border-left: 4px solid var(--secondary);">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 10px;">
                        <div style="font-size: 28px;"></div>
                        <div style="flex: 1;">
                            <div style="font-size: 14px; font-weight: 600; color: var(--text);">Chore Suggestion from Maggie</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">"Can I do Help with Groceries for 30 pts?"</div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-success" style="flex: 1; font-size: 13px; padding: 8px;" onclick="showToast('Chore accepted!'); this.closest('.notification-action-card').style.display='none';">Accept</button>
                        <button class="btn btn-outline" style="flex: 1; font-size: 13px; padding: 8px;" onclick="showToast('Dismissed'); this.closest('.notification-action-card').style.display='none';">Not Now</button>
                        <button class="btn" style="flex: 0; font-size: 13px; padding: 8px 12px; background: #dc3545; color: white;" onclick="showToast('Rejected'); this.closest('.notification-action-card').style.display='none';"><i class="fas fa-times"></i></button>
                    </div>
                </div>

                <div class="notification-action-card" style="border-left: 4px solid #FF69B4;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 10px;">
                        <div style="font-size: 28px;"></div>
                        <div style="flex: 1;">
                            <div style="font-size: 14px; font-weight: 600; color: var(--text);">Reward Suggestion from Jake</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">"Can we add Pizza Night for 80 pts?"</div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-success" style="flex: 1; font-size: 13px; padding: 8px;" onclick="showToast('Reward added!'); this.closest('.notification-action-card').style.display='none';">Add Reward</button>
                        <button class="btn btn-outline" style="flex: 1; font-size: 13px; padding: 8px;" onclick="showToast('Dismissed'); this.closest('.notification-action-card').style.display='none';">Not Now</button>
                    </div>
                </div>

                <div class="section-header" style="margin-top: 24px;">
                    <div class="section-title">Rewards to Fulfill</div>
                </div>

                <div class="card" style="background: #d4edda; border: 2px solid #28a745;">
                    <div class="card-header">
                        <div class="card-title">Maggie cashed out $5.00</div>
                        <div class="points-badge" style="background: #28a745;">100 pts</div>
                    </div>
                    <div style="font-size: 13px; color: #155724; margin-top: 8px;">
                        <i class="fas fa-money-bill-wave"></i> 10 minutes ago  needs cash
                    </div>
                    <button class="btn btn-success" onclick="event.stopPropagation(); alert('Marked as handed over!');" style="margin-top: 12px; font-size: 14px; padding: 10px;">
                        Hand Cash
                    </button>
                </div>

                <div class="card" style="background: #fff3cd;">
                    <div class="card-header">
                        <div class="card-title">Maggie redeemed Movie Night</div>
                        <div class="points-badge" style="background: var(--accent);">50 pts</div>
                    </div>
                    <div style="font-size: 13px; color: #856404; margin-top: 8px;">
                        <i class="fas fa-exclamation-triangle"></i> 2 days ago  unfulfilled
                    </div>
                    <button class="btn btn-success" onclick="event.stopPropagation(); alert('Marked as given!');" style="margin-top: 12px; font-size: 14px; padding: 10px;">
                        Mark as Given
                    </button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Jake redeemed Extra Screen Time</div>
                        <div class="points-badge" style="background: var(--accent);">30 pts</div>
                    </div>
                    <div style="font-size: 13px; color: var(--text-secondary); margin-top: 8px;">
                        <i class="fas fa-clock"></i> 5 hours ago
                    </div>
                    <button class="btn btn-success" onclick="event.stopPropagation(); alert('Marked as given!');" style="margin-top: 12px; font-size: 14px; padding: 10px;">
                        Mark as Given
                    </button>
                </div>

                <div class="section-header" style="margin-top: 24px;">
                    <div class="section-title">Sibling Kindness</div>
                    <div class="section-action" style="color: #FF69B4;"> New!</div>
                </div>

                <div class="parent-shoutout-card" onclick="navigateTo('parent-shoutout-review')">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                        <div class="shoutout-from-avatar" style="width: 36px; height: 36px; font-size: 14px;">M</div>
                        <div style="flex: 1;">
                            <div style="font-size: 15px; font-weight: 600; color: var(--text);">Maggie  Jake</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">1 hour ago</div>
                        </div>
                        <span class="shoutout-badge-display" style="font-size: 11px; padding: 4px 10px;"> Amazing Sibling</span>
                    </div>
                    <div style="font-size: 13px; color: var(--text); font-style: italic;">"Jake helped me carry the groceries without me even asking!"</div>
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 10px;">
                        <div style="font-size: 12px; color: #FF69B4; font-weight: 600;">Maggie gifted 5 pts</div>
                        <div style="font-size: 12px; color: var(--secondary); font-weight: 600;">
                            <i class="fas fa-rocket"></i> Tap to boost
                        </div>
                    </div>
                </div>

                <div class="section-header" style="margin-top: 24px;">
                    <div class="section-title">Kids Overview</div>
                </div>

                <div class="kid-card">
                    <div class="kid-card-header">
                        <div class="leaderboard-avatar">M</div>
                        <div>
                            <div class="kid-name">Maggie (13)</div>
                            <div class="kid-stats">
                                <span>135 pts</span>
                                <span>4 active chores</span>
                                <span> 7 days</span>
                            </div>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 60%;"></div>
                    </div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 6px;">60% completion this week</div>
                </div>

                <div class="kid-card">
                    <div class="kid-card-header">
                        <div class="leaderboard-avatar">J</div>
                        <div>
                            <div class="kid-name">Jake (10)</div>
                            <div class="kid-stats">
                                <span>70 pts</span>
                                <span>2 active chores</span>
                                <span> 3 days</span>
                            </div>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 40%;"></div>
                    </div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 6px;">40% completion this week</div>
                </div>

                <div class="kid-card">
                    <div class="kid-card-header">
                        <div class="leaderboard-avatar">L</div>
                        <div>
                            <div class="kid-name">Lily (8)</div>
                            <div class="kid-stats">
                                <span>55 pts</span>
                                <span>2 active chores</span>
                                <span> 5 days</span>
                            </div>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%;"></div>
                    </div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 6px;">75% completion this week</div>
                </div>

                <button class="btn btn-primary" onclick="navigateTo('parent-create-chore')" style="margin-top: 20px;">
                    <i class="fas fa-plus"></i> Create New Chore
                </button>

                <div style="display: flex; gap: 12px; margin-top: 12px;">
                    <button class="btn btn-secondary" onclick="navigateTo('parent-wishlist')" style="flex: 1;">
                        <i class="fas fa-wand-magic-sparkles"></i> Wishlists
                    </button>
                    <button class="btn" onclick="navigateTo('parent-give-badge')" style="flex: 1; background: linear-gradient(135deg, #FFD700, #FFA500); color: white;">
                        <i class="fas fa-medal"></i> Give Badge
                    </button>
                </div>
            </div>
            <div class="fab" onclick="navigateTo('parent-create-chore')">
                <i class="fas fa-plus"></i>
            </div>
            <div class="bottom-nav parent-nav">
                <div class="nav-item active" onclick="navigateTo('parent-dashboard')">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-verify')">
                    <i class="fas fa-check-circle"></i>
                    <span>Verify</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-rewards')">
                    <i class="fas fa-gift"></i>
                    <span>Rewards</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-living-room')">
                    <i class="fas fa-couch"></i>
                    <span>Living Room</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-family')">
                    <i class="fas fa-users"></i>
                    <span>Family</span>
                </div>
            </div>
        </div>

        <!-- SCREEN 11: PARENT CREATE CHORE -->
        <div id="parent-create-chore" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('parent-dashboard')"></i>
                <h1>Create Chore</h1>
                <p>Assign a new task</p>
            </div>
            <div class="content">
                <div class="input-group">
                    <label>Chore Name</label>
                    <input type="text" placeholder="e.g., Clean the kitchen">
                </div>

                <div class="input-group">
                    <label>Description</label>
                    <textarea rows="3" placeholder="What needs to be done?"></textarea>
                </div>

                <div class="input-group">
                    <label>Assign To</label>
                    <div class="kid-selector">
                        <div class="kid-chip selected">Maggie</div>
                        <div class="kid-chip">Jake</div>
                        <div class="kid-chip">Lily</div>
                        <div class="kid-chip">All Kids</div>
                    </div>
                </div>

                <div class="input-group">
                    <label>Point Value</label>
                    <input type="number" placeholder="e.g., 50" value="30">
                </div>

                <div class="input-group">
                    <label>Due Date</label>
                    <input type="date">
                </div>

                <div class="input-group">
                    <label>Frequency</label>
                    <select>
                        <option>One-time</option>
                        <option>Daily</option>
                        <option>Weekly</option>
                        <option>Monthly</option>
                    </select>
                </div>

                <button class="btn btn-primary" onclick="navigateTo('parent-dashboard')">
                    <i class="fas fa-check"></i> Create Chore
                </button>
            </div>
        </div>

        <!-- SCREEN 12: PARENT VERIFY CHORE -->
        <div id="parent-verify" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('parent-dashboard')"></i>
                    </div>
                    <div class="header-top-right">
                        <div class="approve-all-btn" onclick="approveAllChores()">Approve All</div>
                    </div>
                </div>
                <div class="header-title-row">
                    <h1>Verify Chores</h1>
                    <p><span id="chores-count">3</span> waiting for review</p>
                </div>
            </div>
            <div class="content" id="verify-content">
                <div class="swipe-card-stack" id="swipe-stack">
                    <!-- Card 1 -->
                    <div class="swipe-card" data-chore-id="1">
                        <div class="swipe-overlay approve">
                            <div>APPROVED </div>
                        </div>
                        <div class="swipe-overlay reject">
                            <div>REDO </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div class="kid-avatar" style="width: 40px; height: 40px; font-size: 16px;">M</div>
                            <div style="flex: 1;">
                                <div style="font-size: 18px; font-weight: 700; color: var(--text);">Clean the garage</div>
                                <div style="font-size: 13px; color: var(--text-secondary);">Maggie  2 hours ago</div>
                            </div>
                            <div class="points-badge">50 pts</div>
                        </div>
                        <div class="post-image-placeholder" style="background: linear-gradient(135deg, #d4edda, #A8D5E2); aspect-ratio: 16/9; border-radius: 12px; margin-bottom: 12px;">
                            <div style="text-align: center;">
                                <div style="font-size: 48px; margin-bottom: 8px;"></div>
                                <div style="font-size: 14px; color: var(--primary); font-weight: 600;">Clean Garage</div>
                                <div style="font-size: 11px; color: var(--text-secondary); margin-top: 4px;"><i class="fas fa-camera"></i> Photo proof</div>
                            </div>
                        </div>
                        <div style="font-size: 14px; font-style: italic; color: var(--text-secondary); padding: 12px; background: var(--bg-light); border-radius: 8px; margin-bottom: 12px;">
                            "All done! Organized the tools and swept everything."
                        </div>
                        <div class="emoji-reactions">
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                        </div>
                        <div style="font-size: 12px; color: var(--text-secondary); text-align: center; margin-top: 12px;">
                            Swipe right to approve  Swipe left to reject
                        </div>
                    </div>
                    <!-- Card 2 -->
                    <div class="swipe-card" data-chore-id="2">
                        <div class="swipe-overlay approve">
                            <div>APPROVED </div>
                        </div>
                        <div class="swipe-overlay reject">
                            <div>REDO </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div class="kid-avatar" style="width: 40px; height: 40px; font-size: 16px;">M</div>
                            <div style="flex: 1;">
                                <div style="font-size: 18px; font-weight: 700; color: var(--text);">Walk the dog</div>
                                <div style="font-size: 13px; color: var(--text-secondary);">Maggie  4 hours ago</div>
                            </div>
                            <div class="points-badge">20 pts</div>
                        </div>
                        <div class="post-image-placeholder" style="background: linear-gradient(135deg, #E8F4F8, #74B9FF); aspect-ratio: 16/9; border-radius: 12px; margin-bottom: 12px;">
                            <div style="text-align: center;">
                                <div style="font-size: 48px; margin-bottom: 8px;"></div>
                                <div style="font-size: 14px; color: var(--primary); font-weight: 600;">Walk the Dog</div>
                                <div style="font-size: 11px; color: var(--text-secondary); margin-top: 4px;"><i class="fas fa-camera"></i> Photo proof</div>
                            </div>
                        </div>
                        <div style="font-size: 14px; font-style: italic; color: var(--text-secondary); padding: 12px; background: var(--bg-light); border-radius: 8px; margin-bottom: 12px;">
                            "Fido loved it! We went around the park twice."
                        </div>
                        <div class="emoji-reactions">
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                        </div>
                    </div>
                    <!-- Card 3 -->
                    <div class="swipe-card" data-chore-id="3">
                        <div class="swipe-overlay approve">
                            <div>APPROVED </div>
                        </div>
                        <div class="swipe-overlay reject">
                            <div>REDO </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <div class="kid-avatar" style="width: 40px; height: 40px; font-size: 16px;">J</div>
                            <div style="flex: 1;">
                                <div style="font-size: 18px; font-weight: 700; color: var(--text);">Vacuum living room</div>
                                <div style="font-size: 13px; color: var(--text-secondary);">Jake  1 hour ago</div>
                            </div>
                            <div class="points-badge">30 pts</div>
                        </div>
                        <div class="post-image-placeholder" style="background: linear-gradient(135deg, #FFF3CD, #FFE4B5); aspect-ratio: 16/9; border-radius: 12px; margin-bottom: 12px;">
                            <div style="text-align: center;">
                                <div style="font-size: 48px; margin-bottom: 8px;"></div>
                                <div style="font-size: 14px; color: var(--primary); font-weight: 600;">Vacuum Living Room</div>
                                <div style="font-size: 11px; color: var(--text-secondary); margin-top: 4px;"><i class="fas fa-camera"></i> Photo proof</div>
                            </div>
                        </div>
                        <div style="font-size: 14px; font-style: italic; color: var(--text-secondary); padding: 12px; background: var(--bg-light); border-radius: 8px; margin-bottom: 12px;">
                            "Got all the corners and under the couch!"
                        </div>
                        <div class="emoji-reactions">
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                            <div class="emoji-btn" onclick="event.stopPropagation(); toggleEmoji(this)"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="redo-comment" class="redo-comment-bar">
                <input type="text" placeholder="What needs fixing?" id="redo-input">
                <button onclick="sendRedo()">Send</button>
            </div>
        </div>

        <!-- SCREEN 13: PARENT REWARDS CATALOG -->
        <div id="parent-rewards" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('parent-dashboard')"></i>
                    </div>
                    <div class="header-top-right">
                        <div class="role-switcher" onclick="toggleRole()">
                            <i class="fas fa-repeat"></i> <span class="role-text">Switch to Kid</span>
                        </div>
                    </div>
                </div>
                <div class="header-title-row">
                    <h1>Reward Catalog</h1>
                    <p>Manage rewards</p>
                </div>
            </div>
            <div class="content">
                <div class="reward-card" onclick="navigateTo('parent-create-reward')">
                    <div class="reward-icon"></div>
                    <div class="reward-title">Movie Night</div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Family picks movie together</p>
                    <div class="reward-cost">50 points</div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 2px;">Value: $2.50</div>
                    <div style="margin-top: 10px; font-size: 12px; color: #999;">
                        <i class="fas fa-edit"></i> Edit
                    </div>
                </div>

                <div class="reward-card" onclick="navigateTo('parent-create-reward')">
                    <div class="reward-icon"></div>
                    <div class="reward-title">$10 Amazon Gift Card</div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Shop for what you want</p>
                    <div class="reward-cost">100 points</div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 2px;">Value: $5.00</div>
                    <div style="margin-top: 10px; font-size: 12px; color: #999;">
                        <i class="fas fa-edit"></i> Edit
                    </div>
                </div>

                <div class="reward-card" onclick="navigateTo('parent-create-reward')">
                    <div class="reward-icon"></div>
                    <div class="reward-title">Extra 30 min Screen Time</div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">One night bonus time</p>
                    <div class="reward-cost">30 points</div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 2px;">Value: $1.50</div>
                    <div style="margin-top: 10px; font-size: 12px; color: #999;">
                        <i class="fas fa-edit"></i> Edit
                    </div>
                </div>

                <div class="reward-card" onclick="navigateTo('parent-create-reward')">
                    <div class="reward-icon"></div>
                    <div class="reward-title">Choose Dinner Menu</div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Pick what we eat tonight</p>
                    <div class="reward-cost">40 points</div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 2px;">Value: $2.00</div>
                    <div style="margin-top: 10px; font-size: 12px; color: #999;">
                        <i class="fas fa-edit"></i> Edit
                    </div>
                </div>

                <button class="btn btn-primary" onclick="navigateTo('parent-create-reward')" style="margin-top: 12px;">
                    <i class="fas fa-plus"></i> Add New Reward
                </button>
            </div>
            <div class="bottom-nav parent-nav">
                <div class="nav-item" onclick="navigateTo('parent-dashboard')">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-verify')">
                    <i class="fas fa-check-circle"></i>
                    <span>Verify</span>
                </div>
                <div class="nav-item active" onclick="navigateTo('parent-rewards')">
                    <i class="fas fa-gift"></i>
                    <span>Rewards</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-living-room')">
                    <i class="fas fa-couch"></i>
                    <span>Living Room</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-family')">
                    <i class="fas fa-users"></i>
                    <span>Family</span>
                </div>
            </div>
        </div>

        <!-- SCREEN 14: PARENT CREATE REWARD -->
        <div id="parent-create-reward" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('parent-rewards')"></i>
                <h1>Create Reward</h1>
                <p>Add something exciting!</p>
            </div>
            <div class="content">
                <div class="input-group">
                    <label>Reward Name</label>
                    <input type="text" placeholder="e.g., Movie night">
                </div>

                <div class="input-group">
                    <label>Description</label>
                    <textarea rows="3" placeholder="What do they get?"></textarea>
                </div>

                <div class="input-group">
                    <label>Dollar Value</label>
                    <div style="position: relative;">
                        <span style="position: absolute; left: 14px; top: 50%; transform: translateY(-50%); font-size: 16px; color: var(--text-secondary);">$</span>
                        <input type="number" placeholder="e.g., 5.00" style="padding-left: 30px;" id="reward-dollar-input" oninput="updateRewardPointCost(this.value)">
                    </div>
                    <div style="margin-top: 8px; padding: 10px 14px; background: var(--bg); border-radius: 10px; display: flex; justify-content: space-between; align-items: center;">
                        <span style="font-size: 13px; color: var(--text-secondary);">Point Cost (auto-calculated)</span>
                        <span style="font-size: 16px; font-weight: 700; color: var(--primary);" id="reward-auto-points"><i class="fas fa-coins" style="color: var(--accent); font-size: 13px;"></i> 100 pts</span>
                    </div>
                    <div style="font-size: 11px; color: var(--text-secondary); margin-top: 4px;">Based on your rate: 20 pts per $1.00</div>
                </div>

                <div class="input-group">
                    <label>Icon/Emoji</label>
                    <input type="text" placeholder="e.g., , , " maxlength="2">
                </div>

                <div class="input-group">
                    <label>Available To</label>
                    <div class="kid-selector">
                        <div class="kid-chip selected">All Kids</div>
                        <div class="kid-chip">Maggie Only</div>
                        <div class="kid-chip">Jake Only</div>
                        <div class="kid-chip">Lily Only</div>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="navigateTo('parent-rewards')">
                    <i class="fas fa-check"></i> Create Reward
                </button>
            </div>
        </div>

        <!-- SCREEN 14B: PARENT WISHLIST REVIEW -->
        <div id="parent-wishlist" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('parent-dashboard')"></i>
                <h1>Kids' Wishlists</h1>
                <p>Review wishes & gift ideas</p>
            </div>
            <div class="content">
                <div class="section-header">
                    <div class="section-title">Maggie's Wishes</div>
                </div>

                <div class="wishlist-item">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div style="font-size: 16px; font-weight: 600; color: var(--text);">Nintendo Switch Game</div>
                        <span class="wishlist-status wishlist-approved">Approved </span>
                    </div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Super Mario Wonder  it looks so fun!</p>
                    <div style="display: flex; gap: 6px; align-items: center; margin-bottom: 12px;">
                        <span class="occasion-tag occasion-birthday"> Birthday</span>
                        <span style="font-size: 12px; color: var(--text-secondary);">~$50</span>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-secondary" style="font-size: 12px; padding: 8px;" onclick="navigateTo('parent-rewards')">
                            <i class="fas fa-gift"></i> Add as Reward
                        </button>
                    </div>
                </div>

                <div class="wishlist-item">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div style="font-size: 16px; font-weight: 600; color: var(--text);">Art Supply Kit</div>
                        <span class="wishlist-status wishlist-approved">Approved </span>
                    </div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Professional colored pencils and sketchbook</p>
                    <div style="display: flex; gap: 6px; align-items: center;">
                        <span class="occasion-tag occasion-christmas"> Christmas</span>
                        <span style="font-size: 12px; color: var(--text-secondary);">~$35</span>
                    </div>
                </div>

                <div class="wishlist-item">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div style="font-size: 16px; font-weight: 600; color: var(--text);">Bluetooth Speaker</div>
                        <span class="wishlist-status wishlist-pending">Pending</span>
                    </div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">Small waterproof one for my room</p>
                    <div style="display: flex; gap: 6px; align-items: center; margin-bottom: 12px;">
                        <span class="occasion-tag occasion-anytime"> Anytime</span>
                        <span style="font-size: 12px; color: var(--text-secondary);">~$25</span>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-success" style="flex: 1; font-size: 12px; padding: 8px;">
                            <i class="fas fa-check"></i> Approve
                        </button>
                        <button class="btn btn-danger" style="flex: 1; font-size: 12px; padding: 8px;">
                            <i class="fas fa-times"></i> Decline
                        </button>
                    </div>
                </div>

                <div class="section-header" style="margin-top: 24px;">
                    <div class="section-title">Jake's Wishes</div>
                </div>

                <div class="wishlist-item">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div style="font-size: 16px; font-weight: 600; color: var(--text);">LEGO Star Wars Set</div>
                        <span class="wishlist-status wishlist-pending">Pending</span>
                    </div>
                    <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 8px;">The Millennium Falcon one!</p>
                    <div style="display: flex; gap: 6px; align-items: center; margin-bottom: 12px;">
                        <span class="occasion-tag occasion-birthday"> Birthday</span>
                        <span style="font-size: 12px; color: var(--text-secondary);">~$80</span>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-success" style="flex: 1; font-size: 12px; padding: 8px;">
                            <i class="fas fa-check"></i> Approve
                        </button>
                        <button class="btn btn-danger" style="flex: 1; font-size: 12px; padding: 8px;">
                            <i class="fas fa-times"></i> Decline
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- SCREEN 14C: PARENT GIVE BADGE -->
        <div id="parent-give-badge" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('parent-dashboard')"></i>
                <h1>Give Badge</h1>
                <p>Reward outstanding behavior</p>
            </div>
            <div class="content">
                <div class="input-group">
                    <label>Who deserves this badge?</label>
                    <div class="kid-selector">
                        <div class="kid-chip selected" onclick="this.classList.toggle('selected')">Maggie</div>
                        <div class="kid-chip" onclick="this.classList.toggle('selected')">Jake</div>
                        <div class="kid-chip" onclick="this.classList.toggle('selected')">Lily</div>
                    </div>
                </div>

                <div class="input-group">
                    <label>Choose a Badge</label>
                </div>
                <div class="badges-grid" style="margin-bottom: 20px;">
                    <div class="badge-selectable" onclick="selectBadge(this)">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #FFD700, #FFA500);"></div>
                            <div class="badge-label">Super Star</div>
                        </div>
                    </div>
                    <div class="badge-selectable" onclick="selectBadge(this)">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #FF69B4, #D63384);"></div>
                            <div class="badge-label">Hard Worker</div>
                        </div>
                    </div>
                    <div class="badge-selectable" onclick="selectBadge(this)">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #39D353, #28a745);"></div>
                            <div class="badge-label">Above & Beyond</div>
                        </div>
                    </div>
                    <div class="badge-selectable" onclick="selectBadge(this)">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #58A6FF, #2E86AB);"></div>
                            <div class="badge-label">Chore Master</div>
                        </div>
                    </div>
                    <div class="badge-selectable" onclick="selectBadge(this)">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #FF6B35, #E65100);"></div>
                            <div class="badge-label">On Fire</div>
                        </div>
                    </div>
                    <div class="badge-selectable" onclick="selectBadge(this)">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #9B59B6, #6C3483);"></div>
                            <div class="badge-label">Royalty</div>
                        </div>
                    </div>
                    <div class="badge-selectable" onclick="selectBadge(this)">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #1ABC9C, #16A085);"></div>
                            <div class="badge-label">Team Player</div>
                        </div>
                    </div>
                    <div class="badge-selectable" onclick="selectBadge(this)">
                        <div class="badge-display">
                            <div class="badge-icon" style="background: linear-gradient(135deg, #E74C3C, #C0392B);"></div>
                            <div class="badge-label">Kind Heart</div>
                        </div>
                    </div>
                </div>

                <div class="input-group">
                    <label>Why are you giving this badge?</label>
                    <textarea rows="2" placeholder="e.g., Helped your sister without being asked!"></textarea>
                </div>

                <div class="input-group">
                    <label>Bonus Points (optional)</label>
                    <input type="number" placeholder="e.g., 25">
                </div>

                <button class="btn btn-primary" onclick="navigateTo('parent-dashboard')">
                    <i class="fas fa-medal"></i> Award Badge
                </button>
            </div>
        </div>

        <!-- SCREEN 15: PARENT FAMILY MANAGEMENT -->
        <div id="parent-family" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('parent-dashboard')"></i>
                    </div>
                    <div class="header-top-right">
                        <div class="role-switcher" onclick="toggleRole()">
                            <i class="fas fa-repeat"></i> <span class="role-text">Switch to Kid</span>
                        </div>
                    </div>
                </div>
                <div class="header-title-row">
                    <h1>Family Management</h1>
                    <p>The Johnson Family</p>
                </div>
            </div>
            <div class="content">
                <div class="section-header">
                    <div class="section-title">Adults</div>
                </div>

                <div class="member-item">
                    <div class="member-avatar">
                        M
                        <div class="avatar-camera"><i class="fas fa-camera"></i></div>
                    </div>
                    <div class="member-info">
                        <div class="member-name">Mike Johnson</div>
                        <div class="member-role">Admin</div>
                    </div>
                    <div class="badge badge-admin">ADMIN</div>
                </div>

                <div class="member-item">
                    <div class="member-avatar">
                        S
                        <div class="avatar-camera"><i class="fas fa-camera"></i></div>
                    </div>
                    <div class="member-info">
                        <div class="member-name">Sarah Johnson</div>
                        <div class="member-role">Parent</div>
                    </div>
                </div>

                <div class="section-header" style="margin-top: 24px;">
                    <div class="section-title">Kids</div>
                </div>

                <div class="member-item">
                    <div class="member-avatar">
                        M
                        <div class="avatar-camera"><i class="fas fa-camera"></i></div>
                    </div>
                    <div class="member-info">
                        <div class="member-name">Maggie (13)</div>
                        <div class="member-role">135 points  4 active chores</div>
                    </div>
                </div>

                <div class="member-item">
                    <div class="member-avatar">
                        J
                        <div class="avatar-camera"><i class="fas fa-camera"></i></div>
                    </div>
                    <div class="member-info">
                        <div class="member-name">Jake (10)</div>
                        <div class="member-role">70 points  2 active chores</div>
                    </div>
                </div>

                <div class="member-item">
                    <div class="member-avatar">
                        L
                        <div class="avatar-camera"><i class="fas fa-camera"></i></div>
                    </div>
                    <div class="member-info">
                        <div class="member-name">Lily (8)</div>
                        <div class="member-role">55 points  2 active chores</div>
                    </div>
                </div>

                <button class="btn btn-primary" style="margin-top: 20px;">
                    <i class="fas fa-user-plus"></i> Invite Family Member
                </button>

                <button class="btn btn-secondary" onclick="navigateTo('parent-settings')" style="margin-top: 12px;">
                    <i class="fas fa-cog"></i> Family Settings
                </button>
            </div>
            <div class="bottom-nav parent-nav">
                <div class="nav-item" onclick="navigateTo('parent-dashboard')">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-verify')">
                    <i class="fas fa-check-circle"></i>
                    <span>Verify</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-rewards')">
                    <i class="fas fa-gift"></i>
                    <span>Rewards</span>
                </div>
                <div class="nav-item" onclick="navigateTo('parent-living-room')">
                    <i class="fas fa-couch"></i>
                    <span>Living Room</span>
                </div>
                <div class="nav-item active" onclick="navigateTo('parent-family')">
                    <i class="fas fa-users"></i>
                    <span>Family</span>
                </div>
            </div>
        </div>

        <!-- SCREEN 15B: PARENT COMPANION CONFIG -->
        <div id="parent-companion-config" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('parent-settings')"></i>
                <h1>Chal Settings</h1>
                <p>Shape your kids' companion</p>
            </div>
            <div class="content">
                <div class="card">
                    <div class="config-section">
                        <div class="config-section-title">Message Types</div>
                        <div class="config-toggle-item">
                            <div>
                                <div style="font-size: 14px; font-weight: 500; color: var(--text);">Motivation & Encouragement</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">Positive reinforcement</div>
                            </div>
                            <div class="toggle-switch active">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div class="config-toggle-item">
                            <div>
                                <div style="font-size: 14px; font-weight: 500; color: var(--text);">Chore Tips & Productivity</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">How to work smarter</div>
                            </div>
                            <div class="toggle-switch active">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div class="config-toggle-item">
                            <div>
                                <div style="font-size: 14px; font-weight: 500; color: var(--text);">Fun Facts & Learning</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">Educational content</div>
                            </div>
                            <div class="toggle-switch active">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div class="config-toggle-item">
                            <div>
                                <div style="font-size: 14px; font-weight: 500; color: var(--text);">Kindness Reminders</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">Family values</div>
                            </div>
                            <div class="toggle-switch active">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div class="config-toggle-item">
                            <div>
                                <div style="font-size: 14px; font-weight: 500; color: var(--text);">Financial Literacy</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">Money skills <span class="badge badge-post-mvp">POST-MVP</span></div>
                            </div>
                            <div class="toggle-switch">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="config-section">
                        <div class="config-section-title">Suggestion Mode</div>
                        <div class="config-radio-item selected">
                            <div style="font-weight: 600; margin-bottom: 4px;">Encouraging</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">"You're doing great! Keep it up!"</div>
                        </div>
                        <div class="config-radio-item">
                            <div style="font-weight: 600; margin-bottom: 4px;">Coaching</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">"Try tackling the hardest chore first!"</div>
                        </div>
                        <div class="config-radio-item">
                            <div style="font-weight: 600; margin-bottom: 4px;">Educational</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">"Did you know doing chores builds discipline?"</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="config-section">
                        <div class="config-section-title">Custom Messages</div>
                        <div class="custom-message-item">
                            <i class="fas fa-quote-left" style="margin-right: 8px; color: var(--secondary);"></i>
                            "Remember: homework before screen time!"
                        </div>
                        <div class="custom-message-item">
                            <i class="fas fa-quote-left" style="margin-right: 8px; color: var(--secondary);"></i>
                            "Be kind to your siblings today"
                        </div>
                        <button class="btn btn-secondary" style="margin-top: 12px; font-size: 14px; padding: 12px;">
                            <i class="fas fa-plus"></i> Add Message
                        </button>
                    </div>
                </div>

                <div class="card" style="background: var(--bg-light); opacity: 0.6;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                        <div style="font-size: 32px;"></div>
                        <div>
                            <div style="font-weight: 600; display: flex; align-items: center; gap: 8px;">
                                AI Suggestions
                                <span class="badge badge-post-mvp">POST-MVP</span>
                            </div>
                        </div>
                    </div>
                    <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                        Coming soon: Chal will learn your family's patterns and give personalized advice based on each child's behavior and preferences.
                    </p>
                </div>
            </div>
        </div>

        <!-- SCREEN 16: PARENT SETTINGS -->
        <div id="parent-settings" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('parent-dashboard')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Settings</h1>
                    <p>Customize your experience</p>
                </div>
            </div>
            <div class="content">

                <!-- Family Code at top -->
                <div class="card" style="text-align: center; background: linear-gradient(135deg, var(--primary), var(--secondary));">
                    <div style="font-size: 13px; color: rgba(255,255,255,0.8); margin-bottom: 4px;">Family Code</div>
                    <div style="font-size: 28px; font-weight: 700; color: white; letter-spacing: 4px;">JOHN13</div>
                    <div style="font-size: 12px; color: rgba(255,255,255,0.7); margin-top: 4px;">Share with family members to join</div>
                </div>

                <!-- My Profile -->
                <div class="settings-section">
                    <div class="settings-section-title">My Profile</div>
                    <div class="card">
                        <div style="display: flex; align-items: center; gap: 16px;">
                            <div class="profile-pic-large" style="width: 60px; height: 60px; font-size: 24px; margin: 0;">
                                M
                                <div class="avatar-camera" style="width: 22px; height: 22px; font-size: 10px;"><i class="fas fa-camera"></i></div>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-size: 18px; font-weight: 700; color: var(--text);">Mike Johnson</div>
                                <div style="font-size: 13px; color: var(--text-secondary);">Admin  mike@email.com</div>
                            </div>
                            <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                        </div>
                    </div>
                </div>

                <!-- My Kids -->
                <div class="settings-section">
                    <div class="settings-section-title">My Kids</div>
                    <div class="card" style="padding: 0;">
                        <div class="settings-item" style="border-bottom: 1px solid var(--border);">
                            <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
                                <div style="width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, var(--secondary), var(--primary)); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 14px;">M</div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text);">Maggie</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">Code: MAG01</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 12px; color: var(--text-secondary); display: flex; align-items: center; gap: 4px;">
                                    <i class="fas fa-lock" style="font-size: 10px;"></i> PIN
                                    <div class="toggle-switch active" style="transform: scale(0.7);">
                                        <div class="toggle-thumb"></div>
                                    </div>
                                </div>
                                <span style="font-size: 12px; color: var(--secondary); cursor: pointer;" onclick="showToast('PIN reset  Maggie will set a new one')">Reset PIN</span>
                            </div>
                        </div>
                        <div class="settings-item" style="border-bottom: 1px solid var(--border);">
                            <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
                                <div style="width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, #39D353, #2196F3); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 14px;">J</div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text);">Jake</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">Code: JAK01</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 12px; color: var(--text-secondary); display: flex; align-items: center; gap: 4px;">
                                    <i class="fas fa-lock" style="font-size: 10px;"></i> PIN
                                    <div class="toggle-switch active" style="transform: scale(0.7);">
                                        <div class="toggle-thumb"></div>
                                    </div>
                                </div>
                                <span style="font-size: 12px; color: var(--secondary); cursor: pointer;" onclick="showToast('PIN reset  Jake will set a new one')">Reset PIN</span>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
                                <div style="width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, #FF69B4, #FF6B35); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 14px;">L</div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text);">Lily</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">Code: LIL01</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="font-size: 12px; color: var(--text-secondary); display: flex; align-items: center; gap: 4px;">
                                    <i class="fas fa-lock" style="font-size: 10px;"></i> PIN
                                    <div class="toggle-switch" style="transform: scale(0.7);">
                                        <div class="toggle-thumb"></div>
                                    </div>
                                </div>
                                <span style="font-size: 12px; color: #999;">No PIN</span>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-outline" style="font-size: 14px; margin-top: 8px;" onclick="navigateTo('add-kids')">
                        <i class="fas fa-plus"></i> Add Kid
                    </button>
                </div>

                <!-- Family Pet -->
                <div class="settings-section">
                    <div class="settings-section-title">Family Pet</div>
                    <div class="card" onclick="navigateTo('parent-companion-config')" style="cursor: pointer;">
                        <div style="display: flex; align-items: center; gap: 16px;">
                            <div style="font-size: 40px;" data-companion-emoji></div>
                            <div style="flex: 1;">
                                <div class="card-title">Chal Settings</div>
                                <p style="font-size: 13px; color: var(--text-secondary); margin-top: 4px;">
                                    Configure your kids' companion
                                </p>
                            </div>
                            <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                        </div>
                    </div>
                </div>

                <!-- Points Economy -->
                <div class="settings-section">
                    <div class="settings-section-title">Points Economy</div>
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                            <div>
                                <div style="font-size: 14px; font-weight: 600; color: var(--text);">Points per Dollar</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">How many points equal $1.00</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                            <input type="range" min="5" max="50" value="20" step="5" id="ppd-slider" oninput="updatePointsPerDollar(this.value)" style="flex: 1; accent-color: var(--primary);">
                            <div style="min-width: 70px; text-align: center; font-size: 20px; font-weight: 700; color: var(--primary);" id="ppd-value">20 pts</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 11px; color: var(--text-secondary); margin-bottom: 16px;">
                            <span>5 pts/$1</span>
                            <span>50 pts/$1</span>
                        </div>
                        <div style="background: var(--bg); border-radius: 12px; padding: 12px; display: flex; align-items: center; gap: 12px;">
                            <i class="fas fa-info-circle" style="color: var(--secondary); font-size: 16px;"></i>
                            <div style="font-size: 12px; color: var(--text-secondary); line-height: 1.4;">
                                At <strong id="ppd-rate-label">20 pts/$1</strong>: a $5 reward costs <strong id="ppd-example">100 pts</strong>. Kids earn points from chores  this rate sets reward pricing.
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px; margin-top: 12px;">
                            <button class="btn btn-outline" style="flex: 1; font-size: 12px; padding: 8px;" onclick="document.getElementById('ppd-slider').value=10; updatePointsPerDollar(10);">Easy (10)</button>
                            <button class="btn btn-outline" style="flex: 1; font-size: 12px; padding: 8px; border-color: var(--primary); color: var(--primary);" onclick="document.getElementById('ppd-slider').value=20; updatePointsPerDollar(20);">Standard (20)</button>
                            <button class="btn btn-outline" style="flex: 1; font-size: 12px; padding: 8px;" onclick="document.getElementById('ppd-slider').value=40; updatePointsPerDollar(40);">Hard (40)</button>
                        </div>
                    </div>
                </div>

                <!-- Appearance -->
                <div class="settings-section">
                    <div class="settings-section-title">Appearance</div>
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <div>
                                <div style="font-size: 14px; font-weight: 600; color: var(--text);">Dark Mode</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">Switch to dark theme</div>
                            </div>
                            <div class="toggle-switch" id="dark-mode-toggle" onclick="toggleDarkMode()">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>

                        <div style="font-size: 14px; font-weight: 600; color: var(--text); margin-bottom: 12px;">Color Theme</div>
                        <div class="theme-grid">
                            <div class="theme-item theme-ocean active" onclick="setTheme('ocean')">
                                <div class="theme-preview"></div>
                                <div class="theme-name">Ocean</div>
                            </div>
                            <div class="theme-item theme-sunset" onclick="setTheme('sunset')">
                                <div class="theme-preview"></div>
                                <div class="theme-name">Sunset</div>
                            </div>
                            <div class="theme-item theme-forest" onclick="setTheme('forest')">
                                <div class="theme-preview"></div>
                                <div class="theme-name">Forest</div>
                            </div>
                            <div class="theme-item theme-midnight" onclick="setTheme('midnight')">
                                <div class="theme-preview"></div>
                                <div class="theme-name">Midnight</div>
                            </div>
                            <div class="theme-item theme-bubblegum" onclick="setTheme('bubblegum')">
                                <div class="theme-preview"></div>
                                <div class="theme-name">Bubblegum</div>
                            </div>
                            <div class="theme-item theme-arctic" onclick="setTheme('arctic')">
                                <div class="theme-preview"></div>
                                <div class="theme-name">Arctic</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notifications -->
                <div class="settings-section">
                    <div class="settings-section-title">Notifications</div>
                    <div class="card" style="padding: 0;">
                        <div class="settings-item" style="border-bottom: 1px solid var(--border);">
                            <span style="font-size: 14px; color: var(--text);">Chore completions</span>
                            <div class="toggle-switch active">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div class="settings-item" style="border-bottom: 1px solid var(--border);">
                            <span style="font-size: 14px; color: var(--text);">Reward redemptions</span>
                            <div class="toggle-switch active">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div class="settings-item" style="border-bottom: 1px solid var(--border);">
                            <span style="font-size: 14px; color: var(--text);">Cash-out requests</span>
                            <div class="toggle-switch active">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div class="settings-item">
                            <span style="font-size: 14px; color: var(--text);">Weekly summaries</span>
                            <div class="toggle-switch">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Management -->
                <div class="settings-section">
                    <div class="settings-section-title">Management</div>
                    <div class="card" style="padding: 0;">
                        <div class="settings-item" style="border-bottom: 1px solid var(--border); cursor: pointer;" onclick="navigateTo('parent-rewards')">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <i class="fas fa-gift" style="color: var(--secondary); width: 20px; text-align: center;"></i>
                                <span style="font-size: 14px; color: var(--text);">Manage Rewards</span>
                            </div>
                            <i class="fas fa-chevron-right" style="color: var(--text-secondary); font-size: 12px;"></i>
                        </div>
                        <div class="settings-item" style="border-bottom: 1px solid var(--border); cursor: pointer;" onclick="navigateTo('parent-family')">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <i class="fas fa-users" style="color: var(--secondary); width: 20px; text-align: center;"></i>
                                <span style="font-size: 14px; color: var(--text);">Family Members</span>
                            </div>
                            <i class="fas fa-chevron-right" style="color: var(--text-secondary); font-size: 12px;"></i>
                        </div>
                        <div class="settings-item" style="cursor: pointer;" onclick="showToast('Invite link copied!')">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <i class="fas fa-user-plus" style="color: var(--secondary); width: 20px; text-align: center;"></i>
                                <span style="font-size: 14px; color: var(--text);">Invite Parent / Guardian</span>
                            </div>
                            <i class="fas fa-chevron-right" style="color: var(--text-secondary); font-size: 12px;"></i>
                        </div>
                    </div>
                </div>

                <!-- Account -->
                <div class="settings-section">
                    <div class="settings-section-title">Account</div>
                    <div class="card" style="padding: 0;">
                        <div class="settings-item" style="border-bottom: 1px solid var(--border); cursor: pointer;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <i class="fas fa-lock" style="color: var(--secondary); width: 20px; text-align: center;"></i>
                                <span style="font-size: 14px; color: var(--text);">Change Password</span>
                            </div>
                            <i class="fas fa-chevron-right" style="color: var(--text-secondary); font-size: 12px;"></i>
                        </div>
                        <div class="settings-item" style="border-bottom: 1px solid var(--border); cursor: pointer;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <i class="fas fa-envelope" style="color: var(--secondary); width: 20px; text-align: center;"></i>
                                <span style="font-size: 14px; color: var(--text);">Update Email</span>
                            </div>
                            <i class="fas fa-chevron-right" style="color: var(--text-secondary); font-size: 12px;"></i>
                        </div>
                        <div class="settings-item" style="cursor: pointer;" onclick="navigateTo('splash')">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <i class="fas fa-sign-out-alt" style="color: #dc3545; width: 20px; text-align: center;"></i>
                                <span style="font-size: 14px; color: #dc3545;">Log Out</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; padding: 16px 0 32px;">
                    <div style="font-size: 13px; color: #999;">
                        Challey v3.0.0<br>
                        Made with care for families
                    </div>
                </div>
            </div>
        </div>

        <!-- SCREEN 17: NOTIFICATIONS PANEL -->
        <div id="notifications-panel" class="notification-panel">
            <div class="notification-content">
                <div class="notification-header">
                    <h2>Notifications</h2>
                    <div class="close-btn" onclick="toggleNotifications()">
                        <i class="fas fa-times"></i>
                    </div>
                </div>

                <div class="activity-item" style="background: #fff3cd;">
                    <div class="activity-icon reward">
                        <i class="fas fa-gift"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Maggie redeemed Movie Night  please fulfill</div>
                        <div class="activity-time">2 days ago</div>
                    </div>
                </div>

                <div class="activity-item" onclick="toggleNotifications(); navigateTo('parent-swap-review');" style="cursor: pointer; background: #E8D4FF;">
                    <div class="activity-icon" style="background: #6f42c1; color: white;">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Maggie wants to change a chore  review request</div>
                        <div class="activity-time">1 hour ago</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon new">
                        <i class="fas fa-check"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Maggie completed: Clean the garage  verify now</div>
                        <div class="activity-time">2 hours ago</div>
                    </div>
                </div>

                <div class="activity-item" onclick="toggleNotifications(); navigateTo('parent-shoutout-review');" style="cursor: pointer; background: #FFF0F5;">
                    <div class="activity-icon kindness">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Sibling shout-out: Maggie gave Jake "Amazing Sibling" badge with 5 pts!</div>
                        <div style="font-size: 12px; color: #FF69B4; font-weight: 600; margin-top: 2px;"><i class="fas fa-rocket"></i> Tap to boost</div>
                        <div class="activity-time">1 hour ago</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon" style="background: #E8D4FF; color: #6f42c1;">
                        <i class="fas fa-repeat"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Swap alert: Maggie wants to swap 'Clean garage' with Jake's 'Vacuum'</div>
                        <div class="activity-time">5 hours ago</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon completed">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Jake earned 30 points!</div>
                        <div class="activity-time">1 day ago</div>
                    </div>
                </div>

                <div class="activity-item" style="background: #fff3cd;">
                    <div class="activity-icon reward">
                        <i class="fas fa-gift"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Jake redeemed Extra Screen Time  please fulfill</div>
                        <div class="activity-time">5 hours ago</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SCREEN: KID CASHOUT CONFIRM -->
        <div id="kid-cashout-confirm" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-points')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Cash Out</h1>
                    <p>Choose how much to cash out</p>
                </div>
            </div>
            <div class="content" style="text-align: center; padding-top: 24px;">
                <div style="font-size: 56px; margin-bottom: 16px;"></div>
                <h2 style="font-size: 22px; color: var(--text); margin-bottom: 16px;">You're cashing out</h2>
                <div style="font-size: 36px; font-weight: 700; color: #28a745; margin-bottom: 4px;">
                    <span id="cashout-pts-display">100</span> pts ($<span id="cashout-dollar-display">5.00</span>)
                </div>
                <div style="margin: 24px 0;">
                    <input type="range" min="20" max="200" value="100" step="10"
                        oninput="updateCashoutAmount(this.value)"
                        style="width: 100%; accent-color: var(--secondary); height: 8px; cursor: pointer;">
                    <div style="display: flex; justify-content: space-between; font-size: 12px; color: var(--text-secondary); margin-top: 6px;">
                        <span>20 pts ($1.00)</span>
                        <span>200 pts ($10.00)</span>
                    </div>
                </div>
                <div style="display: flex; justify-content: center; gap: 8px; margin-bottom: 16px;">
                    <button class="btn btn-outline" onclick="document.querySelector('#kid-cashout-confirm input[type=range]').value=40; updateCashoutAmount(40);" style="padding: 6px 14px; font-size: 13px;">40 pts</button>
                    <button class="btn btn-outline" onclick="document.querySelector('#kid-cashout-confirm input[type=range]').value=100; updateCashoutAmount(100);" style="padding: 6px 14px; font-size: 13px;">100 pts</button>
                    <button class="btn btn-outline" onclick="document.querySelector('#kid-cashout-confirm input[type=range]').value=200; updateCashoutAmount(200);" style="padding: 6px 14px; font-size: 13px;">200 pts</button>
                </div>
                <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 24px;">Dad will be notified to confirm</p>
                <button class="btn btn-success" onclick="createConfetti(); setTimeout(function(){ navigateTo('kid-cashout-pending'); }, 800);">
                    <i class="fas fa-dollar-sign"></i> Request Cash Out
                </button>
                <button class="btn btn-outline" onclick="navigateTo('kid-points')" style="margin-top: 12px;">Cancel</button>
            </div>
        </div>

        <!-- SCREEN: KID CASHOUT PENDING (Step 2: Waiting for Dad) -->
        <div id="kid-cashout-pending" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-points')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Cash-Out Status</h1>
                    <p>100 pts  $5.00</p>
                </div>
            </div>
            <div class="content" style="display: flex; flex-direction: column; align-items: center; text-align: center; padding-top: 24px;">
                <div style="font-size: 64px; margin-bottom: 16px;"></div>
                <h2 style="font-size: 22px; color: var(--text); margin-bottom: 8px;">Pending Cash!</h2>
                <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 24px;">Waiting for Dad to confirm payment</p>
                <div style="width: 100%; max-width: 280px; text-align: left;">
                    <div class="cashout-status-step">
                        <div class="cashout-status-dot done"><i class="fas fa-check"></i></div>
                        <span style="font-size: 14px; color: var(--text);">Requested</span>
                        <span style="font-size: 11px; color: var(--text-secondary); margin-left: auto;">Just now</span>
                    </div>
                    <div class="cashout-status-line"></div>
                    <div class="cashout-status-step">
                        <div class="cashout-status-dot active"><i class="fas fa-spinner fa-spin" style="font-size: 10px;"></i></div>
                        <span style="font-size: 14px; color: var(--text);">Waiting for Dad</span>
                    </div>
                    <div class="cashout-status-line"></div>
                    <div class="cashout-status-step">
                        <div class="cashout-status-dot"></div>
                        <span style="font-size: 14px; color: var(--text-secondary);">Dad confirms paid</span>
                    </div>
                    <div class="cashout-status-line"></div>
                    <div class="cashout-status-step">
                        <div class="cashout-status-dot"></div>
                        <span style="font-size: 14px; color: var(--text-secondary);">You confirm received</span>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="navigateTo('kid-points')" style="margin-top: 32px;">Back to Points</button>
                <!-- Demo: simulate Dad approved + paid -->
                <button class="btn btn-outline" onclick="navigateTo('kid-cashout-paid')" style="margin-top: 12px; font-size: 13px;">
                    <i class="fas fa-forward"></i> Demo: Dad marks paid
                </button>
            </div>
        </div>

        <!-- SCREEN: KID CASHOUT PAID (Step 3: Dad paid, kid confirms) -->
        <div id="kid-cashout-paid" class="screen">
            <div class="header">
                <div class="header-top-row">
                    <div class="header-top-left">
                        <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-points')"></i>
                    </div>
                    <div class="header-top-right"></div>
                </div>
                <div class="header-title-row">
                    <h1>Cash-Out Status</h1>
                    <p>100 pts  $5.00</p>
                </div>
            </div>
            <div class="content" style="display: flex; flex-direction: column; align-items: center; text-align: center; padding-top: 24px;">
                <div style="font-size: 64px; margin-bottom: 16px;"></div>
                <h2 style="font-size: 22px; color: #28a745; margin-bottom: 8px;">Dad sent your cash!</h2>
                <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 24px;">Confirm once you've received $5.00</p>
                <div style="width: 100%; max-width: 280px; text-align: left;">
                    <div class="cashout-status-step">
                        <div class="cashout-status-dot done"><i class="fas fa-check"></i></div>
                        <span style="font-size: 14px; color: var(--text);">Requested</span>
                    </div>
                    <div class="cashout-status-line done"></div>
                    <div class="cashout-status-step">
                        <div class="cashout-status-dot done"><i class="fas fa-check"></i></div>
                        <span style="font-size: 14px; color: var(--text);">Dad approved</span>
                    </div>
                    <div class="cashout-status-line done"></div>
                    <div class="cashout-status-step">
                        <div class="cashout-status-dot done"><i class="fas fa-check"></i></div>
                        <span style="font-size: 14px; color: var(--text);">Dad marked paid</span>
                    </div>
                    <div class="cashout-status-line"></div>
                    <div class="cashout-status-step">
                        <div class="cashout-status-dot active" style="background: #28a745; border-color: #28a745;"><i class="fas fa-hand-holding-dollar" style="font-size: 10px;"></i></div>
                        <span style="font-size: 14px; font-weight: 600; color: var(--text);">Confirm you received it</span>
                    </div>
                </div>
                <button class="btn btn-success" onclick="createConfetti(); showToast('Cash received! $5.00 confirmed.'); setTimeout(function(){ navigateTo('kid-points'); }, 1500);" style="margin-top: 24px; font-size: 16px; padding: 16px;">
                    <i class="fas fa-check-circle"></i> Yes, I received $5.00!
                </button>
                <button class="btn btn-outline" onclick="navigateTo('kid-points')" style="margin-top: 12px;">Not yet  check later</button>
            </div>
        </div>

        <!-- SCREEN: KID REDEEM CONFIRM -->
        <div id="kid-redeem-confirm" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-rewards')"></i>
                <h1>Confirm Redemption</h1>
                <p>Almost there!</p>
            </div>
            <div class="content" style="text-align: center; padding-top: 40px;">
                <div style="font-size: 64px; margin-bottom: 16px;"></div>
                <h2 style="font-size: 22px; color: var(--text); margin-bottom: 8px;">Redeem Movie Night?</h2>
                <div style="font-size: 28px; font-weight: 700; color: var(--accent); margin-bottom: 8px;">50 points</div>
                <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">You'll have 85 points remaining</p>
                <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 32px;">Dad will be notified to fulfill this reward</p>
                <button class="btn btn-primary" onclick="createConfetti(); showToast('Reward redeemed!'); setTimeout(function(){ navigateTo('kid-rewards'); }, 1200);">
                    <i class="fas fa-star"></i> Redeem
                </button>
                <button class="btn btn-outline" onclick="navigateTo('kid-rewards')" style="margin-top: 12px;">Cancel</button>
            </div>
        </div>

        <!-- SCREEN 18: EDUCATION HUB (POST-MVP) -->
        <div id="education-hub" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-chores')"></i>
                <h1>Education Hub</h1>
                <p>Earn points for schoolwork</p>
                <span class="badge badge-post-mvp scope-tag">POST-MVP</span>
            </div>
            <div class="content">
                <div class="section-header">
                    <div class="section-title">Connected Accounts</div>
                </div>

                <div class="card">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                        <div style="font-size: 32px;"></div>
                        <div style="flex: 1;">
                            <div class="card-title">Khan Academy</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Connected as Maggie J.</div>
                        </div>
                        <i class="fas fa-check-circle" style="color: #28a745; font-size: 24px;"></i>
                    </div>
                </div>

                <div class="card">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="font-size: 32px;"></div>
                        <div style="flex: 1;">
                            <div class="card-title">Google Classroom</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Not connected</div>
                        </div>
                        <button class="btn btn-secondary" style="padding: 8px 16px; width: auto; font-size: 14px;">Connect</button>
                    </div>
                </div>

                <div class="card">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="font-size: 32px;"></div>
                        <div style="flex: 1;">
                            <div class="card-title">Canvas LMS</div>
                            <div style="font-size: 13px; color: var(--text-secondary);">Not connected</div>
                        </div>
                        <button class="btn btn-secondary" style="padding: 8px 16px; width: auto; font-size: 14px;">Connect</button>
                    </div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px; padding-left: 44px;">
                        <i class="fas fa-info-circle"></i> Requires school approval
                    </div>
                </div>

                <div class="section-header" style="margin-top: 30px;">
                    <div class="section-title">Recent Education Points</div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon completed">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Khan Academy: Algebra Basics  completed 3 exercises</div>
                        <div class="activity-time">Today  +15 pts</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon completed">
                        <i class="fas fa-video"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Khan Academy: Biology  watched 2 videos</div>
                        <div class="activity-time">Yesterday  +10 pts</div>
                    </div>
                </div>

                <div class="activity-item" style="opacity: 0.6;">
                    <div class="activity-icon" style="background: #f0f0f0; color: #999;">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Google Classroom: Math Homework submitted</div>
                        <div class="activity-time">2 days ago  +20 pts (example)</div>
                    </div>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <div class="stat-grid">
                        <div class="mini-stat">
                            <div class="mini-stat-value">25</div>
                            <div class="mini-stat-label">Education This Week</div>
                        </div>
                        <div class="mini-stat">
                            <div class="mini-stat-value">135</div>
                            <div class="mini-stat-label">Chores This Week</div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border);">
                        <div style="font-size: 28px; font-weight: 700; color: var(--secondary);">160 pts</div>
                        <div style="font-size: 13px; color: var(--text-secondary);">Total Points This Week</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SCREEN 19: ACHIEVEMENTS/BADGES (POST-MVP) -->
        <div id="achievements" class="screen">
            <div class="header">
                <i class="fas fa-arrow-left back-btn" onclick="navigateTo('kid-chores')"></i>
                <h1>Achievements</h1>
                <p>Badges & milestones</p>
                <span class="badge badge-post-mvp scope-tag">POST-MVP</span>
            </div>
            <div class="content">
                <div class="coming-soon-overlay">
                    <i class="fas fa-trophy"></i>
                    <h2>Coming Soon!</h2>
                    <p>Unlock badges, track streaks, and earn special rewards for hitting milestones.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentRole = 'kid';
        let currentTheme = 'ocean';
        let isDarkMode = false;

        function navigateTo(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            companionOnNavigate(screenId);
            // Initialize swipe cards when entering parent-verify
            if (screenId === 'parent-verify') {
                setTimeout(function() { initSwipeCards(); }, 150);
            }
        }

        function toggleRole() {
            if (currentRole === 'kid') {
                currentRole = 'parent';
                navigateTo('parent-dashboard');
            } else {
                currentRole = 'kid';
                navigateTo('kid-chores');
            }
            updateRoleText();
        }

        function switchRole(role) {
            currentRole = role;
            updateRoleText();
        }

        function updateRoleText() {
            const roleTexts = document.querySelectorAll('.role-text');
            roleTexts.forEach(el => {
                el.textContent = currentRole === 'kid' ? 'Switch to Parent' : 'Switch to Kid';
            });
        }

        function toggleNotifications() {
            const panel = document.getElementById('notifications-panel');
            panel.classList.toggle('active');
        }

        function setTheme(themeName) {
            currentTheme = themeName;
            document.documentElement.setAttribute('data-theme', themeName);

            // Update active state on all theme grids (parent + kid settings)
            document.querySelectorAll('.theme-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll(`.theme-${themeName}`).forEach(item => {
                item.classList.add('active');
            });
        }

        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.documentElement.setAttribute('data-dark', isDarkMode);

            // Sync both parent and kid dark mode toggles
            ['dark-mode-toggle', 'kid-dark-mode-toggle'].forEach(id => {
                const toggle = document.getElementById(id);
                if (toggle) {
                    if (isDarkMode) {
                        toggle.classList.add('active');
                    } else {
                        toggle.classList.remove('active');
                    }
                }
            });
        }

        function selectBadge(element) {
            document.querySelectorAll('.badge-selectable').forEach(b => b.classList.remove('selected'));
            element.classList.add('selected');
        }

        function toggleEmoji(element) {
            element.classList.toggle('selected');
        }

        function createConfetti() {
            const container = document.getElementById('confetti-container');
            const colors = ['#F18F01', '#2E86AB', '#FF6B35', '#FFD700', '#39D353', '#FF69B4'];

            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                container.appendChild(confetti);

                setTimeout(() => confetti.remove(), 3000);
            }
            companionCelebrate();
        }

        function submitChore() {
            createConfetti();
            setTimeout(() => {
                navigateTo('kid-chores');
            }, 1500);
        }

        function redeemReward() {
            createConfetti();
            setTimeout(() => {
                navigateTo('kid-rewards');
            }, 1500);
        }

        function approveChore() {
            navigateTo('parent-dashboard');
        }

        // Swap state
        let swapIncentiveOn = false;
        let swapIncentivePoints = 0;
        let selectedSwapChore = null;

        function selectSwapSibling() {
            navigateTo('kid-swap-sibling-select');
        }

        function chooseSibling(name) {
            // For prototype, both go to same screen. Update header.
            document.getElementById('swap-sibling-name').textContent = name;
            document.getElementById('swap-sibling-name2').textContent = name;
            document.getElementById('swap-sibling-name3').textContent = name;
            document.getElementById('swap-sibling-name4').textContent = name;
            document.getElementById('swap-sibling-name5').textContent = name;
            navigateTo('kid-swap-sibling');
        }

        function selectSwapChore(element) {
            document.querySelectorAll('.swap-chore-option').forEach(card => {
                card.style.border = '2px solid var(--border)';
                card.style.background = 'var(--bg-card)';
            });
            element.style.border = '2px solid var(--secondary)';
            element.style.background = 'rgba(46, 134, 171, 0.1)';
            selectedSwapChore = element.querySelector('.card-title').textContent;
            const pts = element.querySelector('.points-badge').textContent;
            // Update confirm screen
            document.getElementById('confirm-swap-get-name').textContent = selectedSwapChore;
            document.getElementById('confirm-swap-get-pts').textContent = pts;
        }

        function toggleIncentive() {
            swapIncentiveOn = !swapIncentiveOn;
            const toggle = document.getElementById('incentive-toggle');
            const sliderSection = document.getElementById('incentive-slider-section');
            if (swapIncentiveOn) {
                toggle.classList.add('active');
                sliderSection.classList.add('visible');
            } else {
                toggle.classList.remove('active');
                sliderSection.classList.remove('visible');
                swapIncentivePoints = 0;
                updateIncentiveDisplay();
            }
            updateConfirmIncentive();
        }

        function updateIncentivePoints(value) {
            swapIncentivePoints = parseInt(value);
            updateIncentiveDisplay();
            updateConfirmIncentive();
        }

        function updateIncentiveDisplay() {
            document.getElementById('incentive-value').textContent = swapIncentivePoints;
            document.getElementById('incentive-value-sub').textContent = swapIncentivePoints;
            document.getElementById('incentive-remaining').textContent = 135 - swapIncentivePoints;
        }

        function updateConfirmIncentive() {
            const incentiveLine = document.getElementById('confirm-incentive-line');
            const sentIncentive = document.getElementById('sent-incentive-line');
            const incomingBonus = document.getElementById('incoming-bonus');
            const acceptedBonus = document.getElementById('accepted-bonus');
            if (swapIncentiveOn && swapIncentivePoints > 0) {
                incentiveLine.style.display = 'block';
                incentiveLine.textContent = '+ ' + swapIncentivePoints + ' pts incentive';
                sentIncentive.style.display = 'block';
                sentIncentive.textContent = swapIncentivePoints + ' pts will transfer on acceptance';
                incomingBonus.style.display = 'inline-block';
                incomingBonus.textContent = '+ ' + swapIncentivePoints + ' bonus points!';
                acceptedBonus.style.display = 'block';
                acceptedBonus.textContent = '+' + swapIncentivePoints + ' bonus points received!';
            } else {
                incentiveLine.style.display = 'none';
                sentIncentive.style.display = 'none';
                incomingBonus.style.display = 'none';
                acceptedBonus.style.display = 'none';
            }
        }

        function submitSwapToSibling() {
            createConfetti();
            setTimeout(() => navigateTo('kid-swap-sibling-sent'), 800);
        }

        function viewIncomingSwap() {
            navigateTo('kid-swap-incoming');
        }

        function acceptSwap() {
            createConfetti();
            setTimeout(() => navigateTo('kid-swap-accepted'), 800);
        }

        function declineSwap() {
            navigateTo('kid-chores');
        }

        function updateCashoutAmount(value) {
            var pts = parseInt(value);
            var dollars = (pts / 20).toFixed(2);
            document.getElementById('cashout-pts-display').textContent = pts;
            document.getElementById('cashout-dollar-display').textContent = dollars;
        }

        function selectRole(el, role) {
            document.querySelectorAll('.role-option').forEach(function(opt) {
                opt.classList.remove('selected');
            });
            el.classList.add('selected');
        }

        // Points Economy
        var pointsPerDollar = 20;

        function updatePointsPerDollar(value) {
            pointsPerDollar = parseInt(value);
            document.getElementById('ppd-value').textContent = pointsPerDollar + ' pts';
            document.getElementById('ppd-rate-label').textContent = pointsPerDollar + ' pts/$1';
            document.getElementById('ppd-example').textContent = (pointsPerDollar * 5) + ' pts';
        }

        function updateRewardPointCost(dollarValue) {
            var dollars = parseFloat(dollarValue) || 0;
            var points = Math.round(dollars * pointsPerDollar);
            var el = document.getElementById('reward-auto-points');
            if (el) {
                el.innerHTML = '<i class="fas fa-coins" style="color: var(--accent); font-size: 13px;"></i> ' + points + ' pts';
            }
        }

        function submitSwapConfirm() {
            createConfetti();
            setTimeout(() => navigateTo('kid-swap-sibling-sent'), 800);
        }

        // Parent request flow
        function selectParentSwapChore(element) {
            document.querySelectorAll('#kid-swap-parent .swap-chore-option').forEach(card => {
                card.style.border = '2px solid var(--border)';
                card.style.background = 'var(--bg-card)';
            });
            element.style.border = '2px solid var(--secondary)';
            element.style.background = 'rgba(46, 134, 171, 0.1)';
            const name = element.querySelector('.card-title').textContent;
            const pts = element.querySelector('.points-badge').textContent;
            document.getElementById('parent-confirm-chore-name').textContent = name;
            document.getElementById('parent-confirm-chore-pts').textContent = pts;
        }

        function submitParentRequest() {
            navigateTo('kid-swap-parent-confirm');
        }

        function sendParentRequest() {
            createConfetti();
            setTimeout(() => navigateTo('kid-swap-parent-sent'), 800);
        }

        function approveSwapAsParent() {
            navigateTo('parent-dashboard');
        }

        function declineSwapAsParent() {
            const declineSection = document.getElementById('parent-decline-reason');
            declineSection.classList.toggle('visible');
        }

        function sendDecline() {
            navigateTo('parent-dashboard');
        }

        // Shout-out state
        let shoutoutTarget = '';
        let shoutoutBadgeName = 'Amazing Sibling';
        let shoutoutBadgeEmoji = '';
        let shoutoutPointsOn = false;
        let shoutoutPointsAmount = 5;

        function startShoutout(siblingName) {
            shoutoutTarget = siblingName;
            document.getElementById('shoutout-target-name').textContent = siblingName;
            // Reset selections
            document.querySelectorAll('.shoutout-badge-option').forEach(b => b.classList.remove('selected'));
            shoutoutPointsOn = false;
            document.getElementById('shoutout-toggle').classList.remove('active');
            document.getElementById('shoutout-points-slider-section').classList.remove('visible');
            navigateTo('kid-shoutout-create');
        }

        function selectShoutoutBadge(element, name, emoji) {
            document.querySelectorAll('.shoutout-badge-option').forEach(b => b.classList.remove('selected'));
            element.classList.add('selected');
            shoutoutBadgeName = name;
            shoutoutBadgeEmoji = emoji;
            document.getElementById('confirm-shoutout-badge').innerHTML = '<span>' + emoji + '</span><span style="font-weight: 600;">' + name + '</span>';
        }

        function toggleShoutoutPoints() {
            shoutoutPointsOn = !shoutoutPointsOn;
            const toggle = document.getElementById('shoutout-toggle');
            const section = document.getElementById('shoutout-points-slider-section');
            if (shoutoutPointsOn) {
                toggle.classList.add('active');
                section.classList.add('visible');
            } else {
                toggle.classList.remove('active');
                section.classList.remove('visible');
            }
        }

        function updateShoutoutPoints(value) {
            shoutoutPointsAmount = parseInt(value);
            document.getElementById('shoutout-points-value').textContent = shoutoutPointsAmount;
            document.getElementById('shoutout-remaining').textContent = 135 - shoutoutPointsAmount;
        }

        function sendShoutout() {
            // Update confirm screen
            document.getElementById('confirm-shoutout-target').textContent = 'To ' + shoutoutTarget;
            const noteEl = document.getElementById('shoutout-note');
            const note = noteEl.value || 'No note added';
            document.getElementById('confirm-shoutout-note').textContent = '"' + note + '"';
            const pointsEl = document.getElementById('confirm-shoutout-points');
            const sentPointsEl = document.getElementById('sent-shoutout-points');
            if (shoutoutPointsOn && shoutoutPointsAmount > 0) {
                pointsEl.style.display = 'block';
                pointsEl.textContent = '+ ' + shoutoutPointsAmount + ' pts gifted';
                sentPointsEl.style.display = 'block';
                sentPointsEl.textContent = shoutoutPointsAmount + ' pts gifted from your balance';
            } else {
                pointsEl.style.display = 'none';
                sentPointsEl.style.display = 'none';
            }
            document.getElementById('sent-shoutout-target').textContent = shoutoutTarget;
            createConfetti();
            setTimeout(() => navigateTo('kid-shoutout-sent'), 800);
        }

        function selectBoostAmount(element, amount) {
            document.querySelectorAll('.boost-section .kid-chip').forEach(c => c.classList.remove('selected'));
            element.classList.add('selected');
            document.getElementById('boost-amount-display').textContent = '+' + amount + ' pts each';
        }

        function boostShoutout() {
            createConfetti();
            setTimeout(() => navigateTo('parent-dashboard'), 800);
        }

        function togglePostLike(element) {
            const icon = element.querySelector('i');
            const countEl = element.querySelector('span');
            let count = parseInt(countEl.textContent);
            if (element.classList.contains('liked')) {
                element.classList.remove('liked');
                icon.className = 'far fa-heart';
                countEl.textContent = count - 1;
            } else {
                element.classList.add('liked');
                icon.className = 'fas fa-heart';
                countEl.textContent = count + 1;
            }
        }

        // Close notifications when clicking outside
        document.getElementById('notifications-panel').addEventListener('click', function(e) {
            if (e.target === this) {
                toggleNotifications();
            }
        });

        // ===== COMPANION: Chal the Octopus =====
        let companionVisible = false;
        let companionIntroSeen = false;
        let bubbleTimeout = null;
        let autoMessageInterval = null;
        let menuOpen = false;

        const screenMessages = {
            'splash': [
                "Welcome to Challey! Tap Get Started!",
                "Hey there! Ready for something awesome?",
            ],
            'join-family': [
                "Enter your family code to join!",
                "Almost there  just need your name!",
            ],
            'kid-chores': [
                "You've got 4 chores today. You got this!",
                "7-day streak! You're unstoppable!",
                "Every chore gets you closer to that reward!",
                "Which one should we tackle first?",
                "You're doing amazing today!",
            ],
            'kid-chore-detail': [
                "50 points for this one  totally worth it!",
                "Read the description carefully, then crush it!",
                "You've got the skills for this one!",
            ],
            'kid-complete': [
                "Nice work! Don't forget the photo proof!",
                "Almost done  snap that pic and submit!",
                "Dad's going to be impressed!",
            ],
            'kid-rewards': [
                "135 points! So many options!",
                "That sleepover is only 15 points away!",
                "You've earned this  treat yourself!",
            ],
            'kid-reward-detail': [
                "Ooh, good choice! Go for it!",
                "You deserve this one!",
            ],
            'kid-points': [
                "235 total points earned  incredible!",
                "Look at all those badges! You're a champ!",
                "Your points history is so impressive!",
            ],
            'kid-board': [
                "You're #1 this week! Crown secured!",
                "Friendly competition makes everyone better!",
                "Maybe give a shout-out to Jake or Lily!",
                "Check out your swag collection!",
            ],
            'kid-living-room': [
                "Welcome to The Living Room! See what the fam is up to.",
                "Lots of family moments here!",
                "Try posting a photo  share something fun!",
            ],
            'parent-living-room': [
                "Your family is so active! Love to see it.",
                "Check out what the kids are sharing!",
            ],
            'kid-settings': [
                "Make the app YOUR style!",
                "Try the Midnight theme  it's so cool!",
                "Dark mode is easy on the eyes at night!",
            ],
            'kid-swap-request': [
                "Smart move! Negotiation is a life skill!",
                "Sometimes a trade makes everyone happy!",
            ],
            'kid-swap-sibling-select': [
                "Who should we make a deal with?",
            ],
            'kid-swap-sibling': [
                "Pick a chore that works better for you!",
                "Pro tip: offering points makes it sweeter!",
            ],
            'kid-swap-parent': [
                "Dad might have something better for you!",
                "Try suggesting something you're great at!",
            ],
            'kid-swap-counter': ["Make Jake an offer he can't refuse!", "What can you offer instead?"],
            'kid-swap-counter-sent': ["Nice counter! Let's see what Maggie thinks."],
            'kid-swap-counter-received': ["Jake's got a deal for you! What do you think?"],
            'kid-shoutout-select': [
                "Being kind is the best reward!",
                "Shout-outs make everyone's day better!",
            ],
            'kid-shoutout-create': [
                "Tell them exactly what made you smile!",
                "A little kindness goes a long way!",
            ],
            'kid-shoutout-received': [
                "You're loved! How cool is that?",
                "Kindness comes back around!",
            ],
            'parent-dashboard': [
                "Your family is doing amazing!",
                "3 chores waiting for review!",
                "Check out that sibling shout-out!",
            ],
            'parent-verify': [
                "They worked hard! Let them know!",
                "A quick emoji reaction means the world!",
            ],
            'parent-create-chore': [
                "Clear descriptions help kids succeed!",
                "Fair points = motivated kids!",
            ],
            'parent-rewards': [
                "Great rewards keep everyone motivated!",
            ],
            'parent-family': [
                "What a great family you've got!",
            ],
            'join-family-code': [
                "Got your codes ready? Type them in!",
                "Your parent should have your member code!",
            ],
            'kid-set-pin': [
                "Pick 4 numbers you'll remember!",
                "This keeps your account safe!",
            ],
            'kid-confirm-pin': [
                "Type it one more time to be sure!",
            ],
            'kid-enter-pin': [
                "Welcome back! Enter your PIN to get in!",
            ],
            'kid-forgot-pin': [
                "No worries! Your parent can reset it for you.",
            ],
            'create-family-auth': [
                "Let's get your family set up!",
                "Pick the easiest way to sign in!",
            ],
            'create-family-manual': [
                "Just a few details and you're in!",
            ],
            'create-family-role': ["Nice to meet you! What should the kids call you?"],
            'create-family-name': [
                "What should we call your family?",
            ],
            'pick-family-pet': [
                "Choose a pet to be your family's helper!",
                "Every family needs a mascot!",
            ],
            'welcome-family': [
                "Your family is all set! Let's go!",
                "This is going to be awesome!",
            ],
            'parent-dashboard-empty': [
                "Let's add some kids to get started!",
                "Your family adventure starts here!",
            ],
            'add-kids': [
                "Who's joining the family?",
            ],
            'add-kids-success': [
                "Great team! Share those codes with the kids!",
            ],
            'setup-chores': [
                "Pick some chores to get started  you can always add more later!",
            ],
            'setup-rewards': [
                "Rewards keep everyone motivated!",
            ],
            'setup-first-post': [
                "A first post brings the family together!",
            ],
            'sibling-profile': [
                "Check out what they've been up to!",
            ],
            'kid-cashout-confirm': [
                "Almost there! Confirm your cash out!",
            ],
            'kid-cashout-pending': [
                "Your request is in! Hang tight!",
                "Dad will get to it soon!",
            ],
            'kid-cashout-paid': [
                "Dad sent the cash! Confirm when you have it!",
                "Cha-ching! Time to collect!",
            ],
            'kid-redeem-confirm': [
                "Great choice! Confirm to claim it!",
            ],
        };

        const encouragements = [
            "You're doing AMAZING!",
            "I believe in you  keep going!",
            "One chore at a time  you've got this!",
            "Your family is lucky to have you!",
            "Hard work always pays off!",
            "You're building great habits!",
            "Every point counts  and so do you!",
            "I'm so proud of how far you've come!",
            "You make chores look easy!",
            "Keep that streak alive  you're on fire!",
        ];

        const tips = [
            "Tip: Do your hardest chore first  it's all downhill after that!",
            "Tip: Take progress photos as you go  makes proof easy!",
            "Tip: Set a timer to make chores feel like a game!",
            "Tip: Pair chores with your favorite music!",
            "Tip: The Rewards Shop updates  check back often!",
            "Tip: Shout-outs can earn you bonus points from Dad!",
            "Tip: Streak freezes save your streak on sick days!",
            "Tip: Try swapping chores when you need a change!",
        ];

        const funFacts = [
            "Did you know? Octopuses have 3 hearts! I'm cheering for you with all of mine!",
            "Fun fact: Doing chores boosts your mood  science says so!",
            "Did you know? Kids who do chores earn 25% more as adults!",
            "Fun fact: Octopuses are the smartest invertebrates. That's why I picked this gig!",
            "Did you know? Helping at home builds leadership skills!",
            "Fun fact: The word 'chore' used to mean 'a turn at work.' Your turn is now!",
            "Did you know? Teens who help at home report feeling happier!",
            "Fun fact: I have 8 arms but I still can't fold laundry. You're already better than me!",
        ];

        function getRandomItem(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function showBubble(text, duration) {
            const bubble = document.getElementById('companion-bubble');
            const textEl = document.getElementById('bubble-text');
            textEl.textContent = text;
            closeMenu();
            bubble.classList.add('visible');
            const pulse = document.getElementById('companion-pulse');
            if (pulse) pulse.style.display = 'none';

            clearTimeout(bubbleTimeout);
            if (duration) {
                bubbleTimeout = setTimeout(() => dismissBubble(), duration);
            }
        }

        function dismissBubble() {
            document.getElementById('companion-bubble').classList.remove('visible');
        }

        function toggleCompanionMenu() {
            const menu = document.getElementById('companion-menu');
            const bubble = document.getElementById('companion-bubble');
            if (menuOpen) {
                closeMenu();
            } else {
                bubble.classList.remove('visible');
                menu.classList.add('visible');
                menuOpen = true;
            }
        }

        function closeMenu() {
            document.getElementById('companion-menu').classList.remove('visible');
            menuOpen = false;
        }

        function companionEncourage() {
            showBubble(getRandomItem(encouragements), 5000);
        }

        function companionTip() {
            showBubble(getRandomItem(tips), 6000);
        }

        function companionFunFact() {
            showBubble(getRandomItem(funFacts), 7000);
        }

        function companionCelebrate() {
            const companion = document.getElementById('companion');
            if (!companion || companion.classList.contains('hidden')) return;
            companion.classList.add('celebrating');
            const celebrations = [
                "YESSS! That's what I'm talking about!",
                "You did it! I knew you could!",
                "AMAZING! High five! ...or high eight!",
                "Woohoo! Victory dance time!",
                "That was INCREDIBLE!",
            ];
            showBubble(getRandomItem(celebrations), 4000);
            setTimeout(() => companion.classList.remove('celebrating'), 2000);
        }

        function companionOnNavigate(screenId) {
            // Trigger intro on first visit to kid-chores
            if (screenId === 'kid-chores' && !companionIntroSeen) {
                setTimeout(triggerCompanionIntro, 800);
                return;
            }
            if (!companionVisible) return;
            dismissBubble();
            closeMenu();
            // Show a contextual message after a short delay (30% chance)
            if (Math.random() < 0.3) {
                const messages = screenMessages[screenId];
                if (messages && messages.length > 0) {
                    setTimeout(() => {
                        showBubble(getRandomItem(messages), 5000);
                    }, 1500);
                }
            }
        }

        function showCompanion() {
            const companion = document.getElementById('companion');
            companion.classList.remove('hidden');
            companionVisible = true;
            // Start auto-messages every 15 seconds
            startAutoMessages();
        }

        function hideCompanion() {
            closeMenu();
            dismissBubble();
            const companion = document.getElementById('companion');
            companion.classList.add('hidden');
            companionVisible = false;
            clearInterval(autoMessageInterval);
        }

        function startAutoMessages() {
            clearInterval(autoMessageInterval);
            autoMessageInterval = setInterval(() => {
                if (!companionVisible) return;
                const bubble = document.getElementById('companion-bubble');
                const menu = document.getElementById('companion-menu');
                // Don't interrupt if bubble or menu is showing
                if (bubble.classList.contains('visible') || menu.classList.contains('visible')) return;
                // Show pulse dot to indicate Chal has something to say
                const pulse = document.getElementById('companion-pulse');
                if (pulse) pulse.style.display = 'block';
            }, 12000);
        }

        function dismissIntro() {
            companionIntroSeen = true;
            document.getElementById('companion-intro').classList.remove('visible');
            showCompanion();
            setTimeout(() => {
                showBubble("I'm Chal! Tap me anytime for encouragement, tips, or fun facts!", 5000);
            }, 600);
        }

        function triggerCompanionIntro() {
            if (companionIntroSeen) return;
            document.getElementById('companion-intro').classList.add('visible');
        }

        function toggleCompanionSetting() {
            const toggle = document.getElementById('companion-toggle');
            if (companionVisible) {
                hideCompanion();
                toggle.classList.remove('active');
            } else {
                showCompanion();
                toggle.classList.add('active');
                showBubble("I'm back! Did you miss me?", 4000);
            }
        }

        // ===== FEATURE 1: Thank You Button =====
        function thankYouShoutout() {
            createConfetti();
            showBubble("Jake said thank you for the shout-out! You made his day! ", 4000);
            showToast('Thank you sent!');
            setTimeout(() => navigateTo('kid-living-room'), 1000);
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast visible';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.classList.remove('visible');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 2000);
        }

        // ===== FEATURE 2: Year-End Recap =====
        let recapSlideIndex = 0;

        function openYearRecap() {
            recapSlideIndex = 0;
            document.getElementById('kid-year-recap').style.display = 'flex';
            showRecapSlide(0);
        }

        function closeYearRecap() {
            document.getElementById('kid-year-recap').style.display = 'none';
            navigateTo('kid-living-room');
        }

        function showRecapSlide(index) {
            const slides = document.querySelectorAll('.recap-slide');
            const dots = document.querySelectorAll('.recap-dot');

            slides.forEach((s, i) => {
                s.classList.toggle('active', i === index);
            });

            dots.forEach((d, i) => {
                d.classList.toggle('active', i === index);
            });
        }

        function nextRecapSlide() {
            const slides = document.querySelectorAll('.recap-slide');
            if (recapSlideIndex < slides.length - 1) {
                recapSlideIndex++;
                showRecapSlide(recapSlideIndex);
            }
        }

        function prevRecapSlide() {
            if (recapSlideIndex > 0) {
                recapSlideIndex--;
                showRecapSlide(recapSlideIndex);
            }
        }

        // Add touch/click handlers for recap navigation
        document.addEventListener('DOMContentLoaded', function() {
            const recap = document.getElementById('kid-year-recap');
            if (recap) {
                recap.addEventListener('click', function(e) {
                    const rect = this.getBoundingClientRect();
                    const clickX = e.clientX - rect.left;
                    const width = rect.width;

                    if (clickX > width / 2) {
                        nextRecapSlide();
                    } else {
                        prevRecapSlide();
                    }
                });
            }
        });

        // Update companion messages for birthday
        screenMessages['kid-chores'].push(
            "HAPPY BIRTHDAY!  You get double points today!",
            "It's YOUR day! Chal's wearing a party hat for you! "
        );

        // ===== FEATURE 4: Cash-Out =====
        let selectedCashoutAmount = 5.00;
        let selectedCashoutPoints = 100;

        function selectCashout(element, amount, points) {
            if (element.classList.contains('disabled')) return;

            document.querySelectorAll('.cashout-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            element.classList.add('selected');

            selectedCashoutAmount = amount;
            selectedCashoutPoints = points;

            document.getElementById('cashout-amount').textContent = amount.toFixed(2);
        }

        function processCashout() {
            document.getElementById('success-cashout-amount').textContent = selectedCashoutAmount.toFixed(2);
            createConfetti();
            setTimeout(() => navigateTo('kid-cashout-success'), 800);
        }

        // ===== FEATURE 6: Swipe to Approve/Reject =====
        let swipeCards = [];
        let currentCardIndex = 0;
        let isDragging = false;
        let startX = 0;
        let currentX = 0;
        let dragCard = null;

        function initSwipeCards() {
            swipeCards = Array.from(document.querySelectorAll('.swipe-card'));
            currentCardIndex = 0;
            isDragging = false;
            dragCard = null;

            // Remove old listeners from all cards, then add to first
            swipeCards.forEach(function(card) {
                card.removeEventListener('mousedown', handleDragStart);
                card.removeEventListener('touchstart', handleDragStart);
                card.style.transform = '';
                card.style.transition = '';
            });

            if (swipeCards.length > 0) {
                setupCardDrag(swipeCards[0]);
            }

            updateChoresCount();
        }

        function setupCardDrag(card) {
            card.removeEventListener('mousedown', handleDragStart);
            card.removeEventListener('touchstart', handleDragStart);
            card.addEventListener('mousedown', handleDragStart);
            card.addEventListener('touchstart', handleDragStart, { passive: true });
        }

        function handleDragStart(e) {
            if (e.target.classList.contains('emoji-btn') || e.target.closest('.emoji-btn')) {
                return;
            }

            isDragging = true;
            dragCard = e.currentTarget;
            startX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;
            currentX = startX;

            dragCard.style.transition = 'none';
            dragCard.style.touchAction = 'none';

            document.addEventListener('mousemove', handleDrag, { passive: false });
            document.addEventListener('touchmove', handleDrag, { passive: false });
            document.addEventListener('mouseup', handleDragEnd);
            document.addEventListener('touchend', handleDragEnd);
        }

        function handleDrag(e) {
            if (!isDragging || !dragCard) return;
            e.preventDefault();

            currentX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;
            var deltaX = currentX - startX;

            dragCard.style.transform = 'translateX(' + deltaX + 'px) rotate(' + (deltaX * 0.1) + 'deg)';

            var approveOverlay = dragCard.querySelector('.swipe-overlay.approve');
            var rejectOverlay = dragCard.querySelector('.swipe-overlay.reject');

            if (deltaX > 0) {
                approveOverlay.style.opacity = Math.min(Math.abs(deltaX) / 100, 1);
                rejectOverlay.style.opacity = 0;
            } else {
                rejectOverlay.style.opacity = Math.min(Math.abs(deltaX) / 100, 1);
                approveOverlay.style.opacity = 0;
            }
        }

        function handleDragEnd(e) {
            if (!isDragging) return;

            isDragging = false;
            var deltaX = currentX - startX;

            document.removeEventListener('mousemove', handleDrag);
            document.removeEventListener('touchmove', handleDrag);
            document.removeEventListener('mouseup', handleDragEnd);
            document.removeEventListener('touchend', handleDragEnd);

            if (dragCard) {
                dragCard.style.touchAction = '';
            }

            if (Math.abs(deltaX) > 80) {
                // Swipe detected (lowered threshold for easier swiping)
                if (deltaX > 0) {
                    approveCard();
                } else {
                    rejectCard();
                }
            } else {
                // Snap back
                if (dragCard) {
                    dragCard.style.transition = 'transform 0.3s';
                    dragCard.style.transform = '';
                    var approveOverlay = dragCard.querySelector('.swipe-overlay.approve');
                    var rejectOverlay = dragCard.querySelector('.swipe-overlay.reject');
                    if (approveOverlay) approveOverlay.style.opacity = 0;
                    if (rejectOverlay) rejectOverlay.style.opacity = 0;
                }
            }
        }

        function approveCard() {
            dragCard.style.transition = 'transform 0.5s';
            dragCard.style.transform = 'translateX(500px) rotate(30deg)';

            setTimeout(() => {
                dragCard.remove();
                currentCardIndex++;
                checkAllCardsReviewed();
            }, 500);
        }

        function rejectCard() {
            dragCard.style.transition = 'transform 0.5s';
            dragCard.style.transform = 'translateX(-500px) rotate(-30deg)';

            setTimeout(() => {
                dragCard.remove();
                currentCardIndex++;
                document.getElementById('redo-comment').classList.add('visible');
            }, 500);
        }

        function sendRedo() {
            document.getElementById('redo-comment').classList.remove('visible');
            document.getElementById('redo-input').value = '';
            checkAllCardsReviewed();
        }

        function checkAllCardsReviewed() {
            const remainingCards = document.querySelectorAll('.swipe-card');
            updateChoresCount();

            if (remainingCards.length === 0) {
                showAllCaughtUp();
            } else {
                setupCardDrag(remainingCards[0]);
            }
        }

        function showAllCaughtUp() {
            const content = document.getElementById('verify-content');
            content.innerHTML = `
                <div class="all-caught-up">
                    <i class="fas fa-check-circle"></i>
                    <h2 style="font-size: 24px; color: var(--text); margin-bottom: 12px;">All caught up!</h2>
                    <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 24px;">No more chores to review</p>
                    <button class="btn btn-primary" onclick="navigateTo('parent-dashboard')">
                        Back to Dashboard
                    </button>
                </div>
            `;
        }

        function updateChoresCount() {
            const count = document.querySelectorAll('.swipe-card').length;
            const countEl = document.getElementById('chores-count');
            if (countEl) {
                countEl.textContent = count;
            }
        }

        function approveAllChores() {
            if (confirm('Approve all ' + document.querySelectorAll('.swipe-card').length + ' chores?')) {
                createConfetti();
                setTimeout(() => {
                    document.querySelectorAll('.swipe-card').forEach(card => card.remove());
                    showAllCaughtUp();
                }, 800);
            }
        }

        // Swipe init is handled inside navigateTo() directly

        // ===== V3 NEW FUNCTIONS =====

        // Reward Cart state
        let rewardCart = [];
        let availablePoints = 135;

        function toggleCartItem(btn, name, cost) {
            var idx = rewardCart.findIndex(function(item) { return item.name === name; });
            if (idx > -1) {
                // Remove from cart
                rewardCart.splice(idx, 1);
                btn.className = 'reward-add-btn can-add';
                btn.innerHTML = '<i class="fas fa-plus"></i> <span class="btn-label-add">Add</span><span class="btn-label-remove">Remove</span>';
            } else {
                // Check if can afford
                var cartTotal = rewardCart.reduce(function(sum, item) { return sum + item.cost; }, 0);
                if (cartTotal + cost > availablePoints) {
                    showToast('Not enough points! Remove something first.');
                    return;
                }
                // Add to cart
                rewardCart.push({ name: name, cost: cost });
                btn.className = 'reward-add-btn in-cart';
                btn.innerHTML = '<i class="fas fa-check"></i> <span class="btn-label-add">In Cart</span><span class="btn-label-remove">Remove</span>';
            }
            updateCartBar();
            updateAddButtons();
        }

        function updateCartBar() {
            var bar = document.getElementById('reward-cart-bar');
            var countEl = document.getElementById('cart-count');
            var totalEl = document.getElementById('cart-total');
            var remainEl = document.getElementById('cart-remaining');
            var cartTotal = rewardCart.reduce(function(sum, item) { return sum + item.cost; }, 0);

            if (rewardCart.length > 0) {
                bar.classList.add('visible');
                countEl.textContent = rewardCart.length + (rewardCart.length === 1 ? ' item' : ' items');
                totalEl.textContent = cartTotal + ' pts total';
                remainEl.textContent = (availablePoints - cartTotal) + ' pts remaining';
            } else {
                bar.classList.remove('visible');
            }
        }

        function updateAddButtons() {
            var cartTotal = rewardCart.reduce(function(sum, item) { return sum + item.cost; }, 0);
            var remaining = availablePoints - cartTotal;

            document.querySelectorAll('#kid-rewards .reward-add-btn.can-add').forEach(function(btn) {
                var card = btn.closest('.reward-card');
                var cost = parseInt(card.getAttribute('data-cost'));
                if (cost > remaining) {
                    btn.classList.add('disabled');
                    btn.setAttribute('disabled', 'true');
                    btn.innerHTML = '<i class="fas fa-lock"></i> <span>Not enough pts</span>';
                }
            });

            // Re-enable buttons that became affordable after removal
            document.querySelectorAll('#kid-rewards .reward-add-btn.disabled').forEach(function(btn) {
                var card = btn.closest('.reward-card');
                var cost = parseInt(card.getAttribute('data-cost'));
                var inCart = rewardCart.some(function(item) { return item.name === card.querySelector('.reward-title').textContent.trim(); });
                if (!inCart && cost <= remaining && cost <= availablePoints) {
                    btn.classList.remove('disabled');
                    btn.removeAttribute('disabled');
                    btn.className = 'reward-add-btn can-add';
                    btn.innerHTML = '<i class="fas fa-plus"></i> <span class="btn-label-add">Add</span><span class="btn-label-remove">Remove</span>';
                    btn.setAttribute('onclick', "toggleCartItem(this, '" + card.querySelector('.reward-title').textContent.trim() + "', " + cost + ")");
                }
            });
        }

        function checkoutCart() {
            if (rewardCart.length === 0) return;
            var names = rewardCart.map(function(item) { return item.name; }).join(', ');
            var total = rewardCart.reduce(function(sum, item) { return sum + item.cost; }, 0);
            createConfetti();
            showToast('Redeeming ' + rewardCart.length + ' rewards for ' + total + ' pts! Dad will be notified.');
            // Reset cart
            rewardCart = [];
            updateCartBar();
            // Reset all buttons
            document.querySelectorAll('#kid-rewards .reward-add-btn').forEach(function(btn) {
                var card = btn.closest('.reward-card');
                var cost = parseInt(card.getAttribute('data-cost'));
                if (cost <= availablePoints) {
                    btn.className = 'reward-add-btn can-add';
                    btn.innerHTML = '<i class="fas fa-plus"></i> <span class="btn-label-add">Add</span><span class="btn-label-remove">Remove</span>';
                }
            });
        }

        // Pet state (configurable companion)
        let familyPetEmoji = '';
        let familyPetName = 'Chal';

        function updateCompanionEmoji() {
            // Update companion body emoji (preserve pulse child)
            document.querySelectorAll('.companion-body').forEach(el => {
                var pulse = el.querySelector('.companion-pulse');
                el.textContent = familyPetEmoji;
                if (pulse) el.appendChild(pulse);
            });
            // Update intro character
            document.querySelectorAll('.intro-character').forEach(el => {
                el.textContent = familyPetEmoji;
            });
            // Update all data-companion-emoji elements (settings, etc.)
            document.querySelectorAll('[data-companion-emoji]').forEach(el => {
                el.textContent = familyPetEmoji;
            });
            // Update named IDs in setup/welcome screens
            var petIds = ['forgot-pin-pet', 'welcome-pet-emoji', 'dashboard-pet-emoji', 'setup-chores-pet', 'setup-rewards-pet'];
            petIds.forEach(function(id) {
                var el = document.getElementById(id);
                if (el) el.textContent = familyPetEmoji;
            });
        }

        // PIN Pad
        let pinBuffer = {};

        function pinPadPress(digit, screenId) {
            if (!pinBuffer[screenId]) pinBuffer[screenId] = '';
            if (pinBuffer[screenId].length >= 4) return;
            pinBuffer[screenId] += digit;
            updatePinDots(screenId);

            if (pinBuffer[screenId].length === 4) {
                setTimeout(function() {
                    if (screenId === 'kid-set-pin') {
                        navigateTo('kid-confirm-pin');
                    } else if (screenId === 'kid-confirm-pin') {
                        if (pinBuffer['kid-set-pin'] === pinBuffer['kid-confirm-pin']) {
                            createConfetti();
                            showToast('PIN set!');
                            setTimeout(function() { navigateTo('kid-chores'); }, 800);
                        } else {
                            showToast('PINs don\'t match  try again');
                            pinBuffer['kid-confirm-pin'] = '';
                            updatePinDots('kid-confirm-pin');
                        }
                    } else if (screenId === 'kid-enter-pin') {
                        navigateTo('kid-chores');
                    }
                }, 300);
            }
        }

        function pinPadDelete(screenId) {
            if (!pinBuffer[screenId]) return;
            pinBuffer[screenId] = pinBuffer[screenId].slice(0, -1);
            updatePinDots(screenId);
        }

        function updatePinDots(screenId) {
            const screen = document.getElementById(screenId);
            if (!screen) return;
            const dots = screen.querySelectorAll('.pin-dot');
            const len = (pinBuffer[screenId] || '').length;
            dots.forEach(function(dot, i) {
                dot.classList.toggle('filled', i < len);
            });
        }

        // Chore Tab Switching
        function switchChoreTab(tabName, tabElement) {
            // Update tab buttons
            const tabBar = tabElement.parentElement;
            tabBar.querySelectorAll('.tab').forEach(function(t) {
                t.classList.remove('active');
            });
            tabElement.classList.add('active');

            // Show/hide tab content
            const choreScreen = document.getElementById('kid-chores');
            choreScreen.querySelectorAll('.tab-content').forEach(function(tc) {
                tc.classList.remove('active');
            });
            const target = choreScreen.querySelector('.tab-content[data-tab="' + tabName + '"]');
            if (target) target.classList.add('active');
        }

        // Chore Actions
        function startChore(btn) {
            var card = btn.closest('.chore-card') || btn.closest('.card');
            if (card) {
                card.style.opacity = '0.5';
                card.style.transform = 'translateX(100px)';
                card.style.transition = 'all 0.3s ease';
                showToast('Started! Moved to In Progress');
                setTimeout(function() {
                    card.style.display = 'none';
                }, 300);
            }
        }

        function completeChore(btn) {
            var card = btn.closest('.chore-card') || btn.closest('.card');
            if (card) {
                createConfetti();
                card.style.opacity = '0.5';
                card.style.transform = 'scale(0.8)';
                card.style.transition = 'all 0.3s ease';
                showToast('Submitted for review!');
                setTimeout(function() {
                    card.style.display = 'none';
                }, 400);
            }
        }

        // Pet Picker
        let selectedPetEl = null;

        function selectPet(element, emoji, name) {
            document.querySelectorAll('.pet-card').forEach(function(c) {
                c.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedPetEl = element;
            familyPetEmoji = emoji;
            familyPetName = name;

            // Update pet name input
            var nameInput = document.getElementById('pet-name-input');
            if (nameInput) nameInput.value = name;

            // Update celebration screen preview
            var celebratePet = document.querySelector('.celebrate-pet');
            if (celebratePet) celebratePet.textContent = emoji;
        }

        function finishPetPick() {
            var nameInput = document.getElementById('pet-name-input');
            if (nameInput && nameInput.value) {
                familyPetName = nameInput.value;
            }
            updateCompanionEmoji();
            createConfetti();
            setTimeout(function() { navigateTo('welcome-family'); }, 800);
        }

        // Family Code Preview
        function updateFamilyCodePreview() {
            var input = document.getElementById('family-name-input');
            var preview = document.getElementById('family-code-preview');
            if (input && preview) {
                var val = input.value.toUpperCase().replace(/[^A-Z]/g, '').substring(0, 4);
                if (val.length >= 2) {
                    var code = val + Math.floor(Math.random() * 90 + 10);
                    preview.textContent = code;
                } else {
                    preview.textContent = '----';
                }
            }
        }

        // Add Kids
        let addedKids = [];

        function addKid() {
            var nameInput = document.getElementById('add-kid-name');
            if (!nameInput || !nameInput.value.trim()) {
                showToast('Enter a name first');
                return;
            }
            var name = nameInput.value.trim();
            var code = name.substring(0, 3).toUpperCase() + '0' + (addedKids.length + 1);
            addedKids.push({ name: name, code: code });
            nameInput.value = '';

            // Update the kids list
            var list = document.getElementById('added-kids-list');
            if (list) {
                var item = document.createElement('div');
                item.className = 'kid-added-item';
                item.innerHTML = '<div class="kid-added-avatar">' + name.charAt(0) + '</div>' +
                    '<div style="flex:1;"><div style="font-weight:600;color:var(--text);">' + name + '</div>' +
                    '<div style="font-size:12px;color:var(--text-secondary);">Code: ' + code + '</div></div>' +
                    '<i class="fas fa-check-circle" style="color:#28a745;font-size:20px;"></i>';
                list.appendChild(item);
            }
            showToast(name + ' added!');
        }

        // Chore/Reward Setup Categories
        function toggleChoreCategory(headerEl) {
            var category = headerEl.closest('.chore-category');
            if (category) {
                var items = category.querySelector('.chore-category-items');
                if (items) {
                    items.classList.toggle('expanded');
                }
                // Toggle expanded on header for chevron rotation
                headerEl.classList.toggle('expanded');
            }
        }

        function togglePresetChore(item) {
            item.classList.toggle('selected');
        }

        // Add button press animation
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('btn') || e.target.closest('.btn')) {
                const btn = e.target.classList.contains('btn') ? e.target : e.target.closest('.btn');
                btn.classList.add('btn-press');
                setTimeout(() => btn.classList.remove('btn-press'), 200);
            }
        });

        // Initialize
        updateRoleText();
    </script>
</body>
</html>
